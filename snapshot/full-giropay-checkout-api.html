<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="giropay">
<title>Full giropay Checkout API</title>
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/font-awesome-4.6.0.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Full giropay Checkout API</h1>
<div class="details">
<span id="author" class="author">giropay</span><br>
<span id="revnumber">version 2.11.0-SNAPSHOT</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Content</div>
<ul class="sectlevel1">
<li><a href="#full-giropay-checkout-api-introduction">Introduction</a></li>
<li><a href="#endpoint">Endpoint</a></li>
<li><a href="#_rest_principles">REST principles</a></li>
<li><a href="#authentication">Authenticate as merchant, PSP, or giropay PSP</a>
<ul class="sectlevel2">
<li><a href="#_definition_of_terms">Definition of terms</a></li>
<li><a href="#signature">Signature (Auth-Code)</a></li>
<li><a href="#access-token">Access token</a></li>
<li><a href="#resource-access">Resource access</a></li>
</ul>
</li>
<li><a href="#resources-checkout">Checkout</a>
<ul class="sectlevel2">
<li><a href="#checkout-post">Create a checkout</a></li>
<li><a href="#checkout-get">Read a checkout</a></li>
<li><a href="#checkout-callback">Callback for status updates</a></li>
<li><a href="#checkout-update-deliveryInformation">Update the shipping conditions</a></li>
<li><a href="#checkout-update-invoiceReference">Update the invoice reference</a></li>
</ul>
</li>
<li><a href="#capture">Capture</a>
<ul class="sectlevel2">
<li><a href="#capture-post">Create a capture</a></li>
<li><a href="#capture-get">Read a capture</a></li>
<li><a href="#capture-callback">Callback for status updates</a></li>
<li><a href="#order-close">Close an order (secured)</a></li>
</ul>
</li>
<li><a href="#Refund">Refund</a>
<ul class="sectlevel2">
<li><a href="#refund-post">Create a refund</a></li>
<li><a href="#refund-get">Read a refund</a></li>
<li><a href="#refund-buyer-account-information-eps">Read buyer account information for eps refunds</a></li>
<li><a href="#refund-callback">Callback for status updates</a></li>
</ul>
</li>
<li><a href="#reports">Reports</a>
<ul class="sectlevel2">
<li><a href="#reports-read-transactions-v1">Read transactions (V1)</a></li>
<li><a href="#reports-read-transactions-v2">Read transactions (V2)</a></li>
</ul>
</li>
<li><a href="#_common_data_types">Common data types</a>
<ul class="sectlevel2">
<li><a href="#ShippingAddress">ShippingAddress</a></li>
<li><a href="#Item">Item</a></li>
<li><a href="#Message">Message</a></li>
</ul>
</li>
<li><a href="#character-set">Character set</a>
<ul class="sectlevel2">
<li><a href="#sepa-characters">SEPA-compliant characters</a></li>
</ul>
</li>
<li><a href="#_changelog">Changelog</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="full-giropay-checkout-api-introduction"><a class="link" href="#full-giropay-checkout-api-introduction">Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>giropay is the payment method for German private banks, co-operative banks and credit unions (Raiffeisenbanken, Volksbanken) and savings banks (Sparkassen).</p>
</div>
<div class="paragraph">
<p>The purpose of this document is to describe the interfaces (REST API) in order to fully integrate the payment method for giropay payment service providers (giropay PSP), directly connected merchants and technical payment service providers (PSPs).</p>
</div>
<div class="paragraph">
<p>With this integration of the new and improved <em>full giropay Checkout API</em> you are capable to provide your customers with the three following giropay authorization methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>giropay-Login (payment is authorized via the customers giropay account)</p>
</li>
<li>
<p>Online-Überweisung (payment is authorized with the customer’s online banking credentials)</p>
</li>
<li>
<p>Digitale girocard (Payment is authorized with a digitalized girocard on a customers smartphone banking app)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Being able to provide your customers with all three methods depends purely on the checkout you are creating.
In general all three methods are possible if you use the checkout type “DIRECT_SALE”.
More information will be provided in the part of the checkout creation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="endpoint"><a class="link" href="#endpoint">Endpoint</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The giropay interfaces can be reached via the following URL:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>https://api.paydirekt.de</pre>
</div>
</div>
<div class="paragraph">
<p>A test environment (sandbox) with the following endpoint is available for testing the interface.
The giropay system does not perform any payments in its sandbox, neither to real bank accounts, nor for simulated test banks.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>https://api.sandbox.paydirekt.de</pre>
</div>
</div>
<div class="paragraph">
<p>The static IP addresses of the endpoints are:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Production: 213.95.157.133
Sandbox: 213.95.255.167</pre>
</div>
</div>
<div class="paragraph">
<p>The static IP addresses from which callback URLs are fetched are:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Production: 213.95.26.236
Sandbox: 213.95.26.164</pre>
</div>
</div>
<h3 id="tls" class="discrete">Transport Layer Security (TLS)</h3>
<div class="paragraph">
<p>giropay can only be accessed via encrypted endpoints (HTTPS).
The <a href="https://www.pcisecuritystandards.org/" target="_blank" rel="noopener">Payment Card Industry Security Standards Council</a> already recommends the use of TLS 1.2 for API connections.
The following cipher suites are recommended for TLS 1.2: ECDHE-RSA-AES256-GCM-SHA384</p>
</div>
<div class="paragraph">
<p>Explanation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>This cipher suite is recommended by the <a href="https://www.bsi.bund.de" target="_blank" rel="noopener">BSI</a> and can be used at least until 2021 and beyond.</p>
</li>
<li>
<p>ECDHE offers Perfect Forward Secrecy.</p>
</li>
<li>
<p>ECDHE requires fewer resources than DHE.</p>
</li>
<li>
<p>AES256 is a strong encryption standard.</p>
</li>
<li>
<p>RSA is the underlying method for the private/public key material.</p>
</li>
<li>
<p>SHA384 is a secure fast hash function for signatures.</p>
</li>
<li>
<p>SHA384 provides protection even against length extension attacks (unlike SHA256).</p>
</li>
<li>
<p>GCM is a modern cipher block mode for AES that prevents certain attack vectors possible with the alternative CBC.</p>
</li>
<li>
<p>GCM establishes Authenticated Encryption.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For an overview of which older versions of TLS are currently still supported, see <a href="https://www.ssllabs.com/ssltest/analyze.html?d=api.paydirekt.de&amp;hideResults=on" target="_blank" rel="noopener">this page</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If Java is used, the Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files must be installed.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rest_principles"><a class="link" href="#_rest_principles">REST principles</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The giropay system provides a REST interface for integrating payments in webshops.</p>
</div>
<div class="paragraph">
<p>The API follows the <a href="https://restcookbook.com/Basics/hateoas/" target="_blank" rel="noopener">HATEOAS principles</a>, based on the <a href="https://stateless.group/hal_specification.html" target="_blank" rel="noopener">HAL specification</a>, and uses <a href="https://json.org" target="_blank" rel="noopener">JSON</a> as the data format.</p>
</div>
<h3 id="_http_methods" class="discrete">HTTP methods</h3>
<div class="paragraph">
<p>The REST API defines resources that correspond to business objects and are referenced by URL.
Standard HTTP methods according to <a href="https://www.ietf.org/rfc/rfc2616.txt" target="_blank" rel="noopener">RFC 2616</a> are used to create, modify, and retrieve data from these resources:</p>
</div>
<table id="http-methods" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the representation of one or more business objects. No changes are made to this resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>POST</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates a new business object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PATCH</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Updates an existing business object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PUT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Updates a business object by replacing it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DELETE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deletes a business object.</p></td>
</tr>
</tbody>
</table>
<h3 id="http-header" class="discrete">HTTP header fields</h3>
<div class="paragraph">
<p>The following headers must be included in <a href="#http-methods">all service calls</a> except for the access token endpoint.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Header field</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Authorization</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access token from the <a href="#authentication">OAuth2 call</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bearer &lt;accessTokenValue&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Request-ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique request ID, used for logging.
If none is set in the request, one is generated on the server side and returned inside the HTTP response.<br>
If a request ID is specified on the client side, the format <em>version-4 UUID (random)</em> should be used.<br>
Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8eb5d811-ad7f-4e08-94e4-5dcfa03a4b15</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Content-Type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Internet Media Type of the request body.
Only <code>application/hal+json</code> is supported.<br>
Mandatory field for command methods.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>application/hal+json</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Accept</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The accepted and expected Internet Media Types of the response.
Only <code>application/hal+json</code> is supported.<br>
Mandatory field for calls with response body.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>application/hal+json</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date and time when the request was sent. Format according to [<a href="https://www.ietf.org/rfc/rfc7231.txt" target="_blank" rel="noopener">RFC 7231</a>] IMF-fixdate.<br>
Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fri, 28 May 2021 09:46:48 GMT</p></td>
</tr>
</tbody>
</table>
<h3 id="http-return-codes" class="discrete">HTTP status codes and error messages</h3>
<div class="paragraph">
<p>The following general status codes can potentially occur in all service calls and must be handled accordingly.
Special features for a resource are explained in each case in the <em>return codes</em> section.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP status code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (OK)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request has succeeded.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201 (Created)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request has succeeded. A new resource has been created as a result.
It can be reached at the <code>location</code> stored in the header.<br>
This status code comes after a certain successful POST to a resource URL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">204 (No Content)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request has succeeded. There is no content to send for this request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400 (Bad Request)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request was not accepted. Details are in the response body.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An attempt was made to access a resource that is protected.
Either the API key is incorrect, the OAuth2 token is missing or expired, or access to the resource is denied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">403 (Forbidden)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access is not allowed to this resource with the HTTP method used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The server does not know any resource at this URL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">410 (Gone)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This version of the API is no longer available.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The server could not process the request for semantic reasons. Details are in the response body.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">500 (Internal Server Error)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A server-side error has occurred. Details are in the response body.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">503 (Service Unavailable)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The giropay system is temporarily unavailable (e.g., due to maintenance).</p></td>
</tr>
</tbody>
</table>
<h3 id="error-messages" class="discrete">Error messages</h3>
<div class="paragraph">
<p>If an error occurs, then in addition to the HTTP status code, details of the error are returned in an array of <a href="#Message">message</a> objects named <code>messages</code> in the response body.</p>
</div>
<div class="paragraph">
<p>Messages have a defined, unique message code (field <code>code</code>) and an error level (<code>severity</code>).
In addition, the attribute <code>logref</code> may be included, which uniquely references the error and simplifies error analysis.
Please always include this <code>logref</code> in support requests.</p>
</div>
<div class="paragraph">
<p>The possible message codes are listed in the <a href="#http-return-codes">return codes</a> section.</p>
</div>
<div class="paragraph">
<p>A default behaviour must be implemented for unknown or missing message codes in the case of a 4xx or 5xx status code.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>messages</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of <a href="#Message">messages</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of all errors that have occurred.</p></td>
</tr>
</tbody>
</table>
<h4 id="_special_case_validation_error" class="discrete">Special case: validation error</h4>
<div class="paragraph">
<p>Validation errors are also returned in the previously described form, along with the HTTP status code 400.</p>
</div>
<div class="paragraph">
<p>The path of an affected attribute is specified in the <code>path</code> field.
Complex objects are separated by dots. Arrays are referenced using <code>[n]</code>.</p>
</div>
<div class="paragraph">
<p>In addition, a detailed cause of the validation message can be specified in another optional field, <code>reasonCode</code>.</p>
</div>
<div class="paragraph">
<p>The following reason codes are currently defined for the message code <code>VALIDATION_ERROR</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Reason code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INVALID_FORMAT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value does not match the format specifications.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MANDATORY_VALUE_MISSING</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or more mandatory fields are not specified.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INVALID_ENUM_VALUE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A value was used that is not included in the specified enumeration type.</p></td>
</tr>
</tbody>
</table>
<h3 id="_links" class="discrete">Links</h3>
<div class="paragraph">
<p>Links to other resources may be included in the response data.
The links are dependent on the context and status of the resource and can indicate actions that are currently possible for a resource.
It may be that a link is no longer included, for example after a certain period of time, because the action is no longer possible.</p>
</div>
<div class="paragraph">
<p>The return data follows the <a href="https://stateless.group/hal_specification.html" target="_blank" rel="noopener">Hypertext Application Language (HAL)</a> format.</p>
</div>
<div class="paragraph">
<p>It is strongly recommended to always use links to perform actions.</p>
</div>
<h3 id="_additional_fields" class="discrete">Additional fields</h3>
<div class="paragraph">
<p>Additional fields that are transmitted during requests or responses and are not described in this document will be ignored by the giropay system.
An error or warning will not be returned in the process.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authentication"><a class="link" href="#authentication">Authenticate as merchant, PSP, or giropay PSP</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>An API key procedure in conjunction with OAuth2 is used to authenticate merchants, PSPs, and giropay PSPs.</p>
</div>
<div class="paragraph">
<p><a href="#additional-header-fields-merchant">Directly connected merchants</a> require an API key and API secret pair for the shop on behalf of which they want to send requests to the giropay system.
API keys and secrets for one of the merchant’s shops can be generated in the merchant portal.</p>
</div>
<div class="paragraph">
<p><a href="#additional-header-fields-technical-psp">Technical PSPs</a> require an API key and secret pair of their own. If they want to send checkout requests on behalf of a shop, they additionally need the shop’s <a href="#additional-header-fields-for-merchant-technical-psp">API key and secret pair</a>.</p>
</div>
<div class="paragraph">
<p><a href="#additional-header-fields-giropay-psp">Giropay PSPs</a> require an API key and secret pair of their own. If they want to send checkout requests on behalf of a shop, they additionally need the shop’s <a href="#additional-header-fields-for-merchant-giropay-psp">merchant authorization reference</a>.</p>
</div>
<div class="paragraph">
<p>PSPs and giropay PSPs can create their API keys and secrets in the intermediary portal.</p>
</div>
<div class="paragraph">
<p>For each entity (merchants, PSPs, and giropay PSPs) with their respective set of credentials, an access token can be obtained.
This access token can be used to send authenticated requests to the giropay system.</p>
</div>
<div class="sect2">
<h3 id="_definition_of_terms"><a class="link" href="#_definition_of_terms">Definition of terms</a></h3>
<div id="api-key" class="dlist">
<dl>
<dt class="hdlist1">API key</dt>
<dd>
<p>The API key is used to identify a merchant, technical PSP, or giropay PSP.
An API key can be created and deactivated in the merchant portal (merchant), or intermediary portal (technical PSP, giropay PSP).
Several API keys can be valid at the same time.
In the sandbox, the first 8 digits of newly created API keys are always "00000000".<br></p>
<div class="paragraph">
<p>An API key is generated by the giropay system and has the following format:<br>
Length: 36 characters<br>
Encoding: version-4 UUID (random) [<a href="https://www.ietf.org/rfc/rfc4122.txt" target="_blank" rel="noopener">RFC 4122</a>]<br>
Example: <code>87dbc6cd-91d2-4574-bcb5-2aaaf924386d</code><br>
Example in the sandbox: <code>000000-91d2-4574-bcb5-2aaaf924386d</code></p>
</div>
</dd>
<dt class="hdlist1">API secret</dt>
<dd>
<p>The API secret is used to authenticate the merchant, technical PSP, or giropay PSP.
It is used to generate a <a href="#signature">signature</a> of the authentication request.
The API secret itself is never transmitted in the communication, which significantly increases security.
An API secret is assigned to exactly one API key and is managed together with it.<br></p>
<div class="paragraph">
<p>An API secret is generated by the giropay system and has the following format:<br>
Length: 44 characters<br>
Encoding: Base64 URL encoding [<a href="https://tools.ietf.org/html/rfc4648#section-5" target="_blank" rel="noopener">RFC 4648 Section 5</a>] with Base64 padding<br>
Example: <code>9Tth0qty_9zplTyY0d_QbHYvKM4iSngjoipWO6VxAao=</code></p>
</div>
</dd>
</dl>
</div>
<div id="access-token-description" class="dlist">
<dl>
<dt class="hdlist1">Access token</dt>
<dd>
<p>An OAuth2 access token [<a href="https://datatracker.ietf.org/doc/html/rfc6749#section-11.4" target="_blank" rel="noopener">RFC 6749 1.4</a>] is required for all requests against the giropay API.
The authentication information of the caller is stored in this token.
An access token is generated by calling the <a href="#access-token">access token</a> endpoint by specifying the grant type <code>api_key</code> and is specified as <code>Bearer</code> in the <code>Authorization</code> request header for all subsequent requests:</p>
<div class="literalblock">
<div class="content">
<pre>Authorization: Bearer &lt;accessToken&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>The access token has a limited validity period of one hour.</strong>
After the validity period has expired, a new access token can simply be obtained.
The validity period is returned in the response of the access token.</p>
</div>
<div class="paragraph">
<p>If required, the calling system can use several access tokens simultaneously.
If the calling system consists of several nodes, each node can use its own access token for its requests.
However, for performance reasons, it is not permitted to request a new access token for each individual request.</p>
</div>
</dd>
<dt class="hdlist1">Grant type</dt>
<dd>
<p>The <em>grant type</em> defines the method a user or a system uses to authenticate itself to the giropay system.
For the REST API, the grant type <code>api_key</code> is used.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="signature"><a class="link" href="#signature">Signature (Auth-Code)</a></h3>
<div class="paragraph">
<p>The signature (Auth-Code) confirms that the merchant, technical PSP, or giropay PSP is in possession of the API secret and is allowed to send valid requests to the giropay system.</p>
</div>
<div class="paragraph">
<p>The signature is generated from a <em>string-to-sign</em> and an <em>API secret</em>.
The following values are fed into the <em>string-to-sign</em> in the sequence shown here:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 4%;">
<col style="width: 16%;">
<col style="width: 25%;">
<col style="width: 20%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">No.</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Source</th>
<th class="tableblock halign-left valign-top">Format</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header <code>X-Request-ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version-4 UUID (random) [<a href="https://www.ietf.org/rfc/rfc4122.txt" target="_blank" rel="noopener">RFC 4122</a>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ec85749b-aa36-412a-a397-2b40200c119c</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header <code>X-Date</code>. Important: The time must correspond to the UTC time zone!</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yyyyMMddHHmmss</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20210622235859</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header <code>X-Auth-Key</code> (Merchant), Request Header <code>X-Auth-Key-PSP</code> (PSP, giropay PSP)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version-4 UUID (random) [<a href="https://www.ietf.org/rfc/rfc4122.txt" target="_blank" rel="noopener">RFC 4122</a>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4c15310a-7936-4a19-8d80-f2b7bd95dc9b</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Random Nonce</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request body field <code>randomNonce</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base64 URL encoding [<a href="https://tools.ietf.org/html/rfc4648#section-5" target="_blank" rel="noopener">RFC 4648 Section 5</a>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ns0WLCI3qA2AMH98wUYyhqALyVlzS0q7n Hh7NdeMyvUgKJoyF0rNXkgq5fq2VNJs</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <em>random nonce</em> must be randomly generated by the calling system for each request. It is included in the signature and transferred to the giropay system in the request body field <code>randomNonce</code>.</p>
</div>
<div class="paragraph">
<p>From the values specified above, first the so-called <em>string-to-sign</em> is formed.
For this purpose, the values are connected in the specified order, separated using <code>:</code> as the delimiter, to form a string (string concatenation).
The separator is inserted only if another value follows.
None of the values may be missing or coded as <code>null</code>.</p>
</div>
<div class="paragraph">
<p>Format example for a string-to-sign ‘Z’:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">Z = ec85749b-aa36-412a-a397-2b40200c119c:20210622235859:4c15310a-7936-4a19-8d80-f2b7bd95dc9b:Ns0WLCI3qA2AMH98wUYyhqALyVlzS0q7nHh7NdeMyvUgKJoyF0rNXkgq5fq2VNJs</code></pre>
</div>
</div>
<div class="paragraph">
<p>Based on a <em>string-to-sign</em> <code>Z</code> for a request <code>R</code> and the API secret <code>S</code>, the signature of the request is formed using the HMAC-SHA-256 [<a href="https://tools.ietf.org/html/rfc2104" target="_blank" rel="noopener">RFC 2104</a>] function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">Signature(Request) = new String(encodeBase64URLCompatible(HMAC-SHA-256(getBytes(Z, "UTF-8"), decodeBase64URLCompatible(getBytes(S, "UTF-8")))), "UTF-8")</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The signature is encoded using Base64 <em>URL Encoding</em> [<a href="https://tools.ietf.org/html/rfc4648#section-5">RFC 4648 Section 5</a>].
The problematic characters <code>+</code> and <code>/</code> are replaced by <code>-</code> (minus) and <code>_</code> (underscore).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This signature is given in the request header <code>X-Auth-Code</code> in case of a merchant, <code>X-Auth-Code-PSP</code> in case of a technical PSP or giropay PSP.</p>
</div>
<div class="paragraph">
<p>By comparison with basic auth or a simple hash signature, the HMAC-based API key procedure provides a significantly higher degree of security, since the signature cannot be counterfeited or reused and the secret is never transmitted in the communication.</p>
</div>
</div>
<div class="sect2">
<h3 id="access-token"><a class="link" href="#access-token">Access token</a></h3>
<div class="literalblock">
<div class="content">
<pre>POST /api/merchantintegration/v1/token/obtain</pre>
</div>
</div>
<div class="paragraph">
<p>An access token is issued via this endpoint, as described above.</p>
</div>
<div class="paragraph">
<p>Depending on your role different request fields have to be provided to obtain an access token, <code>X-Auth-Key</code> and <code>X-Auth-Code</code> in case of merchants, <code>X-Auth-Key-PSP</code> and <code>X-Auth-Code-PSP</code> in case of technical PSPs and giropay PSPs.</p>
</div>
<div class="paragraph">
<p>When acting on behalf of a shop, e.g. creating checkouts, technical PSPs additionally need to provide the <code>X-Auth-Key</code> and <code>X-Auth-Code</code> of the shop. giropay PSPs need to additionally provide the <code>X-Auth-Merchant-Ref</code> of the shop, which can be retrieved from the shop’s data, see <em>Managed giropay Merchant API</em>.</p>
</div>
<div class="sect3">
<h4 id="_request"><a class="link" href="#_request">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong><em>General Header fields</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Request-ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Randomly generated UUID of the request<br>
Purpose: Logging, log statement correlation, and debugging<br>
Format: version-4 UUID (random)<br>
Example: ec85749b-aa36-412a-a397-2b40200c119c</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date and time when the request was sent<br>
Format: [<a href="https://www.ietf.org/rfc/rfc7231.txt" target="_blank" rel="noopener">RFC 7231</a>] IMF-fixdate<br>
Example: Fri, 28 May 2021 09:46:48 GMT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Content-Type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always <code>application/hal+json;charset=utf-8</code></p>
<p class="tableblock"><a id="additional-header-fields-merchant"></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong><em>Additional header fields (directly connected merchant)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Auth-Key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API key of the shop<br>
Purpose: Identification<br>
Format: version-4 UUID (random) [<a href="https://www.ietf.org/rfc/rfc4122.txt" target="_blank" rel="noopener">RFC 4122</a>]<br>
Example: 4c15310a-7936-4a19-8d80-f2b7bd95dc9b</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Auth-Code</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
Maximum 44 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request’s <a href="#signature">Signature (Auth-Code)</a><br>
Purpose: Authentication<br>
Encoding: Base64 URL encoding [<a href="https://tools.ietf.org/html/rfc4648#section-5" target="_blank" rel="noopener">RFC 4648 Section 5</a>]<br>
Example: Im6MZB4ht8Dp8mXIBzPjqdgaQSZVl5CzoVzmoCnQAfk=</p>
<p class="tableblock"><a id="additional-header-fields-technical-psp"></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong><em>Additional header fields (technical PSP)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Auth-Key-PSP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API key of the PSP<br>
Purpose: Identification<br>
Format: version-4 UUID (random) [<a href="https://www.ietf.org/rfc/rfc4122.txt" target="_blank" rel="noopener">RFC 4122</a>]<br>
Example: 4c15310a-7936-4a19-8d80-f2b7bd95dc9b</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Auth-Code-PSP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
Maximum 44 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Signature of the request regarding the PSP<br>
Purpose: Authentication<br>
Encoding: Base64 URL encoding [<a href="https://tools.ietf.org/html/rfc4648#section-5" target="_blank" rel="noopener">RFC 4648 Section 5</a>]<br>
Example: Im6MZB4ht8Dp8mXIBzPjqdgaQSZVl5CzoVzmoCnQAfk=</p>
<p class="tableblock"><a id="additional-header-fields-for-merchant-technical-psp"></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Auth-Key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory when acting on behalf of a shop.<br>
36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API key of the shop<br>
Purpose: Identification<br>
Format: version-4 UUID (random) [<a href="https://www.ietf.org/rfc/rfc4122.txt" target="_blank" rel="noopener">RFC 4122</a>]<br>
Example: 4c15310a-7936-4a19-8d80-f2b7bd95dc9b</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Auth-Code</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory when acting on behalf of a shop.<br>
Maximum 44 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request’s <a href="#signature">Signature (Auth-Code)</a><br>
Purpose: Authentication<br>
Encoding: Base64 URL encoding [<a href="https://tools.ietf.org/html/rfc4648#section-5" target="_blank" rel="noopener">RFC 4648 Section 5</a>]<br>
Example: Im6MZB4ht8Dp8mXIBzPjqdgaQSZVl5CzoVzmoCnQAfk=</p>
<p class="tableblock"><a id="additional-header-fields-giropay-psp"></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong><em>Additional header fields (giropay PSP)</em></strong>
<a id="x-auth-key-psp"></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Auth-Key-PSP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API key of the giropay PSP.<br>
Purpose: Identification<br>
Format: version-4 UUID (random) [<a href="https://www.ietf.org/rfc/rfc4122.txt" target="_blank" rel="noopener">RFC 4122</a>]<br>
Example: 4c15310a-7936-4a19-8d80-f2b7bd95dc9b</p>
<p class="tableblock"><a id="x-auth-code-psp"></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Auth-Code-PSP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
Maximum 44 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request’s <a href="#signature">Signature (Auth-Code)</a><br>
Purpose: Authentication<br>
Encoding: Base64 URL encoding [<a href="https://tools.ietf.org/html/rfc4648#section-5" target="_blank" rel="noopener">RFC 4648 Section 5</a>]<br>
Example: Im6MZB4ht8Dp8mXIBzPjqdgaQSZVl5CzoVzmoCnQAfk=</p>
<p class="tableblock"><a id="additional-header-fields-for-merchant-giropay-psp"></a>
<a id="x-auth-merchant-ref"></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Auth-Merchant-Ref</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory when acting on behalf of a shop.<br>
Maximum 44 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identification token for a merchant shop.
Purpose: Permission extension of the issued token with the possibility to perform actions on behalf of this merchant/shop.
Can be retrieved from the shop data of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong><em>Body fields</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>grantType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always <code>api_key</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>randomNonce</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
64 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Random string for diversification of request body content<br>
Purpose: Increasing the security of the process<br>
Encoding: Base64 URL encoding [<a href="https://tools.ietf.org/html/rfc4648#section-5" target="_blank" rel="noopener">RFC 4648 Section 5</a>]<br>
Example: Ns0WLCI3qA2AMH98wUYyhqALyVlzS0q7nHh7NdeMyvUgKJoyF0rNXkgq5fq2VNJs</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_response"><a class="link" href="#_response">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Characteristics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>access_token</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OAuth2 access token for requests to the giropay API.
The token length is dependent on the data fields coded in it, and no maximum length is defined.
It should therefore not be limited when implementing the client.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>token_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always <code>bearer</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>expires_in</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity period of the access token in seconds for information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity range of the access token for information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters for unique identification of the token.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jti</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON Web Token ID of the access token for debugging purposes.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes"><a class="link" href="#_return_codes">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access token was successfully created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400 (Bad Request)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INVALID_GRANT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Auth-Key</code> / <code>X-Auth-Key-PSP</code> or <code>X-Auth-Code</code> / <code>X-Auth-Code-PSP</code> is missing or invalid.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API_KEY_IN_REQUEST_UNKNOWN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The API key is not stored in the giropay system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API_KEY_REQUEST_HEADER_INVALID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request contains more than one <code>X-Auth-Key</code> / <code>X-Auth-Key-PSP</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API_KEY_IN_REQUEST_INACTIVE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The API key is disabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API_KEY_REQUEST_SIGNATURE_INVALID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>X-Auth-Code</code> / <code>X-Auth-Code-PSP</code> is <code>false</code> or empty.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example"><a class="link" href="#_example">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/merchantintegration/v1/token/obtain HTTP/1.1
Date: Mon Jan 23 13:06:19 CET 2021
X-Request-ID: 1e2c7830-e001-4eb3-a705-38efacf3cd01
Accept: application/hal+json
Content-Type: application/hal+json;charset=utf-8
X-Auth-Key-PSP: ee3f9f0e-17fd-4ff3-bebc-3a16a867fd98
X-Auth-Code-PSP: AYLRvNW-zp2Z9RVF6KYYezN9DMHI5Wo8rcQdT02TOMg=
X-Auth-Merchant-Ref: P_piZRwAxsaGBiXQ6gz0d2sC0dkAAIpLZhdwca-XppY=
Host: api.paydirekt.de
Content-Length: 115

{
  "grantType" : "api_key",
  "randomNonce" : "0Lt5zqnh4w3IR1w1crv3jsg5UuZcpBc7kPzJ25KNATYN8CCfp0EZ0mtrLBPZz7Cb"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8
Content-Length: 1344

{
  "access_token" : "w8d2D2wd...",
  "token_type" : "bearer",
  "expires_in" : 3599,
  "scope" : "checkout reporting intermediary",
  "jti" : "842f0703-db73-4132-ac8e-005103f07d8a"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_wrong_auth_code"><a class="link" href="#_example_wrong_auth_code">Example (Wrong auth code)</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/merchantintegration/v1/token/obtain HTTP/1.1
X-Request-ID: 2346b3bd-174d-41d3-a82a-1730dabb1592
Content-Type: application/json;charset=utf-8
X-Auth-Key-PSP: 96a57c6a-ae4e-4c96-9952-2bf830d42031
X-Auth-Code-PSP: 2KXQl8oSV-m1hUWUhDGmYV8HtTXXTRcyXz3SdZGOQlw=
X-Auth-Merchant-Ref: P_piZRwAxsaGBiXQ6gz0d2sC0dkAAIpLZhdwca-XppY=
Host: api.paydirekt.de
Content-Length: 115
X-Date: Mon, 23 Jan 2021 12:06:20 GMT

{
  "grantType" : "api_key",
  "randomNonce" : "KVGQy-bAtKTFhNesYLzFIyUHK_iUA7Qlfw0z7YzFUMqrE3_PB8cOOrlNPScY8S_N"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 401 Unauthorized
Content-Type: application/json;charset=UTF-8
Content-Length: 170

{
  "messages" : [ {
    "severity" : "ERROR",
    "code" : "API_KEY_REQUEST_SIGNATURE_INVALID",
    "logref" : "2346b3bd-174d-41d3-a82a-1730dabb1592:9eLz9fnG9ok"
  } ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resource-access"><a class="link" href="#resource-access">Resource access</a></h3>
<div class="paragraph">
<p>With the valid access token, the API can now be accessed, e.g. to create a new checkout or to retrieve an existing one.
The giropay system identifies the caller using this token.</p>
</div>
<div class="paragraph">
<p>The access token is specified in the <code>Authorization</code> header field with the prefix <code>Bearer</code> (see <a href="#http-header">HTTP header fields</a>).</p>
</div>
<div class="paragraph">
<p>The access token is valid for a limited time (see <code>expires_in</code>) and should be used for all requests within this validity for performance reasons.
The time limit is specified in <a href="#access-token-description">access token</a>.</p>
</div>
<div class="sect3">
<h4 id="_example_expired_access_token"><a class="link" href="#_example_expired_access_token">Example (Expired access token)</a></h4>
<div class="paragraph">
<p>Shortly before this time expires, a new access token should be <a href="#access-token">requested</a>.
In case the validity of an access token has expired due to the time limit, the giropay system responds with the HTTP status code <code>401</code> with the message code <code>ACCESS_TOKEN_EXPIRED</code>.
The calling system must obtain a new access token at this point and repeat the request.</p>
</div>
<div class="paragraph">
<p>In addition to the <a href="#Message">message</a> structure, the body of the HTTP response also contains the <code>error</code> and <code>error_description</code> fields, which are defined in [<a href="https://tools.ietf.org/html/rfc6749#section-5.2" target="_blank" rel="noopener">RFC 6749</a>].</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/merchantintegration/v1/some-endpoint HTTP/1.1
Date: Fri Jan 12 07:57:56 UTC 2024
Host: api.paydirekt.de
Authorization: Bearer lO3uuUom...</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 401 Unauthorized
Content-Type: application/hal+json;charset=utf-8
Content-Length: 197

{
  "messages" : [ {
    "severity" : "ERROR",
    "code" : "ACCESS_TOKEN_EXPIRED",
    "logref" : "12RnHUtfNxr"
  } ],
  "error" : "invalid_token",
  "error_description" : "Access token expired"
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-checkout"><a class="link" href="#resources-checkout">Checkout</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>A checkout represents the entire payment operation.
The following sections describe how checkouts are created and how the data stored on a payment operation can be queried.
A distinction is made here between the types <em>one-time payment</em> and <em>preorder</em>.</p>
</div>
<div class="paragraph">
<p>With this integration of the new and improved <em>full giropay Checkout API</em> you are capable to provide your customers with the three following giropay authorization methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>giropay-Login (payment is authorized via the customers giropay account)</p>
</li>
<li>
<p>Online-Überweisung (payment is authorized with the customer’s online banking credentials)</p>
</li>
<li>
<p>Digitale girocard (payment is authorized with a digitalized girocard on the customer’s smartphone)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Being able to provide your customers with all three methods depends purely on the checkout type you are creating.
In general, all three methods are possible if you use the checkout type <strong>“DIRECT_SALE”</strong>.</p>
</div>
<h4 id="checkout-result" class="discrete">Checkout success status</h4>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The successful completion of the payment does not depend on the successful transmission of the status.
The completion and status of the transaction should therefore always be ensured by the merchant system via a final GET call of the checkout.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In particular, a merchant must not rely on the calls to the status callback URLs <a href="#checkout-callback">see Checkout Callback</a> or the redirection to one of the redirect URLs <a href="#checkout-post-request">see Checkout Request-Fields</a> specified during the creation of the request to evaluate the checkout result.</p>
</div>
<div class="paragraph">
<p>Background: the redirect can fail due to connection errors after a successful checkout or the buyer cancels the redirect.
Status feedback is asynchronous and relies on availability of the merchant endpoint.
In both cases, it is not guaranteed that the outcome of a checkout can always be determined reliably and promptly.</p>
</div>
<div class="paragraph">
<p>In addition, neither the redirect URL nor the status callback URL calls are secured against manipulation or attempted misuse.</p>
</div>
<div class="sect2">
<h3 id="checkout-post"><a class="link" href="#checkout-post">Create a checkout</a></h3>
<div class="literalblock">
<div class="content">
<pre>POST /api/checkout/v1/checkouts</pre>
</div>
</div>
<div class="paragraph">
<p>In addition to the authentication endpoint, this is the only endpoint which must be definitively stored in the web shop.
All other resources can be addressed via corresponding links.</p>
</div>
<div class="sect3">
<h4 id="checkout-post-request"><a class="link" href="#checkout-post-request">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the order. One of <code>DIRECT_SALE</code>, <code>ORDER</code>, or <code>ORDER_SECURED</code>.<br>
<br>
 In case of a <code>DIRECT_SALE</code> (direct order with one-time payment), a payment authorization is generated automatically.<br>
 The merchant immediately receives a payment guarantee.<br>
 For an <code>ORDER</code> (preorder or order with partial payments), one or more captures can be initiated directly afterwards or later.<br>
 No payment guarantee is issued to the merchant for an order.<br>
 The payment is guaranteed only for a (successful) capture.<br>
 For an <code>ORDER_SECURED</code> (secured preorder or order with partial payments), one or more captures can be initiated directly afterwards or later.<br>
 For a secured preorder, a payment guarantee is issued to the merchant for the selected period (maximum 15 calendar days).<br>
 Captures (partial payments) are always executed within the guarantee period.<br>
 For more information about orders and captures, see the <a href="#capture">Capture</a> chapter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scheme</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To enable this feature, an additional agreement is needed.<br>
 Allowed value: <code>EPS</code><br>
 EPS is the Electronic Payment Standard by PSA (Payment Services Austria). Austrian banks that are selectable for payment will be displayed to the customer on a separate bank selection page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>totalAmount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
Between 0.01 and 50000.<br>
Maximum two decimal places.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The total amount of the order, including all delivery costs, for which a payment will be initiated.<br>
 In case of a <code>DIRECT_SALE</code>, a payment for this amount will be initiated.<br>
 In case of an <code>ORDER</code>, captures can be initiated up to a maximum of this amount.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shippingAmount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Minimum 0.00.<br>
Maximum two decimal places.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The shipping cost of the order.<br>
This value is not used for any calculation, it is provided for information only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>orderAmount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Between 0.01 and 50000.<br>
Maximum two decimal places.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value of goods of the order, excluding shipping costs.<br>
This value is not used for any calculation, it is provided for information only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>refundLimit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Between 100 and 200.<br>
Set to 200 if not specified, which means a maximum of two times the amount of the order can be refunded.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum refundable amount as a percentage of the total amount of the order.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>overcapture</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
(Standard: <code>false</code>)<br>
Overcapture is a specific feature for directly connected merchants and must be explicitly approved as a function for your merchant account. Regarding this, please contact <a href="mailto:haendler@giropay.de">haendler@giropay.de</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag for overcapture checkouts.<br>
 In an overcapture checkout, the total amount of <a href="#capture">captures</a> may exceed the merchandise value of the order by up to 10%.<br>
 When this flag is enabled, the <code>finalCapture</code> field of the last capture must be set to <code>true</code>.<br>
 <code>overcapture</code> must be enabled only if the checkout is of type <code>ORDER</code>.<br>
 Can only be used by merchants who have been enabled for this feature.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>currency</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The currency of the total amount. Currently, only EUR is supported.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>items</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of <a href="#Item">items</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The individual items of the shopping cart. It is recommended to pass these values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shoppingCartType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Categorizes the shopping cart of a checkout based on the properties of the goods it contains. The default value is <code>MIXED</code>.<br>
 <code>PHYSICAL</code>: The shopping cart contains only physical goods.<br>
 <code>DIGITAL</code>: The shopping cart contains only digital goods.<br>
 <code>MIXED</code>: The shopping cart contains physical goods as well as digital goods.<br>
 <code>ANONYMOUS_DONATION</code>: The shopping cart contains exclusively an anonymous donation.<br>
 <code>AUTHORITIES_PAYMENT</code>: The shopping cart contains exclusively payments to authorities.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The destination of a shipment. The default value is <code>STANDARD</code>.<br>
 <code>STANDARD</code>: The goods are delivered to an ordinary postal address.<br>
 <code>PACKSTATION</code>: The goods are delivered to a self-service parcel terminal.<br>
 <code>STORE_PICKUP</code>: The goods are collected from the store.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shippingAddress</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ShippingAddress">ShippingAddress</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional for <code>AUTHORITIES_PAYMENT</code> and <code>ANONYMOUS_DONATION</code> checkouts, otherwise mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The shipping address of the recipient. This address is displayed to the customer for verification.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantCustomerNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 50 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal customer number of the buyer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantOrderReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
Maximum 20 characters. <a href="#sepa-characters">SEPA-compliant characters</a> only.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal, unique order number for this checkout process. Displayed to the customer in the transaction overview. Displayed to the merchant in the transaction overview. The order number is used in the debit note as <code>instructionId</code> and in the merchant&#8217;s and buyer&#8217;s payment reference.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantInvoiceReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal, unique invoice number for this purchase or payment transaction. Displayed to the merchant in the transaction overview.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantReconciliationReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 30 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reconciliation number. This value will be inserted in the payment reference of the merchant payment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sha256hashedEmailAddress</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 64 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The buyer&#8217;s email address as a Base64-encoded SHA-256 hash value without padding, if available. Pseudo-code: <code>sha256hashedEmailAddress = toStringUTF8(base64(sha256(toBytesUTF8(emailAddress))))</code>. Example: The email address <a href="mailto:max@muster.de">max@muster.de</a> must result in exactly the following hash value: <code>6JL4VUgVxkq2m+a9I6ScfW2ofJP5y6wsvSaHIsX+iLs=</code>. This information is used for fraud prevention.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redirectUrlAfterSuccess</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory, except for oneKlick checkouts.<br>
Maximum 2000 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The return address of the webshop (including reference to the order), which is called after successful payment. See <a href="#checkout-result">Checkout success status</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redirectUrlAfterCancellation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory, except for oneKlick checkouts.<br>
Maximum 2000 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The return address of the webshop (including reference to the order), which is called in the event of a cancellation or technical error. See <a href="#checkout-result">Checkout success status</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redirectUrlAfterRejection</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory, except for oneKlick checkouts.<br>
Maximum 2000 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The return address of the webshop (including reference to the order), which is called in case of a payment rejection. If the webshop system does not support a distinction between <code>redirectUrlAfterCancellation</code> and <code>redirectUrlAfterRejection</code>, the same URL can be specified in both fields. See <a href="#checkout-result">Checkout success status</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>callbackUrlStatusUpdates</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 2000 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the endpoint that should receive notifications about checkout status updates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minimumAge</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Using the field minimum age will result in the single option "giropay-Login" for the customers, because an age verification at the time is solely possible with an existing giropay account.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The minimum age (in years) that the buyer must have reached in order to be able to complete the order, for example, because it contains items that are subject to an age restriction (movies, computer games, etc.). If this field is filled, an age verification is automatically assigned to this transaction. The verification takes place directly after the buyer logs into the giropay system. If the verification is successful, the process continues as usual without any further message. In case of unsuccessful verification, i.e., the customer has not yet reached the required minimum age, a redirection to the URL of the field <code>redirectUrlAfterAgeVerificationFailure</code> takes place (see below). If this value is not specified, no age verification will be performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redirectUrlAfterAgeVerificationFailure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory if <code>minimumAge</code> is set.<br>
Maximum 2000 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The redirect URL of the webshop in case of an unsuccessful age verification. Currently, no URL can be specified for this in the giropay system. In the future, this must be set when age verification is performed within the transaction. If no age verification is required, this field should be omitted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>note</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 37 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Free text field that appears on the bank statement in the payment reference (<code>DIRECT_SALE</code> only).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>expiryTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Minimum 120 or 660.<br>
Maximum 1800.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration in seconds for which the checkout is valid. Starting from creation in seconds. If not specified, 1800 seconds will be assumed.<br>
Giropay authorization <code>Online-Überweisung</code> can not be selected by the customer if the expiry time is less than 660 seconds.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains information about the delivery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation.expectedShippingDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Timestamp in <a href="https://www.w3.org/TR/NOTE-datetime" target="_blank" rel="noopener">ISO 8601</a> format.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expected shipping date.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation.logisticsProvider</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parcel service provider.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation.trackingNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shipment number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requestedPreauthorizationValidity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Date in the format <code>yyyy-mm-dd</code>.<br>
Maximum 15 calendar days in the future (corresponds to the default value if not filled).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desired guarantee period (maximum 15 calendar days) for a secured preorder (<code>ORDER_SECURED</code>).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="checkout-post-response"><a class="link" href="#checkout-post-response">Response</a></h4>
<div class="paragraph">
<p>The created checkout is returned in the response.
The structure is identical to the checkout endpoint <a href="#checkout-get">GET</a> call.</p>
</div>
<div class="paragraph">
<p>The URL of the created checkout resource is contained in the HTTP header <code>Location</code>, including the <code>checkoutId</code>.
The <code>checkoutId</code> also is returned in the response body.</p>
</div>
</div>
<div class="sect3">
<h4 id="_links_2"><a class="link" href="#_links_2">Links</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to this resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>approve</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the giropay website to which the buyer must be redirected via HTTP code 302 to confirm the payment. The redirection must not be done via an HTML form (using the <code>approve</code> link in the <code>action</code> attribute of the <code>form</code> tag). The confirmation by the customer must be done within 30 minutes. This link is only present if the checkout has not been authorized by the customer yet. The structure or parameters of the link may change due to internal developments. Therefore, use only the link returned by our system at runtime.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>updateDeliveryInformation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to update the delivery information. This link is only available if the update period for the checkout has not yet expired.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>updateMerchantInvoiceReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to update the invoice reference number. This link is only available if the update period for the checkout has not yet expired.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>approve</code> link indicates the page to which the user must be forwarded via an HTTP Redirect (302) in order to confirm the payment.</p>
</div>
</div>
<div class="sect3">
<h4 id="checkout-post-returncodes"><a class="link" href="#checkout-post-returncodes">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201 (Created)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The checkout has been created.
Afterwards, a redirect to the <code>approve</code> link stored in the resource must be performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400 (Bad Request)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VALIDATION_ERROR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request is syntactically invalid.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400 (Bad Request)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CONVERSION_ERROR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request contains invalid characters.
The most common reason for this is that the request is not correctly UTF-8 encoded.
If the invalid characters can be found in an attribute in the request, this attribute is named in the field <code>path</code> and the invalid value is transmitted in the field <code>content</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UNAUTHORIZED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access has been denied.
Please contact giropay support.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_BANKACCOUNT_LOCKED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The merchant’s bank account has been blocked, and no new checkouts or captures can be created.
The merchant should contact giropay support.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PSP_LOCKED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Payment Service Provider (PSP) is locked, and no new checkouts or captures can be created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EPS_NOT_ENABLED_FOR_ACQUIRER_AGREEMENT_SET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EPS is not enabled for the Acquirer Agreement Set. Please contact giropay support.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACQUIRER_AGREEMENT_SET_MISSING</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No acquirer agreement set can be found for the reference at the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NO_AUTHORIZATION_METHOD_AVAILABLE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This checkout could not be approved by a buyer and is denied. The reason is usually that a feature was requested that is incompatible with authorization via online banking credentials, which is the only authorization method available for eps checkouts.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_direct_sale_including_age_verification"><a class="link" href="#_example_direct_sale_including_age_verification">Example (Direct Sale, including age verification)</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/checkout/v1/checkouts HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "type" : "DIRECT_SALE",
  "totalAmount" : 100.0,
  "shippingAmount" : 3.5,
  "orderAmount" : 96.5,
  "refundLimit" : 200,
  "items" : [ {
    "quantity" : 3,
    "name" : "Bobbycar",
    "ean" : "800001303",
    "price" : 25.99
  }, {
    "quantity" : 1,
    "name" : "Helm",
    "price" : 18.53
  } ],
  "shoppingCartType" : "MIXED",
  "currency" : "EUR",
  "overcapture" : false,
  "shippingAddress" : {
    "addresseeGivenName" : "Marie",
    "addresseeLastName" : "Schmitt",
    "company" : "Construction and Building Ltd.",
    "street" : "Chestnut-Avenue",
    "streetNr" : "999",
    "additionalAddressInformation" : "Flat 4",
    "zip" : "90402",
    "city" : "Springfield",
    "countryCode" : "DE",
    "state" : "Bavaria"
  },
  "deliveryInformation" : {
    "expectedShippingDate" : "2023-01-20T12:00:00.000Z",
    "logisticsProvider" : "DHL",
    "trackingNumber" : "1234567890"
  },
  "merchantCustomerNumber" : "cust-732477",
  "merchantOrderReferenceNumber" : "order-A12223412",
  "merchantReconciliationReferenceNumber" : "recon-A12223412",
  "merchantInvoiceReferenceNumber" : "20230118334345",
  "note" : "Your purchase at Toy-Car-Delivery.",
  "sha256hashedEmailAddress" : "GB16eI6lWfIeYeFBoUqUpNsynYZJCv97Uxev4tfZaCg",
  "minimumAge" : 18,
  "expiryTime" : 1800,
  "redirectUrlAfterSuccess" : "https://toy-car-delivery.com/order/123/success",
  "redirectUrlAfterCancellation" : "https://toy-car-delivery.com/order/123/cancellation",
  "redirectUrlAfterAgeVerificationFailure" : "https://toy-car-delivery.com/order/123/ageverificationfailed",
  "redirectUrlAfterRejection" : "https://toy-car-delivery.com/order/123/rejection",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 201 Created
Location: https://api.paydirekt.de/api/checkout/v1/checkouts/bd57cb1c-d872-4d28-ba21-335d7268be8c
Content-Type: application/hal+json;charset=utf-8

{
  "checkoutId" : "bd57cb1c-d872-4d28-ba21-335d7268be8c",
  "type" : "DIRECT_SALE",
  "status" : "OPEN",
  "creationTimestamp" : "2024-01-12T08:09:18.098Z",
  "totalAmount" : 100.0,
  "shippingAmount" : 3.5,
  "orderAmount" : 96.5,
  "refundLimit" : 200,
  "currency" : "EUR",
  "items" : [ {
    "quantity" : 3,
    "name" : "Bobbycar",
    "ean" : "800001303",
    "price" : 25.99
  }, {
    "quantity" : 1,
    "name" : "Helm",
    "price" : 18.53
  } ],
  "shoppingCartType" : "MIXED",
  "deliveryType" : "STANDARD",
  "shippingAddress" : {
    "addresseeGivenName" : "Marie",
    "addresseeLastName" : "Schmitt",
    "company" : "Construction and Building Ltd.",
    "street" : "Chestnut-Avenue",
    "streetNr" : "999",
    "additionalAddressInformation" : "Flat 4",
    "zip" : "90402",
    "city" : "Springfield",
    "countryCode" : "DE",
    "state" : "Bavaria"
  },
  "merchantOrderReferenceNumber" : "order-A12223412",
  "merchantCustomerNumber" : "cust-732477",
  "merchantInvoiceReferenceNumber" : "20230118334345",
  "merchantReconciliationReferenceNumber" : "recon-A12223412",
  "note" : "Your purchase at Toy-Car-Delivery.",
  "minimumAge" : 18,
  "redirectUrlAfterSuccess" : "https://toy-car-delivery.com/order/123/success",
  "redirectUrlAfterCancellation" : "https://toy-car-delivery.com/order/123/cancellation",
  "redirectUrlAfterAgeVerificationFailure" : "https://toy-car-delivery.com/order/123/ageverificationfailed",
  "redirectUrlAfterRejection" : "https://toy-car-delivery.com/order/123/rejection",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status",
  "deliveryInformation" : {
    "expectedShippingDate" : "2023-01-20T12:00:00.000Z",
    "logisticsProvider" : "DHL",
    "trackingNumber" : "1234567890"
  },
  "expiryTimestamp" : "2024-01-12T08:39:18.098Z",
  "_links" : {
    "approve" : {
      "href" : "https://localhost/checkout/?p=bd57cb1c-d872-4d28-ba21-335d7268be8c#/checkout/bd57cb1c-d872-4d28-ba21-335d7268be8c"
    },
    "updateDeliveryInformation" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/bd57cb1c-d872-4d28-ba21-335d7268be8c/deliveryInformation"
    },
    "updateMerchantInvoiceReferenceNumber" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/bd57cb1c-d872-4d28-ba21-335d7268be8c/merchantInvoiceReferenceNumber"
    },
    "self" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/bd57cb1c-d872-4d28-ba21-335d7268be8c"
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_order"><a class="link" href="#_example_order">Example (Order)</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/checkout/v1/checkouts HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "type" : "ORDER",
  "totalAmount" : 100.0,
  "shippingAmount" : 3.5,
  "orderAmount" : 96.5,
  "refundLimit" : 200,
  "items" : [ {
    "quantity" : 3,
    "name" : "Bobbycar",
    "ean" : "800001303",
    "price" : 25.99
  }, {
    "quantity" : 1,
    "name" : "Helm",
    "price" : 18.53
  } ],
  "shoppingCartType" : "PHYSICAL",
  "deliveryType" : "STANDARD",
  "currency" : "EUR",
  "shippingAddress" : {
    "addresseeGivenName" : "Marie",
    "addresseeLastName" : "Schmitt",
    "company" : "Construction and Building Ltd.",
    "street" : "Chestnut-Avenue",
    "streetNr" : "999",
    "additionalAddressInformation" : "Flat 4",
    "zip" : "90402",
    "city" : "Springfield",
    "countryCode" : "DE",
    "state" : "Bavaria"
  },
  "merchantCustomerNumber" : "cust-732477",
  "merchantOrderReferenceNumber" : "order-A12223412",
  "merchantInvoiceReferenceNumber" : "20230118334345",
  "expiryTime" : 1800,
  "redirectUrlAfterSuccess" : "https://toy-car-delivery.com/order/123/success",
  "redirectUrlAfterCancellation" : "https://toy-car-delivery.com/order/123/cancellation",
  "redirectUrlAfterRejection" : "https://toy-car-delivery.com/order/123/rejection",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 201 Created
Location: https://api.paydirekt.de/api/checkout/v1/checkouts/c0db9e7f-63fd-43f8-9362-80c3d04441e2
Content-Type: application/hal+json;charset=utf-8

{
  "checkoutId" : "c0db9e7f-63fd-43f8-9362-80c3d04441e2",
  "type" : "ORDER",
  "status" : "OPEN",
  "creationTimestamp" : "2024-01-12T08:09:53.763Z",
  "totalAmount" : 100.0,
  "shippingAmount" : 3.5,
  "orderAmount" : 96.5,
  "refundLimit" : 200,
  "currency" : "EUR",
  "items" : [ {
    "quantity" : 3,
    "name" : "Bobbycar",
    "ean" : "800001303",
    "price" : 25.99
  }, {
    "quantity" : 1,
    "name" : "Helm",
    "price" : 18.53
  } ],
  "shoppingCartType" : "PHYSICAL",
  "deliveryType" : "STANDARD",
  "shippingAddress" : {
    "addresseeGivenName" : "Marie",
    "addresseeLastName" : "Schmitt",
    "company" : "Construction and Building Ltd.",
    "street" : "Chestnut-Avenue",
    "streetNr" : "999",
    "additionalAddressInformation" : "Flat 4",
    "zip" : "90402",
    "city" : "Springfield",
    "countryCode" : "DE",
    "state" : "Bavaria"
  },
  "merchantOrderReferenceNumber" : "order-A12223412",
  "merchantCustomerNumber" : "cust-732477",
  "merchantInvoiceReferenceNumber" : "20230118334345",
  "redirectUrlAfterSuccess" : "https://toy-car-delivery.com/order/123/success",
  "redirectUrlAfterCancellation" : "https://toy-car-delivery.com/order/123/cancellation",
  "redirectUrlAfterRejection" : "https://toy-car-delivery.com/order/123/rejection",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status",
  "expiryTimestamp" : "2024-01-12T08:39:53.763Z",
  "_links" : {
    "approve" : {
      "href" : "https://localhost/checkout/?p=c0db9e7f-63fd-43f8-9362-80c3d04441e2#/checkout/c0db9e7f-63fd-43f8-9362-80c3d04441e2"
    },
    "updateDeliveryInformation" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/c0db9e7f-63fd-43f8-9362-80c3d04441e2/deliveryInformation"
    },
    "updateMerchantInvoiceReferenceNumber" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/c0db9e7f-63fd-43f8-9362-80c3d04441e2/merchantInvoiceReferenceNumber"
    },
    "self" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/c0db9e7f-63fd-43f8-9362-80c3d04441e2"
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_order_secured"><a class="link" href="#_example_order_secured">Example (Order secured)</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/checkout/v1/checkouts HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "type" : "ORDER_SECURED",
  "totalAmount" : 100.0,
  "shippingAmount" : 3.5,
  "orderAmount" : 96.5,
  "refundLimit" : 200,
  "items" : [ {
    "quantity" : 3,
    "name" : "Bobbycar",
    "ean" : "800001303",
    "price" : 25.99
  }, {
    "quantity" : 1,
    "name" : "Helm",
    "price" : 18.53
  } ],
  "shoppingCartType" : "PHYSICAL",
  "deliveryType" : "STANDARD",
  "currency" : "EUR",
  "shippingAddress" : {
    "addresseeGivenName" : "Marie",
    "addresseeLastName" : "Schmitt",
    "company" : "Construction and Building Ltd.",
    "street" : "Chestnut-Avenue",
    "streetNr" : "999",
    "additionalAddressInformation" : "Flat 4",
    "zip" : "90402",
    "city" : "Springfield",
    "countryCode" : "DE",
    "state" : "Bavaria"
  },
  "merchantCustomerNumber" : "cust-732477",
  "merchantOrderReferenceNumber" : "order-A12223412",
  "merchantInvoiceReferenceNumber" : "20230118334345",
  "expiryTime" : 1800,
  "redirectUrlAfterSuccess" : "https://toy-car-delivery.com/order/123/success",
  "redirectUrlAfterCancellation" : "https://toy-car-delivery.com/order/123/cancellation",
  "redirectUrlAfterRejection" : "https://toy-car-delivery.com/order/123/rejection",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status",
  "requestedPreauthorizationValidity" : "2024-01-15"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 201 Created
Location: https://api.paydirekt.de/api/checkout/v1/checkouts/257c1e70-09ac-4217-b0d5-2611c39e9d9a
Content-Type: application/hal+json;charset=utf-8

{
  "checkoutId" : "257c1e70-09ac-4217-b0d5-2611c39e9d9a",
  "type" : "ORDER_SECURED",
  "status" : "OPEN",
  "creationTimestamp" : "2024-01-12T08:10:55.985Z",
  "totalAmount" : 100.0,
  "shippingAmount" : 3.5,
  "orderAmount" : 96.5,
  "refundLimit" : 200,
  "currency" : "EUR",
  "items" : [ {
    "quantity" : 3,
    "name" : "Bobbycar",
    "ean" : "800001303",
    "price" : 25.99
  }, {
    "quantity" : 1,
    "name" : "Helm",
    "price" : 18.53
  } ],
  "shoppingCartType" : "PHYSICAL",
  "deliveryType" : "STANDARD",
  "shippingAddress" : {
    "addresseeGivenName" : "Marie",
    "addresseeLastName" : "Schmitt",
    "company" : "Construction and Building Ltd.",
    "street" : "Chestnut-Avenue",
    "streetNr" : "999",
    "additionalAddressInformation" : "Flat 4",
    "zip" : "90402",
    "city" : "Springfield",
    "countryCode" : "DE",
    "state" : "Bavaria"
  },
  "merchantOrderReferenceNumber" : "order-A12223412",
  "merchantCustomerNumber" : "cust-732477",
  "merchantInvoiceReferenceNumber" : "20230118334345",
  "redirectUrlAfterSuccess" : "https://toy-car-delivery.com/order/123/success",
  "redirectUrlAfterCancellation" : "https://toy-car-delivery.com/order/123/cancellation",
  "redirectUrlAfterRejection" : "https://toy-car-delivery.com/order/123/rejection",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status",
  "expiryTimestamp" : "2024-01-12T08:40:55.985Z",
  "_links" : {
    "approve" : {
      "href" : "https://localhost/checkout/?p=257c1e70-09ac-4217-b0d5-2611c39e9d9a#/checkout/257c1e70-09ac-4217-b0d5-2611c39e9d9a"
    },
    "updateDeliveryInformation" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/257c1e70-09ac-4217-b0d5-2611c39e9d9a/deliveryInformation"
    },
    "updateMerchantInvoiceReferenceNumber" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/257c1e70-09ac-4217-b0d5-2611c39e9d9a/merchantInvoiceReferenceNumber"
    },
    "self" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/257c1e70-09ac-4217-b0d5-2611c39e9d9a"
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_validation_error"><a class="link" href="#_example_validation_error">Example (Validation error)</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/checkout/v1/checkouts HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "type" : "DIRECT_SALE",
  "totalAmount" : 100.0,
  "shippingAmount" : 5.999,
  "orderAmount" : 96.5,
  "refundLimit" : 200,
  "items" : [ {
    "quantity" : 3,
    "name" : "Bobbycar",
    "ean" : "800001303",
    "price" : 25.99
  }, {
    "quantity" : 1,
    "name" : "Helm",
    "price" : 18.53
  } ],
  "shoppingCartType" : "MIXED",
  "currency" : "EUR",
  "overcapture" : false,
  "shippingAddress" : {
    "addresseeGivenName" : "Marie",
    "addresseeLastName" : "Schmitt",
    "company" : "Construction and Building Ltd.",
    "street" : "Chestnut-Avenue",
    "streetNr" : "999",
    "additionalAddressInformation" : "Flat 4",
    "zip" : "90402",
    "city" : "Springfield",
    "countryCode" : "DE",
    "state" : "Bavaria"
  },
  "merchantCustomerNumber" : "cust-732477",
  "merchantOrderReferenceNumber" : "order-A12223412",
  "merchantReconciliationReferenceNumber" : "recon-A12223412",
  "merchantInvoiceReferenceNumber" : "20230118334345",
  "note" : "Your purchase at Toy-Car-Delivery.",
  "sha256hashedEmailAddress" : "GB16eI6lWfIeYeFBoUqUpNsynYZJCv97Uxev4tfZaCg",
  "expiryTime" : 1800,
  "redirectUrlAfterSuccess" : "https://toy-car-delivery.com/order/123/success",
  "redirectUrlAfterCancellation" : "https://toy-car-delivery.com/order/123/cancellation",
  "redirectUrlAfterAgeVerificationFailure" : "https://toy-car-delivery.com/order/123/underAge",
  "redirectUrlAfterRejection" : "https://toy-car-delivery.com/order/123/rejection",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 400 Bad Request
Content-Type: application/json;charset=utf-8

{
  "messages" : [ {
    "severity" : "ERROR",
    "code" : "VALIDATION_ERROR",
    "path" : "shippingAmount",
    "reasonCode" : "INVALID_FORMAT",
    "logref" : "e813ab4d-4565-44f6-bd77-80fa81042e06:9yNkppWsg51"
  } ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_semantic_error"><a class="link" href="#_example_semantic_error">Example (Semantic error)</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/checkout/v1/checkouts HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "type" : "DIRECT_SALE",
  "totalAmount" : 100.0,
  "shippingAmount" : 3.5,
  "orderAmount" : 96.5,
  "refundLimit" : 200,
  "items" : [ {
    "quantity" : 3,
    "name" : "Bobbycar",
    "ean" : "800001303",
    "price" : 25.99
  }, {
    "quantity" : 1,
    "name" : "Helm",
    "price" : 18.53
  } ],
  "shoppingCartType" : "MIXED",
  "currency" : "EUR",
  "overcapture" : false,
  "shippingAddress" : {
    "addresseeGivenName" : "Marie",
    "addresseeLastName" : "Schmitt",
    "company" : "Construction and Building Ltd.",
    "street" : "Chestnut-Avenue",
    "streetNr" : "999",
    "additionalAddressInformation" : "Flat 4",
    "zip" : "90402",
    "city" : "Springfield",
    "countryCode" : "DE",
    "state" : "Bavaria"
  },
  "merchantCustomerNumber" : "cust-732477",
  "merchantOrderReferenceNumber" : "order-A12223412",
  "merchantReconciliationReferenceNumber" : "recon-A12223412",
  "merchantInvoiceReferenceNumber" : "20230118334345",
  "note" : "Your purchase at Toy-Car-Delivery.",
  "sha256hashedEmailAddress" : "GB16eI6lWfIeYeFBoUqUpNsynYZJCv97Uxev4tfZaCg",
  "expiryTime" : 1800,
  "redirectUrlAfterSuccess" : "https://toy-car-delivery.com/order/123/success",
  "redirectUrlAfterCancellation" : "https://toy-car-delivery.com/order/123/cancellation",
  "redirectUrlAfterAgeVerificationFailure" : "https://toy-car-delivery.com/order/123/underAge",
  "redirectUrlAfterRejection" : "https://toy-car-delivery.com/order/123/rejection",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 422 Unprocessable Entity
Content-Type: application/json;charset=utf-8

{
  "messages" : [ {
    "severity" : "ERROR",
    "code" : "MERCHANT_BANKACCOUNT_LOCKED",
    "logref" : "3795b345-6ef7-4014-a7dc-3222636611de:2qXUkFIPKWu"
  } ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_conversion_error"><a class="link" href="#_example_conversion_error">Example (Conversion error)</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/checkout/v1/checkouts HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "type" : "DIRECT_SALE",
  "totalAmount" : 100.0,
  "shippingAmount" : 3.5,
  "orderAmount" : 96.5,
  "refundLimit" : 200,
  "items" : [ {
    "quantity" : 3,
    "name" : "Bobbycar",
    "ean" : "800001303",
    "price" : 25.99
  }, {
    "quantity" : 1,
    "name" : "Helm",
    "price" : 18.53
  } ],
  "shoppingCartType" : "MIXED",
  "currency" : "EUR",
  "overcapture" : false,
  "shippingAddress" : {
    "addresseeGivenName" : "Marie",
    "addresseeLastName" : "Schmitt",
    "company" : "ungültige Zeichen sind z.B.: €¥£˚\\˙¯⁀",
    "street" : "Chestnut-Avenue",
    "streetNr" : "999",
    "additionalAddressInformation" : "Flat 4",
    "zip" : "90402",
    "city" : "Springfield",
    "countryCode" : "DE",
    "state" : "Bavaria"
  },
  "merchantCustomerNumber" : "cust-732477",
  "merchantOrderReferenceNumber" : "order-A12223412",
  "merchantReconciliationReferenceNumber" : "recon-A12223412",
  "merchantInvoiceReferenceNumber" : "20230118334345",
  "note" : "Your purchase at Toy-Car-Delivery.",
  "sha256hashedEmailAddress" : "GB16eI6lWfIeYeFBoUqUpNsynYZJCv97Uxev4tfZaCg",
  "expiryTime" : 1800,
  "redirectUrlAfterSuccess" : "https://toy-car-delivery.com/order/123/success",
  "redirectUrlAfterCancellation" : "https://toy-car-delivery.com/order/123/cancellation",
  "redirectUrlAfterAgeVerificationFailure" : "https://toy-car-delivery.com/order/123/underAge",
  "redirectUrlAfterRejection" : "https://toy-car-delivery.com/order/123/rejection",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 400 Bad Request
Content-Type: application/json;charset=utf-8

{
  "messages" : [ {
    "severity" : "ERROR",
    "code" : "CONVERSION_ERROR",
    "path" : "shippingAddress.company",
    "reasonCode" : "HTTP_MESSAGE_NOT_READABLE",
    "logref" : "e8937510-ba69-4984-a808-903dd46bdfe9:4uMTrnR10he",
    "content" : "ungültige Zeichen sind z.B.: €¥£˚\\˙¯⁀"
  } ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="checkout-get"><a class="link" href="#checkout-get">Read a checkout</a></h3>
<div class="literalblock">
<div class="content">
<pre>GET /api/checkout/v1/checkouts/{checkoutId}</pre>
</div>
</div>
<div class="paragraph">
<p>A previously created checkout can be called up via the <a href="#checkout-get">GET</a> method in order to query the status of the payment and other properties, and to determine the links to other resources, e.g., captures and refunds.</p>
</div>
<div class="sect3">
<h4 id="_response_2"><a class="link" href="#_response_2">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkoutId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters for this checkout process. Assigned by the giropay system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the order. One of <code>DIRECT_SALE</code>, <code>ORDER</code>, or <code>ORDER_SECURED</code>.<br>
<br>
 In case of a <code>DIRECT_SALE</code> (direct order with one-time payment), a payment authorization is generated automatically.<br>
 The merchant immediately receives a payment guarantee.<br>
 For an <code>ORDER</code> (preorder or order with partial payments), one or more captures can be initiated directly afterwards or later.<br>
 No payment guarantee is issued to the merchant for an order.<br>
 The payment is guaranteed only for a (successful) capture.<br>
 For an <code>ORDER_SECURED</code> (secured preorder or order with partial payments), one or more captures can be initiated directly afterwards or later.<br>
 For a secured preorder, a payment guarantee is issued to the merchant for the selected period (maximum 15 calendar days).<br>
 Captures (partial payments) are always executed within the guarantee period.<br>
 For more information about orders and captures, see the <a href="#capture">Capture</a> chapter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scheme</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To enable this feature, an additional agreement is needed.<br>
 Allowed value: <code>EPS</code><br>
 EPS is the Electronic Payment Standard by PSA (Payment Services Austria). Austrian banks that are selectable for payment will be displayed to the customer on a separate bank selection page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status of the checkout. One of <code>OPEN</code>, <code>APPROVED</code>, <code>REJECTED</code>, <code>CANCELED</code>, <code>CLOSED</code>, or <code>EXPIRED</code>.<br>
 <code>OPEN</code>: The checkout was newly created and not yet confirmed by the customer.<br>
 <code>APPROVED</code>: The checkout has been confirmed by the customer and approved by the system. In the case of an ORDER, <a href="#capture">captures</a> can now be created.<br>
 <code>REJECTED</code>: The checkout was rejected by the system. The payment was not successful. It is unlikely that the payment will succeed if tried again by this customer.<br>
 <code>CANCELED</code>: The checkout was canceled by the customer, or a technical error occurred. The checkout cannot be processed further.<br>
 <code>CLOSED</code>: Only <em>ORDER</em>: The order has been closed, it is not possible to create new captures. Refunds are still possible.<br>
 <code>EXPIRED</code>: The checkout has expired and cannot be used further. The customer has not confirmed the checkout within 30 minutes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>correlationId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Available as soon as a customer has logged in. UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID of the checkout and all associated transactions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>creationTimestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The creation time of the checkout. Assigned by the giropay system. Formatting according to ISO 8601 by the <a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_LOCAL_TIME" target="_blank" rel="noopener">Java DateTimeFormatter standard</a>. Deviating from this, three decimal places are always output for the milliseconds.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>expiryTimestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checkout is valid up until this timestamp. Can be configured on creation via the field <code>expiryTime</code>. If not specified, 1800 seconds will be assumed. Formatting according to ISO 8601 by the <a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_LOCAL_TIME" target="_blank" rel="noopener">Java DateTimeFormatter standard</a>. Deviating from this, three decimal places are always output for the milliseconds.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>totalAmount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The total amount of the order, including all delivery costs, for which a payment will be initiated.<br>
 In case of a <code>DIRECT_SALE</code>, a payment for this amount will be initiated.<br>
 In case of an <code>ORDER</code>, captures can be initiated up to a maximum of this amount.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shippingAmount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The shipping cost of the order.<br>
This value is not used for any calculation, it is provided for information only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>orderAmount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value of goods of the order, excluding shipping costs.<br>
This value is not used for any calculation, it is provided for information only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>refundLimit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum refundable amount as a percentage of the total amount of the order.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>overcapture</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag for overcapture checkouts.<br>
 In an overcapture checkout, the total amount of <a href="#capture">captures</a> may exceed the merchandise value of the order by up to 10%.<br>
 When this flag is enabled, the <code>finalCapture</code> field of the last capture must be set to <code>true</code>.<br>
 <code>overcapture</code> must be enabled only if the checkout is of type <code>ORDER</code>.<br>
 Can only be used by merchants who have been enabled for this feature.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxCapturableAmount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Available if overcapture flag is set.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the overcapture flag is set, this field contains the maximum amount that can be retrieved in total.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxOvercaptureDifference</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Available if overcapture flag is set.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the overcapture flag is set, this field contains the amount additional to the total amount that can be retrieved in total.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>currency</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The currency of the total amount. Currently, only EUR is supported.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>items</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array von <a href="#Item">Items</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The individual items of the shopping cart. It is recommended to pass these values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shoppingCartType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Categorizes the shopping cart of a checkout based on the properties of the goods it contains. The default value is <code>MIXED</code>.<br>
 <code>PHYSICAL</code>: The shopping cart contains only physical goods.<br>
 <code>DIGITAL</code>: The shopping cart contains only digital goods.<br>
 <code>MIXED</code>: The shopping cart contains physical goods as well as digital goods.<br>
 <code>ANONYMOUS_DONATION</code>: The shopping cart contains exclusively an anonymous donation.<br>
 <code>AUTHORITIES_PAYMENT</code>: The shopping cart contains exclusively payments to authorities.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The destination of a shipment. The default value is <code>STANDARD</code>.<br>
 <code>STANDARD</code>: The goods are delivered to an ordinary postal address.<br>
 <code>PACKSTATION</code>: The goods are delivered to a self-service parcel terminal.<br>
 <code>STORE_PICKUP</code>: The goods are collected from the store.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shippingAddress</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ShippingAddress">ShippingAddress</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The shipping address of the recipient. This address is displayed to the customer for verification.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantCustomerNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal customer number of the buyer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantOrderReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal, unique order number for this checkout process. Displayed to the customer in the transaction overview. Displayed to the merchant in the transaction overview. The order number is used in the debit note as <code>instructionId</code> and in the merchant&#8217;s and buyer&#8217;s payment reference.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantInvoiceReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal, unique invoice number for this purchase or payment transaction. Displayed to the merchant in the transaction overview.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantReconciliationReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reconciliation number. This value will be inserted in the payment reference of the merchant payment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redirectUrlAfterSuccess</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present, except for oneKlick checkouts.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The return address of the webshop (including reference to the order), which is called after successful payment. See <a href="#checkout-result">Checkout success status</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redirectUrlAfterCancellation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present, except for oneKlick checkouts.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The return address of the webshop (including reference to the order), which is called in the event of a cancellation or technical error. See <a href="#checkout-result">Checkout success status</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redirectUrlAfterRejection</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present, except for oneKlick checkouts.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The return address of the webshop (including reference to the order), which is called in case of a payment rejection. If the webshop system does not support a distinction between <code>redirectUrlAfterCancellation</code> and <code>redirectUrlAfterRejection</code>, the same URL can be specified in both fields. See <a href="#checkout-result">Checkout success status</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>callbackUrlStatusUpdates</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the endpoint that should receive notifications about checkout status updates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minimumAge</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The minimum age (in years) that the buyer must have reached in order to be able to complete the order, for example, because it contains items that are subject to an age restriction (movies, computer games, etc.). If this field is filled, an age verification is automatically assigned to this transaction. The verification takes place directly after the buyer logs into the giropay system. If the verification is successful, the process continues as usual without any further message. In case of unsuccessful verification, i.e., the customer has not yet reached the required minimum age, a redirection to the URL of the field <code>redirectUrlAfterAgeVerificationFailure</code> takes place (see below). If this value is not specified, no age verification will be performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redirectUrlAfterAgeVerificationFailure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The redirect URL of the webshop in case of an unsuccessful age verification. Currently, no URL can be specified for this in the giropay system. In the future, this must be set when age verification is performed within the transaction. If no age verification is required, this field should be omitted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>note</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Free text field that appears on the bank statement in the payment reference (<code>DIRECT_SALE</code> only).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains information about the delivery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation.expectedShippingDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expected shipping date.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation.logisticsProvider</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parcel service provider.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation.trackingNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shipment number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>preauthorizationValidity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present for checkout type <code>ORDER_SECURED</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Guarantee period for the secured pre-order (<code>ORDER_SECURED</code>). Captures within this period are guaranteed for the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Embedded resources</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_links_3"><a class="link" href="#_links_3">Links</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to this resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>approve</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the giropay website to which the buyer must be redirected via HTTP code 302 to confirm the payment. The redirection must not be done via an HTML form (using the <code>approve</code> link in the <code>action</code> attribute of the <code>form</code> tag). The confirmation by the customer must be done within 30 minutes. This link is only present if the checkout has not been authorized by the customer yet. The structure or parameters of the link may change due to internal developments. Therefore, use only the link returned by our system at runtime.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>close</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to close the open order. This link is available only if the checkout is of type <code>ORDER</code>, and if it is in status <code>APPROVED</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>captures</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to <a href="#capture">captures</a>. This link is only present if a <a href="#capture">capture</a> is possible for this order.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>refunds</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the <a href="#Refund">refunds</a>. This link is only available if a refund is possible for this order, i.e., if there is at least one capture with the status <code>SUCCESSFUL</code>. If the link is not present, no refunds are possible.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>updateDeliveryInformation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to update the delivery information. This link is only available if the update period for the checkout has not yet expired.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>updateMerchantInvoiceReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to update the invoice reference number. This link is only available if the update period for the checkout has not yet expired.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_embedded_resources"><a class="link" href="#_embedded_resources">Embedded resources</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Resource</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>captures</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of <a href="#capture">captures</a> if captures are available for this checkout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>refunds</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of <a href="#Refund">refunds</a> if refunds are available for this checkout.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_2"><a class="link" href="#_return_codes_2">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The checkout has been found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHECKOUT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested checkout does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_direct_sale_after_approval_by_customer"><a class="link" href="#_example_direct_sale_after_approval_by_customer">Example (Direct sale after approval by customer)</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/checkout/v1/checkouts/bd57cb1c-d872-4d28-ba21-335d7268be8c HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "checkoutId" : "bd57cb1c-d872-4d28-ba21-335d7268be8c",
  "type" : "DIRECT_SALE",
  "status" : "APPROVED",
  "correlationId" : "ext0815-00000140",
  "creationTimestamp" : "2024-01-12T08:09:18.098Z",
  "totalAmount" : 100.0,
  "shippingAmount" : 3.5,
  "orderAmount" : 96.5,
  "refundLimit" : 200,
  "currency" : "EUR",
  "items" : [ {
    "quantity" : 3,
    "name" : "Bobbycar",
    "ean" : "800001303",
    "price" : 25.99
  }, {
    "quantity" : 1,
    "name" : "Helm",
    "price" : 18.53
  } ],
  "shoppingCartType" : "MIXED",
  "deliveryType" : "STANDARD",
  "shippingAddress" : {
    "addresseeGivenName" : "Marie",
    "addresseeLastName" : "Schmitt",
    "company" : "Construction and Building Ltd.",
    "street" : "Chestnut-Avenue",
    "streetNr" : "999",
    "additionalAddressInformation" : "Flat 4",
    "zip" : "90402",
    "city" : "Springfield",
    "countryCode" : "DE",
    "state" : "Bavaria"
  },
  "merchantOrderReferenceNumber" : "order-A12223412",
  "merchantCustomerNumber" : "cust-732477",
  "merchantInvoiceReferenceNumber" : "20230118334345",
  "merchantReconciliationReferenceNumber" : "recon-A12223412",
  "note" : "Your purchase at Toy-Car-Delivery.",
  "minimumAge" : 18,
  "redirectUrlAfterSuccess" : "https://toy-car-delivery.com/order/123/success",
  "redirectUrlAfterCancellation" : "https://toy-car-delivery.com/order/123/cancellation",
  "redirectUrlAfterAgeVerificationFailure" : "https://toy-car-delivery.com/order/123/ageverificationfailed",
  "redirectUrlAfterRejection" : "https://toy-car-delivery.com/order/123/rejection",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status",
  "deliveryInformation" : {
    "expectedShippingDate" : "2023-01-20T12:00:00.000Z",
    "logisticsProvider" : "DHL",
    "trackingNumber" : "1234567890"
  },
  "expiryTimestamp" : "2024-01-12T08:39:18.098Z",
  "_links" : {
    "refunds" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/bd57cb1c-d872-4d28-ba21-335d7268be8c/refunds"
    },
    "updateDeliveryInformation" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/bd57cb1c-d872-4d28-ba21-335d7268be8c/deliveryInformation"
    },
    "updateMerchantInvoiceReferenceNumber" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/bd57cb1c-d872-4d28-ba21-335d7268be8c/merchantInvoiceReferenceNumber"
    },
    "self" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/bd57cb1c-d872-4d28-ba21-335d7268be8c"
    }
  },
  "_embedded" : {
    "captures" : [ {
      "type" : "CAPTURE_DIRECT_SALE",
      "transactionId" : "2c4802f3-b514-4042-9a37-273cc9f00b03",
      "amount" : 100.0,
      "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status",
      "deliveryInformation" : {
        "expectedShippingDate" : "2023-01-20T12:00:00.000Z",
        "logisticsProvider" : "DHL",
        "trackingNumber" : "1234567890"
      },
      "status" : "SUCCESSFUL",
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/bd57cb1c-d872-4d28-ba21-335d7268be8c/captures/2c4802f3-b514-4042-9a37-273cc9f00b03"
        }
      }
    } ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="checkout-callback"><a class="link" href="#checkout-callback">Callback for status updates</a></h3>
<div class="paragraph">
<p>If merchants/PSPs pass a callback URL <code>callbackUrlStatusUpdates</code> when creating checkouts, the giropay system sends an HTTP request to this URL when the status of the checkout changes.
Status updates are also sent for the embedded capture.
In case of <code>DIRECT_SALE</code> status updates are also sent for the embedded capture.
In case of connection errors or responses with an HTTP status code of 5xx, the giropay system will repeat the transmission of the status change up to 5 times within a time window of 24 hours.
Status changes are always transmitted in the order in which they occurred at the checkout.
If a status change cannot be transmitted, all subsequent status changes are also not transmitted until either the failed transmission could be made up for or all repeated attempts have failed.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>POST callbackUrlStatusUpdates</pre>
</div>
</div>
<div class="sect3">
<h4 id="_request_2"><a class="link" href="#_request_2">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkoutId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters for this checkout process. Assigned by the giropay system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantOrderReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.<br>
Maximum 20 characters. <a href="#sepa-characters">SEPA-compliant characters</a> only.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal, unique order number for this checkout process. Displayed to the customer in the transaction overview. Displayed to the merchant in the transaction overview. The order number is used in the debit note as <code>instructionId</code> and in the merchant&#8217;s and buyer&#8217;s payment reference.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkoutStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status of the checkout. One of <code>OPEN</code>, <code>APPROVED</code>, <code>REJECTED</code>, <code>CANCELED</code>, <code>CLOSED</code>, or <code>EXPIRED</code>.<br>
 <code>OPEN</code>: The checkout was newly created and not yet confirmed by the customer.<br>
 <code>APPROVED</code>: The checkout has been confirmed by the customer and approved by the system. In the case of an ORDER, <a href="#capture">captures</a> can now be created.<br>
 <code>REJECTED</code>: The checkout was rejected by the system. The payment was not successful. It is unlikely that the payment will succeed if tried again by this customer.<br>
 <code>CANCELED</code>: The checkout was canceled by the customer, or a technical error occurred. The checkout cannot be processed further.<br>
 <code>CLOSED</code>: Only <em>ORDER</em>: The order has been closed, it is not possible to create new captures. Refunds are still possible.<br>
 <code>EXPIRED</code>: The checkout has expired and cannot be used further. The customer has not confirmed the checkout within 30 minutes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>statusUpdateTimestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timestamp of the status update.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sequenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sequence number of the status update. Using the sequence number, a shop can track the order of status updates and identify missing status updates if any are present.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_example_2"><a class="link" href="#_example_2">Example</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /webhooktest/v1/checkout/status HTTP/1.1
Content-Type: application/json;charset=utf-8

{
  "checkoutId" : "0329371c-2c19-4281-a2b0-6d2ca602bf10",
  "checkoutStatus" : "APPROVED",
  "merchantOrderReferenceNumber" : "order-A12223412",
  "statusUpdateTimestamp" : "2020-01-01T12:00:00.000Z",
  "sequenceNumber" : 4
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_response_3"><a class="link" href="#_response_3">Response</a></h4>
<div class="paragraph">
<p>The response does not contain a body and is not processed further by the giropay system.
The HTTP status code should nevertheless allow conclusions to be drawn about the processing of the status notification for any service requests.</p>
</div>
<div class="sect4">
<h5 id="_example_3"><a class="link" href="#_example_3">Example</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="checkout-update-deliveryInformation"><a class="link" href="#checkout-update-deliveryInformation">Update the shipping conditions</a></h3>
<div class="literalblock">
<div class="content">
<pre>PUT /api/checkout/v1/checkouts/{checkoutId}/deliveryInformation</pre>
</div>
</div>
<div class="paragraph">
<p>The shipping conditions for an already-created checkout can be updated via this endpoint.
All fields indicated in the request are overwritten on the checkout resource.
The value in the resource remains unaffected for all fields not included in the request.
The current shipping conditions of the checkout are visible for the purchaser.
Updates are only permitted up to 25 days following the last capture on the checkout.</p>
</div>
<div class="sect3">
<h4 id="_request_3"><a class="link" href="#_request_3">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>expectedShippingDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Timestamp in <a href="https://www.w3.org/TR/NOTE-datetime" target="_blank" rel="noopener">ISO 8601</a> format.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expected shipping date.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logisticsProvider</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parcel service provider.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trackingNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shipment number.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_response_4"><a class="link" href="#_response_4">Response</a></h4>
<div class="paragraph">
<p>The updated checkout is returned in the response.
The structure is identical to the checkout endpoint <a href="#checkout-get">GET</a> call.</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_3"><a class="link" href="#_return_codes_3">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The checkout was found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHECKOUT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The checkout to be updated does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHECKOUT_UPDATE_TIMEFRAME_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The checkout can no longer be updated since more than 25 days have elapsed since the last capture.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_request"><a class="link" href="#_example_request">Example request</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">PUT /api/checkout/v1/checkouts/5976ab74-33e9-4c44-997e-2520910cffa1/deliveryInformation HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "expectedShippingDate" : "2016-10-19T12:00:00Z",
  "logisticsProvider" : "DHL",
  "trackingNumber" : "1234567890"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="checkout-update-invoiceReference"><a class="link" href="#checkout-update-invoiceReference">Update the invoice reference</a></h3>
<div class="literalblock">
<div class="content">
<pre>PUT /api/checkout/v1/checkouts/{checkoutId}/merchantInvoiceReferenceNumber</pre>
</div>
</div>
<div class="paragraph">
<p>The invoice reference of an already-created checkout can be updated via this endpoint.
The current invoice reference of the checkout is not visible for purchasers.
Updates are only permitted up to 25 days following the last capture on the checkout.</p>
</div>
<div class="sect3">
<h4 id="_request_4"><a class="link" href="#_request_4">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantInvoiceReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal, unique invoice number for this purchase or payment transaction. Displayed to the merchant in the transaction overview.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_response_5"><a class="link" href="#_response_5">Response</a></h4>
<div class="paragraph">
<p>The updated checkout is returned in the response.
The structure is identical to the checkout endpoint <a href="#checkout-get">GET</a> call.</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_4"><a class="link" href="#_return_codes_4">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The checkout was found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHECKOUT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The checkout to be updated does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHECKOUT_UPDATE_TIMEFRAME_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The checkout can no longer be updated since more than 25 days have elapsed since the last capture.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_request_2"><a class="link" href="#_example_request_2">Example request</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">PUT /api/checkout/v1/checkouts/d0b6f90d-b882-41d7-9692-0b3f2226914f/merchantInvoiceReferenceNumber HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "merchantInvoiceReferenceNumber" : "12345678"
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="capture"><a class="link" href="#capture">Capture</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using a capture, the purchaser’s account is debited by a given sum and the retailer is issued with a payment guarantee.</p>
</div>
<div class="paragraph">
<p>Each capture is authorized by the purchaser’s bank.
A successful bank authorization results in a payment guarantee for the sum requested and a corresponding post to the account.
Depending on the outcome, this results in a final status <code>SUCCESSFUL</code> or <code>REJECTED</code>.</p>
</div>
<div class="paragraph">
<p>The following types of captures exist:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">CAPTURE_DIRECT_SALE</dt>
<dd>
<p>This is created automatically if the purchaser confirms a checkout of the type <code>DIRECT_SALE</code> and if the authorization by the purchaser’s bank was successful.</p>
</dd>
<dt class="hdlist1">CAPTURE_ORDER</dt>
<dd>
<p>After successful creation of a checkout of the type <code>ORDER</code>, for up to a <strong>maximum of 182 days after creating the order</strong> the merchant can create one or more captures of the type <code>CAPTURE_ORDER</code>.
During this period, the <strong>number of captures is unlimited</strong>.
The maximum total of all captures is <strong>limited to the checkout amount (<code>totalAmount</code>)</strong>.
The last capture should be given a <strong>flag <code>finalCapture</code></strong>, in order to close the order for the customer.</p>
</dd>
<dt class="hdlist1">CAPTURE_ORDER_SECURED</dt>
<dd>
<p>For an <code>ORDER_SECURED</code> one or more captures can be triggered directly afterwards or later.
One or more captures can be initiated.
For a secured pre-order, a payment guarantee is issued to the merchant for the selected period (maximum 15 calendar days).
Captures (partial payments) within the guarantee period are always executed.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>An order of the type <code>ORDER</code> or <code>ORDER_SECURED</code> is displayed as open to the customer in the transaction overview until</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the full amount of the order was called up and the order is automatically closed as a result, or</p>
</li>
<li>
<p>a capture was marked using <code>finalCapture</code>, or</p>
</li>
<li>
<p>the order was explicitly closed, or</p>
</li>
<li>
<p>182 days have elapsed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the precise amount of the order sum is not determined when the order is created, the</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Overcapture functionality can be used (see relevant field description in <a href="#checkout-post">Create a checkout</a>), or</p>
</li>
<li>
<p>a corresponding shopping basket item can be used to increase the checkout amount, or</p>
</li>
<li>
<p>a higher checkout amount (<code>totalAmount</code>) can be indicated (without separate shopping basket item).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In any case, the merchant should point out this fact to the customer in the shop already.
The purchaser always authorizes the total checkout amount including a possible increase.</p>
</div>
<div class="sect2">
<h3 id="capture-post"><a class="link" href="#capture-post">Create a capture</a></h3>
<div class="literalblock">
<div class="content">
<pre>POST /api/checkout/v1/checkouts/{checkoutId}/captures</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The endpoint for creating a capture is included as a <code>captures</code> link in the <code>checkout</code> resource, where it relates to an <code>ORDER</code> and the creation of further captures is still possible.
It is recommended to always use the link from the <code>checkout</code> resource.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A new capture is triggered to call off an amount.
The capture is initially in status <code>PENDING</code> after being generated until a check has been performed by the purchaser’s bank, which generally takes less than one second.</p>
</div>
<div class="sect3">
<h4 id="_request_5"><a class="link" href="#_request_5">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>amount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
Between 0.01 and 50000.<br>
Maximum two decimal places.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The payment amount in the currency of the original order. The maximum amount possible is EUR 50000.00.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>finalCapture</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Flag must be set to <code>true</code> for the last <a href="#capture">Capture</a> of a <a href="#checkout">[checkout]</a> with activated <code>overcapture</code> flag.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the last amount was retrieved by this capture, especially if the amount of this payment is less than the total amount of the underlying order. The order is thus considered fully paid and is accordingly displayed to the customer as closed. Further captures are no longer possible for this order.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>note</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 37 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Free text field that appears on the bank statement in the payment reference.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantCaptureReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 30 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal reference number for this capture process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantReconciliationReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 30 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reconciliation number. This value will be inserted in the payment reference of the merchant payment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>captureInvoiceReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal unique invoice number for this capture process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>callbackUrlStatusUpdates</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 2000 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of an endpoint of the merchant that giropay is going to call in order to notify about status updates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains information about the delivery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation.expectedShippingDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Timestamp in <a href="https://www.w3.org/TR/NOTE-datetime" target="_blank" rel="noopener">ISO 8601</a> format.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expected shipping date.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation.logisticsProvider</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parcel service provider.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation.trackingNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shipment number.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_response_6"><a class="link" href="#_response_6">Response</a></h4>
<div class="paragraph">
<p>The created capture is returned in the response.
The structure is identical to the capture endpoint <a href="#capture-get">GET</a> call.</p>
</div>
<div class="paragraph">
<p>In the HTTP header field <code>Location</code>, the URL of the created capture resource, including the <code>transactionId</code>, is included.
The <code>transactionId</code> is similarly returned in the response body.</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_5"><a class="link" href="#_return_codes_5">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201 (Created)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The capture was created successfully.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400 (Bad Request)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VALIDATION_ERROR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request is syntactically invalid.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UNAUTHORIZED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access has been denied. Please contact giropay support.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHECKOUT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The checkout was not found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CAPTURE_AMOUNT_EXCEEDED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The total amount of all captures exceeds the total amount of the checkout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CAPTURE_CHECKOUT_WRONG_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">It is not possible to create a capture for this checkout type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CAPTURE_ORDER_CLOSED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">It is not possible to create a capture for a checkout that is already closed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CAPTURE_ORDER_NOT_APPROVED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">It is not possible to create a capture for an order that has not been confirmed by the buyer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CAPTURE_NOT_AUTHORIZED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The amount of the capture is not authorized by the buyer’s bank.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_BANKACCOUNT_LOCKED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Your merchant account is blocked.
Please contact giropay support.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHECKOUT_REJECTED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The checkout was rejected.
No capture can be created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCOUNT_DEBOARDED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">It is not possible to create a capture for a customer who is no longer participating in giropay.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_4"><a class="link" href="#_example_4">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/checkout/v1/checkouts/257c1e70-09ac-4217-b0d5-2611c39e9d9a/captures HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "amount" : 10,
  "finalCapture" : false,
  "note" : "Thanks for shopping.",
  "merchantCaptureReferenceNumber" : "capture-21323",
  "merchantReconciliationReferenceNumber" : "recon-1234",
  "captureInvoiceReferenceNumber" : "invoice-1234",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status",
  "deliveryInformation" : {
    "expectedShippingDate" : "2023-01-20T12:00:00.000Z",
    "logisticsProvider" : "DHL",
    "trackingNumber" : "1234567890"
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 201 Created
Location: https://api.paydirekt.de/api/checkout/v1/checkouts/257c1e70-09ac-4217-b0d5-2611c39e9d9a/captures/b201012a-e0de-4d86-85d9-69619c41d73a
Content-Type: application/hal+json;charset=utf-8

{
  "type" : "CAPTURE_ORDER",
  "transactionId" : "b201012a-e0de-4d86-85d9-69619c41d73a",
  "amount" : 10,
  "merchantReconciliationReferenceNumber" : "recon-1234",
  "finalCapture" : false,
  "merchantCaptureReferenceNumber" : "capture-21323",
  "captureInvoiceReferenceNumber" : "invoice-1234",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status",
  "deliveryInformation" : {
    "expectedShippingDate" : "2023-01-20T12:00:00.000Z",
    "logisticsProvider" : "DHL",
    "trackingNumber" : "1234567890"
  },
  "status" : "SUCCESSFUL",
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/257c1e70-09ac-4217-b0d5-2611c39e9d9a/captures/b201012a-e0de-4d86-85d9-69619c41d73a"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="capture-get"><a class="link" href="#capture-get">Read a capture</a></h3>
<div class="literalblock">
<div class="content">
<pre>GET /api/checkout/v1/checkouts/{checkoutId}/captures/{captureId}</pre>
</div>
</div>
<div class="paragraph">
<p>The request provides the data of a specific capture.
The capture transactions are embedded in the checkout resource.
An explicit query of a capture transaction is generally not necessary.</p>
</div>
<div class="sect3">
<h4 id="_response_7"><a class="link" href="#_response_7">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the capture transaction. Either <code>CAPTURE_DIRECT_SALE</code> or <code>CAPTURE_ORDER</code>. The value is automatically determined by the type of checkout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactionId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique transaction ID of this capture (UUID consisting of 36 characters). The value is assigned by the giropay system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>amount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The payment amount in the currency of the original order. The maximum amount possible is EUR 50000.00.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>finalCapture</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the last amount was retrieved by this capture, especially if the amount of this payment is less than the total amount of the underlying order. The order is thus considered fully paid and is accordingly displayed to the customer as closed. Further captures are no longer possible for this order.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantCaptureReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal reference number for this capture process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantReconciliationReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reconciliation number. This value will be inserted in the payment reference of the merchant payment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>captureInvoiceReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal unique invoice number for this capture process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>callbackUrlStatusUpdates</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the endpoint that should receive notifications about checkout status updates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>paymentInformationId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Does not exist until the transaction has been processed in the payment transaction.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An ID that belongs to this transaction. It is used to assign individual transactions to a collective entry.<br>
UUID consisting of 36 characters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the authorization by the bank is still pending (<code>PENDING</code>), was successful (<code>SUCCESSFUL</code>), or was rejected (<code>REJECTED</code>). In case of <code>SUCCESSFUL</code>, the payment guarantee is given for this transaction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains information about the delivery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation.expectedShippingDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expected shipping date.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation.logisticsProvider</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parcel service provider.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deliveryInformation.trackingNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shipment number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Links to resources and available actions.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_6"><a class="link" href="#_return_codes_6">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The capture was successfully sent.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHECKOUT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The checkout was not found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRANSACTION_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The transaction was not found.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_5"><a class="link" href="#_example_5">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/checkout/v1/checkouts/257c1e70-09ac-4217-b0d5-2611c39e9d9a/captures/b201012a-e0de-4d86-85d9-69619c41d73a HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "type" : "CAPTURE_ORDER",
  "transactionId" : "b201012a-e0de-4d86-85d9-69619c41d73a",
  "amount" : 10,
  "merchantReconciliationReferenceNumber" : "recon-1234",
  "finalCapture" : false,
  "merchantCaptureReferenceNumber" : "capture-21323",
  "captureInvoiceReferenceNumber" : "invoice-1234",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status",
  "deliveryInformation" : {
    "expectedShippingDate" : "2023-01-20T12:00:00.000Z",
    "logisticsProvider" : "DHL",
    "trackingNumber" : "1234567890"
  },
  "status" : "SUCCESSFUL",
  "paymentInformationId" : "0000000-1111-2222-3333-444444444444",
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/257c1e70-09ac-4217-b0d5-2611c39e9d9a/captures/b201012a-e0de-4d86-85d9-69619c41d73a"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="capture-callback"><a class="link" href="#capture-callback">Callback for status updates</a></h3>
<div class="paragraph">
<p>If merchants/PSPs pass a callback URL <code>callbackUrlStatusUpdates</code> when creating checkouts, the giropay system sends an HTTP request to this URL when the status of the checkout changes.
Status updates are also sent for the embedded capture.
In case of <code>DIRECT_SALE</code> status updates are also sent for the embedded capture.
In case of connection errors or responses with an HTTP status code of 5xx, the giropay system will repeat the transmission of the status change up to 5 times within a time window of 24 hours.
Status changes are always transmitted in the order in which they occurred at the checkout.
If a status change cannot be transmitted, all subsequent status changes are also not transmitted until either the failed transmission could be made up for or all repeated attempts have failed.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>POST callbackUrlStatusUpdates</pre>
</div>
</div>
<div class="sect3">
<h4 id="_request_6"><a class="link" href="#_request_6">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkoutId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters for this checkout process. Assigned by the giropay system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantOrderReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.<br>
Maximum 20 characters. <a href="#sepa-characters">SEPA-compliant characters</a> only.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal, unique order number for this checkout process. Displayed to the customer in the transaction overview. Displayed to the merchant in the transaction overview. The order number is used in the debit note as <code>instructionId</code> and in the merchant&#8217;s and buyer&#8217;s payment reference.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactionId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique transaction ID of this refund (UUID consisting of 36 characters). The value is assigned by the giropay system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantCaptureReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 30 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal reference number for this capture process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>captureStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the authorization by the bank is still pending (<code>PENDING</code>), was successful (<code>SUCCESSFUL</code>), or was rejected (<code>REJECTED</code>). In case of <code>SUCCESSFUL</code>, the payment guarantee is given for this transaction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>statusUpdateTimestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timestamp of the status update.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sequenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sequence number of the status update. Using the sequence number, a shop can track the order of status updates and identify missing status updates if any are present.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_example_6"><a class="link" href="#_example_6">Example</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /webhooktest/v1/capture/status HTTP/1.1
Content-Type: application/json;charset=utf-8

{
  "checkoutId" : "67b98987-41b6-41ff-80ab-34f16ee156fb",
  "merchantOrderReferenceNumber" : "order-A12223412",
  "transactionId" : "c15426e3-c9bc-4bf5-8481-0b9c79ed515b",
  "captureStatus" : "SUCCESSFUL",
  "merchantCaptureReferenceNumber" : "353c6f41-f1d8-42e8-9da4-f77720e26596",
  "statusUpdateTimestamp" : "2020-01-01T12:00:00.000Z",
  "sequenceNumber" : 2
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_response_8"><a class="link" href="#_response_8">Response</a></h4>
<div class="paragraph">
<p>The response does not contain a body and is not processed further by the giropay system.
The HTTP status code should nevertheless allow conclusions to be drawn about the processing of the status notification for any service requests.</p>
</div>
<div class="sect4">
<h5 id="_example_7"><a class="link" href="#_example_7">Example</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="order-close"><a class="link" href="#order-close">Close an order (secured)</a></h3>
<div class="literalblock">
<div class="content">
<pre>POST /api/checkout/v1/checkouts/{checkoutId}/close</pre>
</div>
</div>
<div class="paragraph">
<p>Orders of the type <code>ORDER</code> can and should be closed in the giropay system if no further <code>CAPTURE</code> is being carried out for the order.
With this, the order is no longer displayed to the customer as <em>open</em>.</p>
</div>
<div class="paragraph">
<p>Orders can only be closed if they have previously been confirmed by the customer via their account.</p>
</div>
<div class="sect3">
<h4 id="_request_7"><a class="link" href="#_request_7">Request</a></h4>
<div class="paragraph">
<p>The request does not require a request body.</p>
</div>
</div>
<div class="sect3">
<h4 id="_response_9"><a class="link" href="#_response_9">Response</a></h4>
<div class="paragraph">
<p>The created checkout is returned in the response.
The structure is identical to the checkout endpoint <a href="#checkout-get">GET</a> call of the checkout.</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_7"><a class="link" href="#_return_codes_7">Return Codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (OK)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The order was successfully closed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ORDER_NOT_APPROVED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The order has not been confirmed by the customer.
Unconfirmed orders cannot be closed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ORDER_ALREADY_CLOSED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The order is already closed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NOT_AN_ORDER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This checkout is not of the type <code>ORDER</code>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Refund"><a class="link" href="#Refund">Refund</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is possible to trigger refunds to the customer for their orders.</p>
</div>
<div class="paragraph">
<p>The creation of a refund always relates to an entire checkout and not to a specific capture.</p>
</div>
<div class="paragraph">
<p>A refund is only possible following successful direct sales and orders with at least one successful capture.
In this situation, a <code>refunds</code> link is present on the <a href="#checkout-get">checkout</a> resource.
The refund amount is limited to a maximum of 200% of the total of the payments made to date.</p>
</div>
<div class="paragraph">
<p>Refunds are possible with no restriction as to timing and number, provided that the maximum amount to be refunded is not exceeded.</p>
</div>
<div class="sect2">
<h3 id="refund-post"><a class="link" href="#refund-post">Create a refund</a></h3>
<div class="literalblock">
<div class="content">
<pre>POST /api/checkout/v1/checkouts/{checkoutId}/refunds</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The endpoint to create a refund is included as a <code>refunds</code> link in the <code>checkout</code> resource, where the checkout enables a refund.
The endpoint should not be called up directly.
The link from the <code>checkout</code> resource should always be used.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A refund to the customer is initiated by generating a refund resource.</p>
</div>
<div class="sect3">
<h4 id="_request_8"><a class="link" href="#_request_8">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>amount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
Between 0.01 and 100000.<br>
Maximum two decimal places.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The refund amount in the currency of the original order. The sum of refunds for an order is limited by the percentage value of the total value of the order given in the <code>refundLimit</code> field.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>note</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 37 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Free text field that appears on the bank statement in the payment reference (<code>DIRECT_SALE</code> only).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reason</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reason for the refund<br>
 <code>MERCHANT_TECHNICAL_PROBLEM</code>: Technical problem during processing.<br>
 <code>MERCHANT_CAN_NOT_DELIVER_GOODS</code>: Merchant cannot deliver the goods.<br>
 <code>REFUND_OBLIGINGNESS</code>: Refund as a gesture of goodwill.<br>
 <code>CUSTOMER_RETURN_GOODS</code>: Refund due to return of goods.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantRefundReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 30 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal reference number for this refund process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantReconciliationReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 30 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reconciliation number. This value will be inserted in the payment reference of the merchant payment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>callbackUrlStatusUpdates</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 2000 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the endpoint that should receive notifications about checkout status updates.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_response_10"><a class="link" href="#_response_10">Response</a></h4>
<div class="paragraph">
<p>The data of the created refund is returned in the response.
The structure is identical to the refund endpoint <a href="#refund-get">GET</a> call.</p>
</div>
<div class="paragraph">
<p>In the HTTP header field <code>Location</code>, the URL of the created refund resource, including <code>transactionId</code>, is included.
The <code>transactionId</code> is similarly returned in the response body.</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_8"><a class="link" href="#_return_codes_8">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201 (Refund created)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The refund was successfully created.
It has the status <code>PENDING</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400 (Bad Request)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VALIDATION_ERROR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request is syntactically invalid.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UNAUTHORIZED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access has been denied.
Please contact giropay support.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHECKOUT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The checkout was not found, or you do not have access to this checkout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REFUND_AMOUNT_EXCEEDED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The total amount of all refunds exceeds the maximum possible refund amount.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>USER_DEBOARDED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The buyer’s account was closed permanently.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_8"><a class="link" href="#_example_8">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/checkout/v1/checkouts/c0db9e7f-63fd-43f8-9362-80c3d04441e2/refunds HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "amount" : 10,
  "note" : "Your order from 15.01.2023",
  "merchantRefundReferenceNumber" : "refund-99989",
  "merchantReconciliationReferenceNumber" : "recon-1234",
  "reason" : "MERCHANT_CAN_NOT_DELIVER_GOODS",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 201 Created
Location: https://api.paydirekt.de/api/checkout/v1/checkouts/c0db9e7f-63fd-43f8-9362-80c3d04441e2/refunds/1c04de73-d7e3-4f4c-82b9-0fbb8aa08154
Content-Type: application/hal+json;charset=utf-8

{
  "type" : "REFUND",
  "transactionId" : "1c04de73-d7e3-4f4c-82b9-0fbb8aa08154",
  "amount" : 10,
  "merchantReconciliationReferenceNumber" : "recon-1234",
  "note" : "Your order from 15.01.2023",
  "merchantRefundReferenceNumber" : "refund-99989",
  "status" : "PENDING",
  "reason" : "MERCHANT_CAN_NOT_DELIVER_GOODS",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status",
  "merchantRefundSettled" : false,
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/c0db9e7f-63fd-43f8-9362-80c3d04441e2/refunds/1c04de73-d7e3-4f4c-82b9-0fbb8aa08154"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="refund-get"><a class="link" href="#refund-get">Read a refund</a></h3>
<div class="literalblock">
<div class="content">
<pre>GET /api/checkout/v1/checkouts/{checkoutId}/refunds/{refundId}</pre>
</div>
</div>
<div class="paragraph">
<p>Provides the data on a refund.
After a refund is initiated, the refund is in the status <code>PENDING</code> for at least one day.
It is recommended to read the status once or twice per day until a final status (<code>SUCCESS</code> or <code>FAILED</code>) is reached.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The refund transactions are embedded in the checkout resource.
Refund information can therefore also be read via the associated checkout.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_response_11"><a class="link" href="#_response_11">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the transaction. Here always <code>REFUND</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactionId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique transaction ID of this refund (UUID consisting of 36 characters). The value is assigned by the giropay system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>amount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The refund amount in the currency of the original order. The sum of refunds for an order is limited by the percentage value of the total value of the order given in the <code>refundLimit</code> field.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>note</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Free text field that appears on the bank statement in the payment reference (<code>DIRECT_SALE</code> only).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reason</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reason for the refund<br>
 <code>MERCHANT_TECHNICAL_PROBLEM</code>: Technical problem during processing.<br>
 <code>MERCHANT_CAN_NOT_DELIVER_GOODS</code>: Merchant cannot deliver the goods.<br>
 <code>REFUND_OBLIGINGNESS</code>: Refund as a gesture of goodwill.<br>
 <code>CUSTOMER_RETURN_GOODS</code>: Refund due to return of goods.<br>
 <code>TECHNICAL_PROBLEM</code>: Technical problem during processing/refund.<br>
 <code>MERCHANT_CAN_NOT_PROOF_SHIPMENT</code>: Merchant cannot provide proof of the shipment via dispatch note (Dispute).<br>
 <code>REFUND_ON_BEHALF_OF_MERCHANT</code>: Refund on behalf of the merchant.<br>
 <code>REFUND_NOT_ON_BEHALF_OF_MERCHANT</code>: Refund not on behalf of the merchant.<br>
 <code>REFUND_MERCHANT_FRAUD</code>: Refund due to fraud.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantRefundReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal reference number for this refund process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantReconciliationReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reconciliation number. This value will be inserted in the payment reference of the merchant payment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>paymentInformationId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Does not exist until the transaction has been processed in the payment transaction.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An ID that belongs to the transaction. It is used to assign individual transactions to a collective entry.<br>
 UUID consisting of 36 characters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>callbackUrlStatusUpdates</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if provided at time of creation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the endpoint that should receive notifications about checkout status updates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status of the refund<br>
 <code>PENDING</code>: Initial status. The refund is processed in the payment transaction.<br>
 <code>ERROR</code>: The repayment process is temporarily interrupted for technical reasons.<br>
 <code>SUCCESSFUL</code>: The refund was successful. The amount has already been transferred to the buyer&#8217;s account or is being processed by the buyer&#8217;s bank.<br>
 <code>FAILED</code>: It was definitely not possible to process the refund in the payment transaction, and it must be re-initiated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Links to resources and available actions.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_9"><a class="link" href="#_return_codes_9">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request was processed correctly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHECKOUT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The checkout was not found, or access to this checkout is not possible.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRANSACTION_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No refund with the provided <code>refundId</code> was found.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_9"><a class="link" href="#_example_9">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/checkout/v1/checkouts/c0db9e7f-63fd-43f8-9362-80c3d04441e2/refunds/1c04de73-d7e3-4f4c-82b9-0fbb8aa08154 HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "type" : "REFUND",
  "transactionId" : "1c04de73-d7e3-4f4c-82b9-0fbb8aa08154",
  "amount" : 10,
  "merchantReconciliationReferenceNumber" : "recon-1234",
  "note" : "Your order from 15.01.2023",
  "merchantRefundReferenceNumber" : "refund-99989",
  "status" : "PENDING",
  "reason" : "MERCHANT_CAN_NOT_DELIVER_GOODS",
  "callbackUrlStatusUpdates" : "https://toy-car-delivery.com/callback/status",
  "merchantRefundSettled" : false,
  "paymentInformationId" : "0000000-1111-2222-3333-444444444444",
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/c0db9e7f-63fd-43f8-9362-80c3d04441e2/refunds/1c04de73-d7e3-4f4c-82b9-0fbb8aa08154"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="refund-buyer-account-information-eps"><a class="link" href="#refund-buyer-account-information-eps">Read buyer account information for eps refunds</a></h3>
<div class="literalblock">
<div class="content">
<pre>GET /api/checkout/v1/checkouts/{checkoutId}/buyeraccount</pre>
</div>
</div>
<div class="paragraph">
<p>Can be used to request buyer account information for eps related refund processes.
The checkout must be approved, in order for the link to be part of the response.</p>
</div>
<div class="sect3">
<h4 id="_response_12"><a class="link" href="#_response_12">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>iban</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initially absent, but then always present, once the checkout&#8217;s payment has been processed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The iban of the buyer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initially absent, but then always present, once the checkout&#8217;s payment has been processed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The bic of the buyer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>owner</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initially absent. Optionally present after the checkout&#8217;s payment has been processed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the buyer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if the checkout is approved.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the bank account information of the buyer for a refund. This link is only available if the checkout has been approved by the buyer.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_10"><a class="link" href="#_return_codes_10">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request was processed correctly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHECKOUT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The checkout was not found, or access to this checkout is not possible.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHECKOUT_NOT_APPROVED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The checkout has not been approved yet.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_10"><a class="link" href="#_example_10">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/checkout/v1/checkouts/908cb4c0-535a-4502-bd7a-1f4a45f54024/buyeraccount HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "iban" : "buyerIban",
  "bic" : "buyerBic",
  "owner" : "buyerName",
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/checkout/v1/checkouts/908cb4c0-535a-4502-bd7a-1f4a45f54024/buyeraccount"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="refund-callback"><a class="link" href="#refund-callback">Callback for status updates</a></h3>
<div class="paragraph">
<p>Merchants/PSPs can transfer a callback URL callbackUrlStatusUpdates when creating a refund.
The giropay system sends an HTTP request to that URL in the event of refund status changes.
In the case of connection errors or responses with an HTTP status code 5xx, the giropay system will repeat the transmission of the status change up to 5 times in a time window of 20 minutes.
If a status change cannot be transmitted, all subsequent status changes are also not transmitted until either the failed transmission could be made up for or all repeated attempts have failed.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>POST callbackUrlStatusUpdates</pre>
</div>
</div>
<div class="sect3">
<h4 id="_request_9"><a class="link" href="#_request_9">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkoutId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters for this checkout process. Assigned by the giropay system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactionId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique transaction ID of this refund (UUID consisting of 36 characters). The value is assigned by the giropay system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantRefundReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 30 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal reference number for this refund process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantReconciliationReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 30 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reconciliation number. This value will be inserted in the payment reference of the merchant payment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>refundStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status of the refund<br>
 <code>PENDING</code>: Initial status. The refund is processed in the payment transaction.<br>
 <code>ERROR</code>: The repayment process is temporarily interrupted for technical reasons.<br>
 <code>SUCCESSFUL</code>: The refund was successful. The amount has already been transferred to the buyer&#8217;s account or is being processed by the buyer&#8217;s bank.<br>
 <code>FAILED</code>: It was definitely not possible to process the refund in the payment transaction, and it must be re-initiated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>statusUpdateTimestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timestamp of the status update.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sequenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sequence number of the status update. Using the sequence number, a shop can track the order of status updates and identify missing status updates if any are present.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_example_11"><a class="link" href="#_example_11">Example</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /webhooktest/v1/refund/status HTTP/1.1
Content-Type: application/json;charset=utf-8

{
  "checkoutId" : "193acdef-c348-4c42-bb84-11a34f93af35",
  "transactionId" : "6e2dd619-39d0-4bd8-91ae-202080a3dcae",
  "merchantRefundReferenceNumber" : "refund-12345",
  "merchantReconciliationReferenceNumber" : "reconciliation-12345",
  "refundStatus" : "SUCCESSFUL",
  "statusUpdateTimestamp" : "2020-01-01T12:00:00.000Z",
  "sequenceNumber" : 2
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_response_13"><a class="link" href="#_response_13">Response</a></h4>
<div class="paragraph">
<p>The response does not contain a body and is not processed further by the giropay system.
The HTTP status code should nevertheless allow conclusions to be drawn about the processing of the status notification for any service requests.</p>
</div>
<div class="sect4">
<h5 id="_example_12"><a class="link" href="#_example_12">Example</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reports"><a class="link" href="#reports">Reports</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Merchants, technical PSPs, and giropay PSPs can retrieve reports about the transactions performed by the shops or merchants assigned to them.
Technical PSPs can retrieve all their reports or only the reports for a specific shop by providing the shop’s <code>X-Auth-Code</code> and <code>X-Auth-Key</code> when obtaining the <a href="#additional-header-fields-for-merchant-technical-psp">access token</a>.</p>
</div>
<div class="paragraph">
<p>The query can be restricted by optional <code>from</code> and <code>to</code> parameters that specify the time frame of the report.
If omitted, <code>to</code> will be set to the current time; <code>from</code> will be set to 30 days before <code>to</code> if not specified.</p>
</div>
<div class="paragraph">
<p>The report can cover a maximum of 180 days or 100000 transactions.
If one of the two values is exceeded, an error is returned.
In this occurs, a smaller time frame must be selected.</p>
</div>
<div class="paragraph">
<p>The format of the report is specified by providing the Accept header.
Valid values are <code>application/json</code> and <code>text/csv</code>.</p>
</div>
<div class="sect2">
<h3 id="reports-read-transactions-v1"><a class="link" href="#reports-read-transactions-v1">Read transactions (V1)</a></h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This endpoint will be deprecated and no longer operated by the end of 2023. Please consider using <a href="#reports-read-transactions-v2">Read transactions (V2)</a>
</td>
</tr>
</table>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /api/reporting/v1/reports/transactions</pre>
</div>
</div>
<div class="sect3">
<h4 id="_request_10"><a class="link" href="#_request_10">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 25%;">
<col style="width: 55%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Constraints</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>from</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timestamp in <a href="https://www.w3.org/TR/NOTE-datetime" target="_blank" rel="noopener">ISO 8601</a> format starting from which transactions are taken into account. If not specified, 30 days since the <code>to</code> timestamp are queried, i.e., the <code>from</code> timestamp is implicitly set to the <code>to</code> timestamp minus 30 days.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>to</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timestamp in <a href="https://www.w3.org/TR/NOTE-datetime" target="_blank" rel="noopener">ISO 8601</a> format until which transactions are taken into account. If not specified, queried up to the current time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fields</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Possible field identifiers are case-sensitive and enumerated under <a href="#reports-transaction-v1">transactions (v1)</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of field identifiers for <a href="#reports-transaction-v1">transactions (v1)</a>. For the transaction report in CSV format, <code>fields</code> determines the columns included and their order. For the transaction report in JSON format, <code>fields</code> determines the included fields. If <code>fields</code> is not specified, the transaction report will contain all possible fields as enumerated in <a href="#reports-transaction-v1">transactions (v1)</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_response_14"><a class="link" href="#_response_14">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present. Can be an empty list.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of <a href="#reports-transaction-v1">transactions (v1)</a> that represent the requested report.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="reports-transaction-v1"><a class="link" href="#reports-transaction-v1">Transaction (V1)</a></h4>
<div class="paragraph">
<p>Each reporting record represents one transaction.
The records are sorted in ascending order by <code>transactionDate</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>correlationId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The transaction number of the checkout to enable a unique assignment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>endToEndReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 32 characters plus prefix <code>PD</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End-to-end checkout reference number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactionTypeId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code> (Direct Sale),<br>
<code>2</code> (Refund),<br>
<code>3</code> (Order),<br>
<code>4</code> (Rejected capture),<br>
<code>5</code> (Successful capture of an order),<br>
<code>6</code> (Canceled order),<br>
<code>7</code> (Successful overcapture),<br>
<code>8</code> (Secured order),<br>
<code>11</code> (Capture of a secured order)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code of the transaction type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactionDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timestamp in <a href="https://www.w3.org/TR/NOTE-datetime" target="_blank" rel="noopener">ISO 8601</a> format.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time of the transaction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>valueDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date in <a href="https://www.w3.org/TR/NOTE-datetime" target="_blank" rel="noopener">ISO 8601</a> format.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value date of the transaction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>acquirerId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the acquirer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>acquirerName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the acquirer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>agreementSetId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the acquirer agreement set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pspId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the psp.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pspName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the psp.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>contractId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the merchant contract.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantReference</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 20 characters.
Only SEPA compliant characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal, unique order number for this checkout transaction.
Corresponds to the <code>merchantOrderReferenceNumber</code> passed when creating the checkout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantIbanRecipientName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the owner of the merchant’s bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantIban</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 34 characters, usually 22.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IBAN of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantBic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIC in ISO 9362 format. Either 8 or 11 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIC of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkoutId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the checkout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkoutInvoiceNr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 20 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>merchantInvoiceReferenceNumber</code> passed by the PSP when creating the checkout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantTransactionReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal, unique order number for this capture or refund transaction.
Corresponds to the <code>merchantCaptureReferenceNumber</code> or the <code>merchantRefundReferenceNumber</code> passed at creation, depending on the transaction type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantBankId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the merchant’s bank.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buyerBankId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the buyer’s bank.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buyerBankName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Short name of the buyer’s bank.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactionAmount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Between 0.01 and 50000.<br>
Maximum two decimal points.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The amount of the transaction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactionCurrency</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Currently, always <code>EUR</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Currency of the transaction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantAgentId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the merchant concentrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantAgentName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the merchant concentrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>concentratorId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the buyer’s concentrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>concentratorName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the buyer’s concentrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shopId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shopName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ageVerificationStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code> (not checked),<br>
<code>1</code> (passed),<br>
<code>2</code> (not passed)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result of the age verification.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MCC</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Four-digit number.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MCC (Merchant Category Code) of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DBI</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Four-digit number.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DBI (Details Business Indicator) of the merchant. The field is currently always empty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>paydirektExpress</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>y</code> (express)<br>
<code>n</code> (non-express)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the checkout is an express checkout or not.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>paymentInformationId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the SEPA transaction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>refundReason</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_TECHNICAL_PROBLEM</code>: Technical problem during processing.<br>
<code>MERCHANT_CAN_NOT_DELIVER_GOODS</code>: Merchant cannot deliver the goods.<br>
<code>REFUND_OBLIGINGNESS</code>: Refund as a gesture of goodwill.<br>
<code>TECHNICAL_PROBLEM</code>: Technical problem during processing/refund.<br>
<code>MERCHANT_CAN_NOT_PROOF_SHIPMENT</code>: Merchant cannot provide proof of shipment via dispatch note (Dispute).<br>
<code>REFUND_ON_BEHALF_OF_MERCHANT</code>: Refund on behalf of the merchant.<br>
<code>REFUND_NOT_ON_BEHALF_OF_MERCHANT</code>: Refund not on behalf of the merchant.<br>
<code>REFUND_MERCHANT_FRAUD</code>: Refund due to fraud.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>reason</code> provided on refund creation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>captureInvoiceNr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 20 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>captureInvoiceReferenceNumber</code> provided by the PSP when creating the capture.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validityDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date in <a href="https://www.w3.org/TR/NOTE-datetime" target="_blank" rel="noopener">ISO 8601</a> format.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warranty period for secured orders (ORDER_SECURED). Captures within this period are guaranteed for the merchant.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_11"><a class="link" href="#_return_codes_11">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request was processed correctly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You do not have access to this resource.
The authentication may be missing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INVALID_FIELD_NAME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">At least one of the field names provided via <code>fields</code> could not be assigned to a transaction field.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REPORT_RANGE_TOO_LARGE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The report either exceeded the 180 days limit or contained more than 100000 elements.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_13"><a class="link" href="#_example_13">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/reporting/v1/reports/transactions?from=2023-02-24T11:12:13.140Z&amp;to=2023-03-06T11:12:13.140Z&amp;fields= HTTP/1.1
Content-Type: application/json;charset=utf-8
Accept: application/json
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/json;charset=utf-8

{
  "transactions" : [ {
    "correlationId" : "a357f616-0aa7-4c1f-940a-6cf1660fe1d7",
    "endToEndReferenceNumber" : "8bc6c23b-4ed3-455f-bad1-c994474f76d3",
    "transactionTypeId" : "1",
    "transactionDate" : "2023-03-01T11:12:13.140Z",
    "valueDate" : "2023-03-01",
    "acquirerId" : "8c2b97b3-c604-4084-bc7f-3966a0e20eb4",
    "acquirerName" : "acquirer name",
    "agreementSetId" : "7c2bcaa8-5005-457e-a617-f51dde04b17a",
    "pspId" : "8c2b97b3-c604-4084-bc7f-3966a0e20eb4",
    "pspName" : "merchantPspIntermediaryName",
    "merchantId" : "bdb691c6-5a78-4293-b384-96ec2f498c7d",
    "merchantName" : "Some merchant name",
    "merchantReference" : "ab6407d2-1a2b-426b-9a78-6cb99616af7f",
    "merchantIbanRecipientName" : "merchantIbanRecipientName",
    "merchantIban" : "merchantIban",
    "merchantBic" : "merchantBic",
    "checkoutId" : "cbb9d016-4273-499c-80cd-e18c5ef9a73d",
    "checkoutInvoiceNr" : "7b57d703-dc42-448d-849a-b296872c3a1d",
    "merchantBankId" : "5f1c6b61-5e36-4f67-87f7-f4e97901d209",
    "transactionAmount" : "1.00",
    "transactionCurrency" : "transactionCurrency",
    "shopId" : "5e5671b3-9809-4e62-81ab-3e7893338f13",
    "shopName" : "some shop name",
    "ageVerificationStatus" : "1",
    "MCC" : "742",
    "paydirektExpress" : "n",
    "paymentInformationId" : "8dc53848-49b7-4959-9ade-77c0fdba6ad1",
    "refundReason" : "TECHNICAL_PROBLEM",
    "captureInvoiceNr" : "462b6c9c-40a7-4919-9017-7c9014def575",
    "validityDate" : "2024-01-17"
  } ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="reports-read-transactions-v2"><a class="link" href="#reports-read-transactions-v2">Read transactions (V2)</a></h3>
<div class="literalblock">
<div class="content">
<pre>GET /api/reporting/v2/reports/transactions</pre>
</div>
</div>
<div class="sect3">
<h4 id="_request_11"><a class="link" href="#_request_11">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 25%;">
<col style="width: 55%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Constraints</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>from</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timestamp in <a href="https://www.w3.org/TR/NOTE-datetime" target="_blank" rel="noopener">ISO 8601</a> format starting from which transactions are taken into account. If not specified, 30 days since the <code>to</code> timestamp are queried, i.e., the <code>from</code> timestamp is implicitly set to the <code>to</code> timestamp minus 30 days.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>to</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timestamp in <a href="https://www.w3.org/TR/NOTE-datetime" target="_blank" rel="noopener">ISO 8601</a> format until which transactions are taken into account. If not specified, queried up to the current time.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_response_15"><a class="link" href="#_response_15">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present. Can be an empty list.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of <a href="#reports-transaction-v2">transactions (v2)</a> that represent the requested report.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="reports-transaction-v2"><a class="link" href="#reports-transaction-v2">Transaction (V2)</a></h4>
<div class="paragraph">
<p>Each reporting record represents one transaction.
The records are sorted in ascending order by <code>transactionDate</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The fields <code>transactionFeeNet</code>, <code>fromThatTransactionFeeFixNet</code>, <code>fromThatTransactionOperatorFeePercentageNet</code>, and <code>fromThatTransactionGuaranteeFeePercentageNet</code> are only available from the first day of the following month onwards.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>correlationId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The transaction number of the checkout to enable a unique assignment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>endToEndReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 32 characters plus prefix <code>PD</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End-to-end checkout reference number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactionTypeId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code> (Direct Sale),<br>
<code>2</code> (Refund),<br>
<code>3</code> (Order),<br>
<code>4</code> (Rejected capture),<br>
<code>5</code> (Successful capture of an order),<br>
<code>6</code> (Canceled order),<br>
<code>7</code> (Successful overcapture),<br>
<code>8</code> (Secured order),<br>
<code>11</code> (Capture of a secured order)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code of the transaction type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactionDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timestamp in <a href="https://www.w3.org/TR/NOTE-datetime" target="_blank" rel="noopener">ISO 8601</a> format.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time of the transaction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>valueDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date in <a href="https://www.w3.org/TR/NOTE-datetime" target="_blank" rel="noopener">ISO 8601</a> format.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value date of the transaction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactionAmount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Between 0.01 and 50000.<br>
Maximum two decimal points.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The amount of the transaction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactionCurrency</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Currently, always <code>EUR</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Currency of the transaction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>paymentInformationId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the SEPA transaction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkoutId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the checkout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantCustomerNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 50 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal customer number of the buyer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantOrderReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 20 characters. <a href="#sepa-characters">SEPA-compliant characters</a> only.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal, unique order number for this checkout process. Displayed to the customer in the transaction overview.
  Displayed to the merchant in the transaction overview. The order number is used in the debit note as <code>instructionId</code> and in the merchant’s and buyer’s payment reference.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantReconciliationReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 30 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reconciliation number. This value will be inserted in the payment reference of the merchant payment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantInvoiceReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal, unique invoice number for this purchase or payment transaction. Displayed to the merchant in the transaction overview.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantCaptureReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 30 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal reference number for this capture process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>captureInvoiceReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal unique invoice number for this capture process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantRefundReferenceNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 30 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant-internal reference number for this refund process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>refundReason</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_TECHNICAL_PROBLEM</code>: Technical problem during processing.<br>
<code>MERCHANT_CAN_NOT_DELIVER_GOODS</code>: Merchant cannot deliver the goods.<br>
<code>REFUND_OBLIGINGNESS</code>: Refund as a gesture of goodwill.<br>
<code>TECHNICAL_PROBLEM</code>: Technical problem during processing/refund.<br>
<code>MERCHANT_CAN_NOT_PROOF_SHIPMENT</code>: Merchant cannot provide proof of shipment via dispatch note (Dispute).<br>
<code>REFUND_ON_BEHALF_OF_MERCHANT</code>: Refund on behalf of the merchant.<br>
<code>REFUND_NOT_ON_BEHALF_OF_MERCHANT</code>: Refund not on behalf of the merchant.<br>
<code>REFUND_MERCHANT_FRAUD</code>: Refund due to fraud.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>reason</code> provided on refund creation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validityDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date in <a href="https://www.w3.org/TR/NOTE-datetime" target="_blank" rel="noopener">ISO 8601</a> format.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warranty period for secured orders (<code>ORDER_SECURED</code>). Captures within this period are guaranteed for the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ageVerificationStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code> (not checked),<br>
<code>1</code> (passed),<br>
<code>2</code> (not passed)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result of the age verification.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactionFeeNet</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 6 decimal places.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Net amount of the fee for the transaction (fees for the operator and variable fee for the payment guarantee).<br>
Only available from the first day of the following month onwards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fromThatTransactionFeeFixNet</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 6 decimal places.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed portion of the net amount transaction fee for the operator.<br>
Only available from the first day of the following month onwards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fromThatTransactionOperatorFeePercentageNet</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 6 decimal places.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable portion of the net amount transaction fee for the operator.<br>
Only available from the first day of the following month onwards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fromThatTransactionGuaranteeFeePercentageNet</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 6 decimal places.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable portion of the net amount transaction fee for the payment guarantee.<br>
Only available from the first day of the following month onwards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shopId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shopName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shopIban</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 34 characters, usually 22.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IBAN of the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shopBic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIC in ISO 9362 format. Either 8 or 11 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIC of the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shopIbanRecipientName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the owner of the shop’s bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectingEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Either <code>true</code>, <code>false</code>, or <code>null</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determines if the merchant or the psp is collecting:<br>
 <code>true</code> for collecting merchant,<br>
 <code>false</code> for collecting psp,<br>
 <code>null</code> for non-giropay merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantIban</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 34 characters, usually 22.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IBAN of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantCountry</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exactly 2 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The country code in <a href="https://www.iban.com/country-codes" target="_blank" rel="noopener">alpha-2</a> format.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MCC</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Four-digit number.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>M</strong>erchant <strong>C</strong>ategory <strong>C</strong>ode of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pspId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the psp.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pspName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the psp.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>acquirerId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the acquirer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>acquirerName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the acquirer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>agreementSetId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID of the acquirer agreement set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>agreementSetName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the acquirer agreement set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scheme</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Either <code>EPS</code> or not present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether a transaction is an EPS transaction.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_12"><a class="link" href="#_return_codes_12">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request was processed correctly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You do not have access to this resource.
The authentication may be missing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REPORT_RANGE_TOO_LARGE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The report either exceeded the 180 days limit or contained more than 100000 elements.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_14"><a class="link" href="#_example_14">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/reporting/v2/reports/transactions?from=2023-02-24T11:12:13.140Z&amp;to=2023-03-06T11:12:13.140Z HTTP/1.1
Content-Type: application/json;charset=utf-8
Accept: application/json
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/json;charset=utf-8

{
  "transactions" : [ {
    "correlationId" : "2d67720b-61cd-46df-938c-8aca7eb56a1b",
    "endToEndReferenceNumber" : "eb88cd0c-4c28-4666-bd98-b2f8619d01f5",
    "transactionTypeId" : "1",
    "transactionDate" : "2023-03-01T11:12:13.140Z",
    "valueDate" : "2023-03-01",
    "transactionAmount" : "1",
    "transactionCurrency" : "transactionCurrency",
    "paymentInformationId" : "c91cc3c7-bfeb-4236-8fed-ef4653b1b2f0",
    "checkoutId" : "dd0bf397-115d-4173-ad13-3b51ce556890",
    "merchantCustomerNumber" : "13125619-d0ef-4337-ac53-04296d8d5684",
    "merchantOrderReferenceNumber" : "fd349016-f5f0-495c-ba2d-92b76957d86f",
    "merchantReconciliationReferenceNumber" : "451aeb8c-f042-47a8-af29-d2ca22621f9d",
    "merchantInvoiceReferenceNumber" : "af73aba7-a0c6-4d2f-8ea6-66b923a6a330",
    "merchantCaptureReferenceNumber" : "9ba6cf0a-8b77-4bbc-ac7a-97ddd4d4da34",
    "captureInvoiceReferenceNumber" : "e9963edf-54a4-4b3f-b907-2b251e8caa64",
    "merchantRefundReferenceNumber" : "d6b49a31-d189-4ac6-bd9e-16cb1141cfce",
    "refundReason" : "TECHNICAL_PROBLEM",
    "validityDate" : "2024-01-17",
    "ageVerificationStatus" : "1",
    "transactionFeeNet" : "0.5",
    "fromThatTransactionFeeFixNet" : "0.2",
    "fromThatTransactionOperatorFeePercentageNet" : "0.1",
    "fromThatTransactionGuaranteeFeePercentageNet" : "0.2",
    "shopId" : "8d820037-e3b6-4520-88d3-729153b78930",
    "shopName" : "some shop name",
    "shopBic" : "merchantBic",
    "shopIbanRecipientName" : "merchantIbanRecipientName",
    "merchantId" : "f010e043-ed87-40f6-adff-d9a641e97817",
    "merchantName" : "Some merchant name",
    "merchantIban" : "merchantIban",
    "MCC" : "742",
    "pspId" : "15417e85-1290-4609-be00-f5e916b73c10",
    "pspName" : "merchantPspIntermediaryName",
    "acquirerId" : "15417e85-1290-4609-be00-f5e916b73c10",
    "acquirerName" : "some acquirer name",
    "scheme" : "EPS",
    "acquirerAgreementSetId" : "76a903fe-fe29-4227-85f5-c3f22850457f",
    "acquirerAgreementSetName" : "some acquirer agreement set name"
  } ]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_common_data_types"><a class="link" href="#_common_data_types">Common data types</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Besides the standard JSON data types, there are complex data types that are needed for a correct request.</p>
</div>
<div class="sect2">
<h3 id="ShippingAddress"><a class="link" href="#ShippingAddress">ShippingAddress</a></h3>
<div class="paragraph">
<p>Data type for shipping and billing addresses.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 15%;">
<col style="width: 35%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addresseeGivenName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional for shopping carts categorized as <code>AUTHORITIES_PAYMENT</code> or <code>ANONYMOUS_DONATION</code>. Mandatory otherwise.<br>
Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">First name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addresseeLastName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional for shopping carts categorized as <code>AUTHORITIES_PAYMENT</code> or <code>ANONYMOUS_DONATION</code>. Mandatory otherwise.<br>
Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>company</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Company name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>additionalAddressInformation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional address information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>street</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the street, without building number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streetNr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 10 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The building number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zip</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional for shopping carts categorized as <code>DIGITAL</code>, <code>AUTHORITIES_PAYMENT</code>, or <code>ANONYMOUS_DONATION</code>. Mandatory otherwise.<br>
Maximum 10 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The postal code.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>city</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional for shopping carts categorized as <code>DIGITAL</code>, <code>AUTHORITIES_PAYMENT</code>, or <code>ANONYMOUS_DONATION</code>. Mandatory otherwise.<br>
Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The town or city.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>countryCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional for shopping carts categorized as <code>DIGITAL</code>, <code>AUTHORITIES_PAYMENT</code>, or <code>ANONYMOUS_DONATION</code>. Mandatory otherwise.<br>
2 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The country code in ISO 3166-1 format.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>state</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">State or province. Can be used for addresses outside Germany, for example.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>emailAddress</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory for shopping carts categorized as <code>DIGITAL</code>. Optional otherwise.<br>
Must be a valid email address.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The email address of the buyer.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">{
  "addresseeGivenName" : "Patrick",
  "addresseeLastName" : "Schmitt",
  "street" : "Beethovenstr.",
  "streetNr" : "1",
  "zip" : "12345",
  "city" : "Berlin",
  "countryCode" : "DE",
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_example_of_an_international_address_with_state"><a class="link" href="#_example_of_an_international_address_with_state">Example of an international address with state</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">{
  "addresseeGivenName" : "John",
  "addresseeLastName" : "Smith",
  "street" : "Main St",
  "streetNr" : "799 E",
  "zip" : "85705",
  "city" : "Tucson",
  "countryCode" : "US",
  "state" : " AZ
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Item"><a class="link" href="#Item">Item</a></h3>
<div class="paragraph">
<p>An <em>item</em> is a shopping cart item.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 55%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>quantity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
Integer.<br>
Minimum 1.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of this kind of item within cart.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the item.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The International Article Number (EAN or GTIN) of the item.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>price</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
Positive or negative.<br>
Maximum 2 decimal places.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The unit price of an item, including taxes.
In the case of credit notes (e.g., in the form of vouchers or coupons), the amount can also be negative.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">{
  "quantity" : 3,
  "name" : "Bobbycar",
  "ean" : "800001303",
  "price" : 25.99
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Message"><a class="link" href="#Message">Message</a></h3>
<div class="paragraph">
<p>Messages and especially error messages.
For details on error handling see <a href="#error-messages">Error messages</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 55%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>code</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The unique error code for this error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>severity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The error level.
The possible values are: ERROR, WARN and INFO.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 1000 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field for which this error was generated.
This field is filled in case of a <code>VALIDATION_ERROR</code> (response code 400).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reasonCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 1000 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The reason for this error as a unique code if this is not clear from the <code>code</code> field.
The <code>reasonCode</code> is meant mainly for debugging purposes; no logic should be implemented on it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logref</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 1000 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A giropay-internal reference number for this error message.
Please always quote this reference number in support requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>content</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The invalid content in case of a <code>CONVERSION_ERROR</code>.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">{
  "code" : "VALIDATION_ERROR",
  "severity" : "ERROR",
  "path" : "currency",
  "reasonCode" : "INVALID_FORMAT",
  "logref" : "934180ed-ef93-4af1-835a-3071714fdce5:8t1ph9gFha1"
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="character-set"><a class="link" href="#character-set">Character set</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>As a general rule, data passed via HTTP request must be UTF-8 encoded.
Only the following characters are accepted in <code>String</code> type fields, unless otherwise specified:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All letters in the Unicode category <code>Letter</code></p>
</li>
<li>
<p>All numbers in the Unicode category <code>Number</code></p>
</li>
<li>
<p>The following special characters: .-!#$%&amp;'*+/=?^_’`´{|}~"(),:;&lt;&gt;@[]</p>
</li>
<li>
<p>Space and non-breaking space</p>
</li>
<li>
<p>Linebreak and line feed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>giropay also serves all responses in UTF-8.
In general, it should be noted that there is no guarantee that non-<a href="#sepa-characters">SEPA-compliant characters</a> will be displayed correctly, or at all, in all systems (especially on the bank side, e.g. on account statements).</p>
</div>
<div class="sect2">
<h3 id="sepa-characters"><a class="link" href="#sepa-characters">SEPA-compliant characters</a></h3>
<div class="paragraph">
<p>In SEPA payments, only characters of the restricted SWIFT Latin character set are allowed according to <a href="https://www.ebics.de/de/datenformate" target="_blank" rel="noopener">Annex 3 of the DFÜ Agreement</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>a b c d e f g h i j k l m n o p q r s t u v w x y z</code></p>
</li>
<li>
<p><code>A B C D E F G H I J K L M N O P Q R S T U V W X Y Z</code></p>
</li>
<li>
<p><code>0 1 2 3 4 5 6 7 8 9</code></p>
</li>
<li>
<p><code>' : ?
, - ( + . ) /</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The restricted character set therefore does not include in particular: Umlauts, the € symbol, certain special characters such as the underscore, the space character or square brackets.</p>
</div>
<div class="paragraph">
<p>In addition, references, identifications and identifiers are not allowed either to start or to end with a slash „/“ or to contain a double slash „//“.</p>
</div>
<div class="paragraph">
<p>To ensure that there are no disruptions in payment transactions, only the approved characters may be used for appropriately marked attributes.</p>
</div>
<div class="paragraph">
<p>In case of use of unauthorized characters or improper use of authorized characters, a payment or even an entire payment container may be rejected.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_changelog"><a class="link" href="#_changelog">Changelog</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following table summarizes all changes to this document.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 15%;">
<col style="width: 50%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Section</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">03.07.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NEW FEATURE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added checkout scheme to read checkout.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#checkout-get">Read a checkout</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">09.06.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NEW FEATURE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added field description for scheme.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#reports-transaction-v2">Transaction (V2)</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">05.06.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NEW FEATURE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added section <code>Read buyer account information for eps refunds</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#refund-buyer-account-information-eps">EPS refund buyer account information</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">02.05.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NEW INFO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added information regarding the checkout expiry time of <code>Online-Überweisung</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#checkout-post">Create a checkout</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14.04.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NEW FEATURE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added checkout scheme to request.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#checkout-post">Create a checkout</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">31.03.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FIX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed minor typos<br>
1. Added missing backtick to display monospace correctly.<br>
2. Added usage of correct possessive apostrophe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. <a href="#ShippingAddress">ShippingAddress</a><br>
2. Several sections of the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">20.03.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CHANGE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added missing field descriptions and reordered field descriptions.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#reports-transaction-v1">Transactions (V1)</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.03.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NEW FEATURE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added description for version 2 of endpoint.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#reports-read-transactions-v2">Read transactions (V2)</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.03.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CHANGE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marked endpoint version 1 as deprecated until end of 2023.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#reports-read-transactions-v1">Read transactions (V1)</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">07.02.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CHANGE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Removed <code>transactionTypeId</code> 9 and 10, added <code>transactionTypeId</code> 11.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#reports-transaction-v1">Reports</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 2.11.0-SNAPSHOT<br>
Last updated 2024-01-30 09:24:56 UTC
</div>
</div>
<link rel="stylesheet" href="highlight/styles/github.min.css">
<script src="highlight/highlight.min.js"></script>

</body>
</html>