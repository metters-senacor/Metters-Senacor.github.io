<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="giropay">
<title>Managed giropay Merchant API</title>
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/font-awesome-4.6.0.css">
</head>
<body id="giropay-psp-merchant-root" class="book toc2 toc-left">
<div id="header">
<h1>Managed giropay Merchant API</h1>
<div class="details">
<span id="author" class="author">giropay</span><br>
<span id="revnumber">version 2.11.0-SNAPSHOT</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Content</div>
<ul class="sectlevel1">
<li><a href="#giropay-psp-introduction">Introduction</a></li>
<li><a href="#endpoint">Endpoint</a></li>
<li><a href="#_rest_principles">REST principles</a></li>
<li><a href="#authentication">Authenticate as giropay PSP</a>
<ul class="sectlevel2">
<li><a href="#_definition_of_terms">Definition of terms</a></li>
<li><a href="#signature">Signature (Auth-Code)</a></li>
<li><a href="#Access-Token-GiroPSP">Access token</a></li>
<li><a href="#resource-access">Resource access</a></li>
</ul>
</li>
<li><a href="#giropay-psp-merchant-base">Base data</a>
<ul class="sectlevel2">
<li><a href="#giropay-psp-merchant-base-post">Create a merchant</a></li>
<li><a href="#giropay-psp-merchant-base-get">Read a merchant</a></li>
<li><a href="#giropay-psp-merchant-base-get-all">Read all merchants</a></li>
<li><a href="#giropay-psp-merchant-base-patch">Update a merchant</a></li>
</ul>
</li>
<li><a href="#giropay-psp-merchant-postal-address">Postal address</a>
<ul class="sectlevel2">
<li><a href="#giropay-psp-merchant-postal-address-put">Create/Update a merchant’s address</a></li>
<li><a href="#giropay-psp-merchant-postal-address-get">Read a merchant’s postal address</a></li>
</ul>
</li>
<li><a href="#giropay-psp-merchant-agreement-set">Agreement set references</a>
<ul class="sectlevel2">
<li><a href="#giropay-psp-acquirer-agreement-set-get-own">Read all available agreement sets</a></li>
<li><a href="#giropay-psp-merchant-agreement-set-post">Create an agreement set reference</a></li>
<li><a href="#giropay-psp-merchant-agreement-set-get">Read a merchant agreement set reference</a></li>
<li><a href="#giropay-psp-merchant-agreement-set-get-all">Read all merchant agreement set references</a></li>
<li><a href="#giropay-psp-merchant-agreement-set-patch">Update an agreement set reference</a></li>
<li><a href="#giropay-psp-merchant-agreement-set-delete">Delete an agreement set reference</a></li>
</ul>
</li>
<li><a href="#giropay-psp-merchant-authorized-psps">Authorized PSP</a>
<ul class="sectlevel2">
<li><a href="#giropay-psp-merchant-downstream-psps-get">Read all available downstream PSPs</a></li>
<li><a href="#giropay-psp-merchant-authorized-psps-put">Authorize a PSP</a></li>
<li><a href="#giropay-psp-merchant-authorized-psps-get">Read all authorized PSPs</a></li>
<li><a href="#giropay-psp-merchant-authorized-psps-delete">Delete authorization of a PSP</a></li>
</ul>
</li>
<li><a href="#giropay-psp-merchant-shops">Shops</a>
<ul class="sectlevel2">
<li><a href="#giropay-psp-merchant-shops-post">Create a shop</a></li>
<li><a href="#_read_a_shop">Read a shop</a></li>
<li><a href="#_read_all_shops">Read all shops</a></li>
<li><a href="#giropay-psp-merchant-shops-patch">Patch a shop</a></li>
<li><a href="#giropay-psp-merchant-shops-delete">Delete a shop</a></li>
<li><a href="#giropay-psp-merchant-shops-logo">Shop Logos</a></li>
</ul>
</li>
<li><a href="#giropay-psp-merchant-contacts">Contacts</a>
<ul class="sectlevel2">
<li><a href="#giropay-psp-merchant-contacts-post">Create contacts</a></li>
<li><a href="#giropay-psp-merchant-contacts-get">Read a contact</a></li>
<li><a href="#_read_all_contacts">Read all contacts</a></li>
<li><a href="#giropay-psp-merchant-contacts-patch">Patch a contact</a></li>
<li><a href="#giropay-psp-merchant-contacts-delete">Delete a contact</a></li>
</ul>
</li>
<li><a href="#giropay-psp-merchant-complete">Complete merchant</a>
<ul class="sectlevel2">
<li><a href="#giropay-psp-merchant-complete-post">Create a complete merchant</a></li>
</ul>
</li>
<li><a href="#_common_data_types">Common data types</a>
<ul class="sectlevel2">
<li><a href="#PostalAddress">PostalAddress</a></li>
<li><a href="#Message">Message</a></li>
<li><a href="#sepa-characters">SEPA-compliant characters</a></li>
</ul>
</li>
<li><a href="#_changelog">Changelog</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="giropay-psp-introduction"><a class="link" href="#giropay-psp-introduction">Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>giropay is the payment method for German private banks, co-operative banks and credit unions (Raiffeisenbanken, Volksbanken) and savings banks (Sparkassen).</p>
</div>
<div class="paragraph">
<p>The purpose of this document is to describe the interfaces (REST API) for administering giropay merchant data.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="endpoint"><a class="link" href="#endpoint">Endpoint</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The giropay interfaces can be reached via the following URL:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>https://api.paydirekt.de</pre>
</div>
</div>
<div class="paragraph">
<p>A test environment (sandbox) with the following endpoint is available for testing the interface.
The giropay system does not perform any payments in its sandbox, neither to real bank accounts, nor for simulated test banks.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>https://api.sandbox.paydirekt.de</pre>
</div>
</div>
<div class="paragraph">
<p>The static IP addresses of the endpoints are:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Production: 213.95.157.133
Sandbox: 213.95.255.167</pre>
</div>
</div>
<div class="paragraph">
<p>The static IP addresses from which callback URLs are fetched are:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Production: 213.95.26.236
Sandbox: 213.95.26.164</pre>
</div>
</div>
<h3 id="tls" class="discrete">Transport Layer Security (TLS)</h3>
<div class="paragraph">
<p>giropay can only be accessed via encrypted endpoints (HTTPS).
The <a href="https://www.pcisecuritystandards.org/" target="_blank" rel="noopener">Payment Card Industry Security Standards Council</a> already recommends the use of TLS 1.2 for API connections.
The following cipher suites are recommended for TLS 1.2: ECDHE-RSA-AES256-GCM-SHA384</p>
</div>
<div class="paragraph">
<p>Explanation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>This cipher suite is recommended by the <a href="https://www.bsi.bund.de" target="_blank" rel="noopener">BSI</a> and can be used at least until 2021 and beyond.</p>
</li>
<li>
<p>ECDHE offers Perfect Forward Secrecy.</p>
</li>
<li>
<p>ECDHE requires fewer resources than DHE.</p>
</li>
<li>
<p>AES256 is a strong encryption standard.</p>
</li>
<li>
<p>RSA is the underlying method for the private/public key material.</p>
</li>
<li>
<p>SHA384 is a secure fast hash function for signatures.</p>
</li>
<li>
<p>SHA384 provides protection even against length extension attacks (unlike SHA256).</p>
</li>
<li>
<p>GCM is a modern cipher block mode for AES that prevents certain attack vectors possible with the alternative CBC.</p>
</li>
<li>
<p>GCM establishes Authenticated Encryption.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For an overview of which older versions of TLS are currently still supported, see <a href="https://www.ssllabs.com/ssltest/analyze.html?d=api.paydirekt.de&amp;hideResults=on" target="_blank" rel="noopener">this page</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If Java is used, the Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files must be installed.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rest_principles"><a class="link" href="#_rest_principles">REST principles</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The giropay system provides a REST interface for integrating payments in webshops.</p>
</div>
<div class="paragraph">
<p>The API follows the <a href="https://restcookbook.com/Basics/hateoas/" target="_blank" rel="noopener">HATEOAS principles</a>, based on the <a href="https://stateless.group/hal_specification.html" target="_blank" rel="noopener">HAL specification</a>, and uses <a href="https://json.org" target="_blank" rel="noopener">JSON</a> as the data format.</p>
</div>
<h3 id="_http_methods" class="discrete">HTTP methods</h3>
<div class="paragraph">
<p>The REST API defines resources that correspond to business objects and are referenced by URL.
Standard HTTP methods according to <a href="https://www.ietf.org/rfc/rfc2616.txt" target="_blank" rel="noopener">RFC 2616</a> are used to create, modify, and retrieve data from these resources:</p>
</div>
<table id="http-methods" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the representation of one or more business objects. No changes are made to this resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>POST</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates a new business object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PATCH</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Updates an existing business object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PUT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Updates a business object by replacing it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DELETE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deletes a business object.</p></td>
</tr>
</tbody>
</table>
<h3 id="http-header" class="discrete">HTTP header fields</h3>
<div class="paragraph">
<p>The following headers must be included in <a href="#http-methods">all service calls</a> except for the access token endpoint.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Header field</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Authorization</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access token from the <a href="#authentication">OAuth2 call</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bearer &lt;accessTokenValue&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Request-ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique request ID, used for logging.
If none is set in the request, one is generated on the server side and returned inside the HTTP response.<br>
If a request ID is specified on the client side, the format <em>version-4 UUID (random)</em> should be used.<br>
Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8eb5d811-ad7f-4e08-94e4-5dcfa03a4b15</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Content-Type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Internet Media Type of the request body.
Only <code>application/hal+json</code> is supported.<br>
Mandatory field for command methods.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>application/hal+json</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Accept</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The accepted and expected Internet Media Types of the response.
Only <code>application/hal+json</code> is supported.<br>
Mandatory field for calls with response body.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>application/hal+json</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date and time when the request was sent. Format according to [<a href="https://www.ietf.org/rfc/rfc7231.txt" target="_blank" rel="noopener">RFC 7231</a>] IMF-fixdate.<br>
Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fri, 28 May 2021 09:46:48 GMT</p></td>
</tr>
</tbody>
</table>
<h3 id="http-return-codes" class="discrete">HTTP status codes and error messages</h3>
<div class="paragraph">
<p>The following general status codes can potentially occur in all service calls and must be handled accordingly.
Special features for a resource are explained in each case in the <em>return codes</em> section.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP status code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (OK)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request has succeeded.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201 (Created)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request has succeeded. A new resource has been created as a result.
It can be reached at the <code>location</code> stored in the header.<br>
This status code comes after a certain successful POST to a resource URL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">204 (No Content)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request has succeeded. There is no content to send for this request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400 (Bad Request)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request was not accepted. Details are in the response body.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An attempt was made to access a resource that is protected.
Either the API key is incorrect, the OAuth2 token is missing or expired, or access to the resource is denied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">403 (Forbidden)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access is not allowed to this resource with the HTTP method used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The server does not know any resource at this URL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">410 (Gone)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This version of the API is no longer available.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The server could not process the request for semantic reasons. Details are in the response body.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">500 (Internal Server Error)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A server-side error has occurred. Details are in the response body.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">503 (Service Unavailable)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The giropay system is temporarily unavailable (e.g., due to maintenance).</p></td>
</tr>
</tbody>
</table>
<h3 id="error-messages" class="discrete">Error messages</h3>
<div class="paragraph">
<p>If an error occurs, then in addition to the HTTP status code, details of the error are returned in an array of <a href="#Message">message</a> objects named <code>messages</code> in the response body.</p>
</div>
<div class="paragraph">
<p>Messages have a defined, unique message code (field <code>code</code>) and an error level (<code>severity</code>).
In addition, the attribute <code>logref</code> may be included, which uniquely references the error and simplifies error analysis.
Please always include this <code>logref</code> in support requests.</p>
</div>
<div class="paragraph">
<p>The possible message codes are listed in the <a href="#http-return-codes">return codes</a> section.</p>
</div>
<div class="paragraph">
<p>A default behaviour must be implemented for unknown or missing message codes in the case of a 4xx or 5xx status code.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>messages</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of <a href="#Message">messages</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of all errors that have occurred.</p></td>
</tr>
</tbody>
</table>
<h4 id="_special_case_validation_error" class="discrete">Special case: validation error</h4>
<div class="paragraph">
<p>Validation errors are also returned in the previously described form, along with the HTTP status code 400.</p>
</div>
<div class="paragraph">
<p>The path of an affected attribute is specified in the <code>path</code> field.
Complex objects are separated by dots. Arrays are referenced using <code>[n]</code>.</p>
</div>
<div class="paragraph">
<p>In addition, a detailed cause of the validation message can be specified in another optional field, <code>reasonCode</code>.</p>
</div>
<div class="paragraph">
<p>The following reason codes are currently defined for the message code <code>VALIDATION_ERROR</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Reason code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INVALID_FORMAT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value does not match the format specifications.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MANDATORY_VALUE_MISSING</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or more mandatory fields are not specified.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INVALID_ENUM_VALUE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A value was used that is not included in the specified enumeration type.</p></td>
</tr>
</tbody>
</table>
<h3 id="_links" class="discrete">Links</h3>
<div class="paragraph">
<p>Links to other resources may be included in the response data.
The links are dependent on the context and status of the resource and can indicate actions that are currently possible for a resource.
It may be that a link is no longer included, for example after a certain period of time, because the action is no longer possible.</p>
</div>
<div class="paragraph">
<p>The return data follows the <a href="https://stateless.group/hal_specification.html" target="_blank" rel="noopener">Hypertext Application Language (HAL)</a> format.</p>
</div>
<div class="paragraph">
<p>It is strongly recommended to always use links to perform actions.</p>
</div>
<h3 id="_additional_fields" class="discrete">Additional fields</h3>
<div class="paragraph">
<p>Additional fields that are transmitted during requests or responses and are not described in this document will be ignored by the giropay system.
An error or warning will not be returned in the process.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authentication"><a class="link" href="#authentication">Authenticate as giropay PSP</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The giropay system enables giropay payment service providers (<em>giropay PSPs</em>) to administer their merchants via an API.
An existing merchant can be administered by its owning giropay PSP (meaning the PSP that created the merchant via API) and by the giropay psp owning the agreement set which is currently assigned to that merchant (acquirer), see <a href="#giropay-psp-merchant-agreement-set">agreement set administration</a></p>
</div>
<div class="paragraph">
<p>An API key procedure in conjunction with OAuth2 is used to authenticate a giropay PSP.
For this purpose, the giropay PSP must have one of its own API keys and the corresponding API secret.
The giropay PSP can have its own API keys and secrets created in the intermediary portal.</p>
</div>
<div class="paragraph">
<p>To create and handle checkouts on behalf of one of its merchants, the giropay PSP additionally has to provide a corresponding merchant authorization reference during authentication.
The merchant authorization reference is automatically generated when creating a shop of a merchant and thus can be obtained via a GET call of the merchant’s shop data (see the sections on <a href="#giropay-psp-merchant-shops">creating and reading shops</a>).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
For merchant administration, only the API key and API secret of the giropay PSP must be transmitted when issuing the access token.
A <code>merchantAuthorizationReference</code> is necessary when processing checkouts to identify the associated merchant.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_definition_of_terms"><a class="link" href="#_definition_of_terms">Definition of terms</a></h3>
<div id="api-key" class="dlist">
<dl>
<dt class="hdlist1">API key</dt>
<dd>
<p>The API key is used to identify a giropay PSP.
An API key can be created and deactivated in the intermediary portal at any time.
Several API keys can be valid at the same time.
In the sandbox, the first 8 digits of newly created API keys are always "00000000".<br></p>
<div class="paragraph">
<p>An API key is generated by the giropay system and has the following format:<br>
Length: 36 characters<br>
Encoding: version-4 UUID (random) [<a href="https://www.ietf.org/rfc/rfc4122.txt" target="_blank" rel="noopener">RFC 4122</a>]<br>
Example: <code>87dbc6cd-91d2-4574-bcb5-2aaaf924386d</code><br>
Example in the sandbox: <code>000000-91d2-4574-bcb5-2aaaf924386d</code></p>
</div>
</dd>
<dt class="hdlist1">API secret</dt>
<dd>
<p>The API secret is used to authenticate the giropay PSP.
It is used to generate a <a href="#signature">signature</a> of the authentication request.
The API secret itself is never transmitted in the communication, which significantly increases security.
An API secret is assigned to exactly one API key and is managed together with it.<br></p>
<div class="paragraph">
<p>An API secret is generated by the giropay system and has the following format:<br>
Length: 44 characters<br>
Encoding: Base64 URL encoding [<a href="https://tools.ietf.org/html/rfc4648#section-5" target="_blank" rel="noopener">RFC 4648 Section 5</a>] with Base64 padding<br>
Example: <code>9Tth0qty_9zplTyY0d_QbHYvKM4iSngjoipWO6VxAao=</code></p>
</div>
</dd>
</dl>
</div>
<div id="access-token-giropsp-description" class="dlist">
<dl>
<dt class="hdlist1">Access token</dt>
<dd>
<p>An OAuth2 access token [<a href="https://datatracker.ietf.org/doc/html/rfc6749#section-11.4" target="_blank" rel="noopener">RFC 6749 1.4</a>] is required for all requests against the giropay API.
The authentication information of the caller is stored in this token.
An access token is generated by calling the <a href="#Access-Token-GiroPSP">access token</a> endpoint by specifying the grant type <code>api_key</code> and is specified as <code>Bearer</code> in the <code>Authorization</code> request header for all subsequent requests:</p>
<div class="literalblock">
<div class="content">
<pre>Authorization: Bearer &lt;accessToken&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>The access token has a limited validity period of one hour.</strong>
After the validity period has expired, a new access token can simply be obtained.
The validity period is returned in the response of the access token.</p>
</div>
<div class="paragraph">
<p>If required, the calling system can use several access tokens simultaneously.
If the calling system consists of several nodes, each node can use its own access token for its requests.
However, for performance reasons, it is not permitted to request a new access token for each individual request.</p>
</div>
</dd>
<dt class="hdlist1">Grant type</dt>
<dd>
<p>The <em>grant type</em> defines the method a user or a system uses to authenticate itself to the giropay system.
For the REST API, the grant type <code>api_key</code> is used.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="signature"><a class="link" href="#signature">Signature (Auth-Code)</a></h3>
<div class="paragraph">
<p>The signature (Auth-Code) confirms that the giropay PSP is in possession of the API secret and is allowed to send valid requests to the giropay system.</p>
</div>
<div class="paragraph">
<p>The signature is generated from a <em>string-to-sign</em> and an <em>API secret</em>.
The following values are fed into the <em>string-to-sign</em> in the sequence shown here:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 4%;">
<col style="width: 16%;">
<col style="width: 25%;">
<col style="width: 20%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">No.</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Source</th>
<th class="tableblock halign-left valign-top">Format</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header <code>X-Request-ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version-4 UUID (random) [<a href="https://www.ietf.org/rfc/rfc4122.txt" target="_blank" rel="noopener">RFC 4122</a>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ec85749b-aa36-412a-a397-2b40200c119c</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header <code>X-Date</code>. Important: The time must correspond to the UTC time zone!</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yyyyMMddHHmmss</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20210622235859</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header <code>X-Auth-Key-PSP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version-4 UUID (random) [<a href="https://www.ietf.org/rfc/rfc4122.txt" target="_blank" rel="noopener">RFC 4122</a>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4c15310a-7936-4a19-8d80-f2b7bd95dc9b</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Random Nonce</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request body field <code>randomNonce</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base64 URL encoding [<a href="https://tools.ietf.org/html/rfc4648#section-5" target="_blank" rel="noopener">RFC 4648 Section 5</a>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ns0WLCI3qA2AMH98wUYyhqALyVlzS0q7n Hh7NdeMyvUgKJoyF0rNXkgq5fq2VNJs</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <em>random nonce</em> must be randomly generated by the calling system for each request;
it is included in the signature and transferred to the giropay system in the request body field <code>randomNonce</code>.</p>
</div>
<div class="paragraph">
<p>From the values specified above, first the so-called <em>string-to-sign</em> is formed.
For this purpose, the values are connected in the specified order, separated using <code>:</code> as the delimiter, to form a string (string concatenation).
The separator is inserted only if another value follows.
None of the values may be missing or coded as <code>null</code>.</p>
</div>
<div class="paragraph">
<p>Format example for a string-to-sign ‘Z’:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">Z = ec85749b-aa36-412a-a397-2b40200c119c:20210622235859:4c15310a-7936-4a19-8d80-f2b7bd95dc9b:Ns0WLCI3qA2AMH98wUYyhqALyVlzS0q7nHh7NdeMyvUgKJoyF0rNXkgq5fq2VNJs</code></pre>
</div>
</div>
<div class="paragraph">
<p>Based on a <em>string-to-sign</em> <code>Z</code> for a request <code>R</code> and the API secret <code>S</code>, the signature of the request is formed using the HMAC-SHA-256 [<a href="https://tools.ietf.org/html/rfc2104" target="_blank" rel="noopener">RFC 2104</a>] function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">Signature(Request) = new String(encodeBase64URLCompatible(HMAC-SHA-256(getBytes(Z, "UTF-8"), decodeBase64URLCompatible(getBytes(S, "UTF-8")))), "UTF-8")</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The signature is encoded using Base64 <em>URL Encoding</em> [<a href="https://tools.ietf.org/html/rfc4648#section-5">RFC 4648 Section 5</a>].
The problematic characters <code>+</code> and <code>/</code> are replaced by <code>-</code> (minus) and <code>_</code> (underscore).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This signature is given in the request header <code>X-Auth-Code-PSP</code> in case of a giropay PSP.</p>
</div>
<div class="paragraph">
<p>By comparison with Basic Auth or a simple hash signature, the HMAC-based API key procedure affords a significantly higher degree of security, since the signature cannot be counterfeited or reused and the secret is never transmitted in the communication.</p>
</div>
</div>
<div class="sect2">
<h3 id="Access-Token-GiroPSP"><a class="link" href="#Access-Token-GiroPSP">Access token</a></h3>
<div class="literalblock">
<div class="content">
<pre>POST /api/merchantintegration/v1/token/obtain</pre>
</div>
</div>
<div class="paragraph">
<p>An access token is issued via this endpoint, as described above.</p>
</div>
<div class="paragraph">
<p>For the merchant administration, only the fields <a href="#x-auth-key-psp"><code>X-Auth-Key-PSP</code></a> and <a href="#x-auth-code-psp"><code>X-Auth-Code-PSP</code></a> have to be passed.</p>
</div>
<div class="sect3">
<h4 id="_request"><a class="link" href="#_request">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong><em>Header fields</em></strong>
<a id="x-auth-key-psp"></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Auth-Key-PSP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API key of the giropay PSP.<br>
Purpose: Identification<br>
Format: version-4 UUID (random) [<a href="https://www.ietf.org/rfc/rfc4122.txt" target="_blank" rel="noopener">RFC 4122</a>]<br>
Example: 4c15310a-7936-4a19-8d80-f2b7bd95dc9b</p>
<p class="tableblock"><a id="x-auth-code-psp"></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Auth-Code-PSP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
Maximum 44 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request’s <a href="#signature">Signature (Auth-Code)</a><br>
Purpose: Authentication<br>
Encoding: Base64 URL encoding [<a href="https://tools.ietf.org/html/rfc4648#section-5" target="_blank" rel="noopener">RFC 4648 Section 5</a>]<br>
Example: Im6MZB4ht8Dp8mXIBzPjqdgaQSZVl5CzoVzmoCnQAfk=</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Request-ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
36 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Randomly generated UUID of the request<br>
Purpose: Logging, log statement correlation and debugging<br>
Format: version-4 UUID (random)<br>
Example: ec85749b-aa36-412a-a397-2b40200c119c</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date and time when the request was sent<br>
Format: [<a href="https://www.ietf.org/rfc/rfc7231.txt" target="_blank" rel="noopener">RFC 7231</a>] IMF-fixdate<br>
Example: Fri, 28 May 2021 09:46:48 GMT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Content-Type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always <code>application/hal+json;charset=utf-8</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong><em>Body fields</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>grantType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always <code>api_key</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>randomNonce</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
64 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Random string for diversification of request body content<br>
Purpose: Increasing the security of the process<br>
Encoding: Base64 URL encoding [<a href="https://tools.ietf.org/html/rfc4648#section-5" target="_blank" rel="noopener">RFC 4648 Section 5</a>]<br>
Example: Ns0WLCI3qA2AMH98wUYyhqALyVlzS0q7nHh7NdeMyvUgKJoyF0rNXkgq5fq2VNJs</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_response"><a class="link" href="#_response">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Characteristics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>access_token</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OAuth2 access token for requests to the giropay API.
The token length is dependent on the data fields coded in it, and no maximum length is defined.
It should therefore not be limited when implementing the client.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>token_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always <code>bearer</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>expires_in</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity period of the access token in seconds for information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity range of the access token for information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID consisting of 36 characters for unique identification of the token.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jti</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON Web Token ID of the access token for debugging purposes.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes"><a class="link" href="#_return_codes">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access token was successfully created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400 (Bad Request)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INVALID_GRANT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X-Auth-Key-PSP</code> or <code>X-Auth-Code-PSP</code> is missing or invalid.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API_KEY_IN_REQUEST_UNKNOWN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The API key is not stored in the giropay system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API_KEY_REQUEST_HEADER_INVALID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request contains more than one <code>X-Auth-Key-PSP</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API_KEY_IN_REQUEST_INACTIVE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The API key is disabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API_KEY_REQUEST_SIGNATURE_INVALID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>X-Auth-Code-PSP</code> is false or empty.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example"><a class="link" href="#_example">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/merchantintegration/v1/token/obtain HTTP/1.1
Date: Mon Jan 23 13:06:19 CET 2021
X-Request-ID: 1e2c7830-e001-4eb3-a705-38efacf3cd01
Accept: application/hal+json
Content-Type: application/hal+json;charset=utf-8
X-Auth-Key-PSP: ee3f9f0e-17fd-4ff3-bebc-3a16a867fd98
X-Auth-Code-PSP: AYLRvNW-zp2Z9RVF6KYYezN9DMHI5Wo8rcQdT02TOMg=
X-Auth-Merchant-Ref: P_piZRwAxsaGBiXQ6gz0d2sC0dkAAIpLZhdwca-XppY=
Host: api.paydirekt.de
Content-Length: 115

{
  "grantType" : "api_key",
  "randomNonce" : "0Lt5zqnh4w3IR1w1crv3jsg5UuZcpBc7kPzJ25KNATYN8CCfp0EZ0mtrLBPZz7Cb"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8
Content-Length: 1344

{
  "access_token" : "w8d2D2wdoO7CnFrBXAZCIYivneVnUv-uI0kwcfa_1LtS7-ysX3QgeVv2qVGm1Ktz1eDwOQTFFBB6HIr0Mcw656VqwGF0ossAz32jbB-koJaZr_ibCQNxV18kjoCvESTyKrJnI2p8a0D8SPrgYXD-g4likvP0OvCJh0bUvQyFU8ndY2H_o5L-8Kk0i3Gt4GDADb2toHOOyR2d1EKaT-4ON021RZf4_PTe9T2i1qJw4lwsls4GMqgLNyhTd8Y6_kPlMHHefavxzX2jCCyORmwGYD1H8UtVrIuAHpXSNJFIBiAnMJTwxuAUIjZiPB8masXkoF0vib6NINu3ABvqV4VQADVX_PZsDR_cxlma74ovmMgxnwE-QPNzG1zf8zR7kgCmJ4FjB4JyoqO9_XwFDNN23jiKC3CnAnqmnIS_nQB9F52OGyy_6PqmFNMZYIFjI9FxtwrWoa7N_AQuZtub2Bbfh85545Jdd0TX_VeAmqCN1cu5QZF8PwHYacbrdGVSR3XkywIX8KiXRPi2736YnmozGKsHfpqTLGGz-ZFpAjyV5VCjsWDM1YH9TWXUy0cUCTwqonHf3hptfWwJect2S5cn_2nC32LflJUDxWpnU-7BAzIf_qWjC6nqDg9zvmrdRmd1OxfxgGHre1Fc461eIipqemDq7el6YnDTfskuOA6n6KJAMZqwkYEHAK-tb00uEpPASQyjYY5NBIhAAH8YHloDuwednjn3yGnBqr3Gg6RijxZxJL5cF08jqQ_Ihe2ythPfslaXC6_qo16RAL93B6ydHBPGK0PzpEVRk6IKmY_H_yex7GnPYhJbYnxMQcwHkABE-uEe7WGXklOQEkALUgtNrCkllD3Li3Y_Rl6St4SWGIShfkA8PhbGrgVZ7UId-Qy5egsMVtJMVfZi9ltmR38obxg16IQcye3_KOfqi_zDQY7T6j_H2U3C_VYB1KwWLaTyATg5DDd57CmzRvMT_CL_xwjXbP-E26I_xVYl5hMrvw6SR6uVTSAiWlWEOOIJ6W3UDWDdR-IU4vnEbqjA7IkJdVMrXw0C10j-he367DoWdswHzecbuTsp_ncGvtVmpNwdbxzEO8F82TR7DSh4LqXWlbpo36rNKdWOVCDiMpB2b2A9jy8ZzXNZ-kIcvXTAnrAWYNZpuVY311PMVyDRv2Y6w8",
  "token_type" : "bearer",
  "expires_in" : 3599,
  "scope" : "checkout reporting intermediary",
  "jti" : "842f0703-db73-4132-ac8e-005103f07d8a"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_wrong_auth_code"><a class="link" href="#_example_wrong_auth_code">Example (Wrong auth code)</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/merchantintegration/v1/token/obtain HTTP/1.1
X-Request-ID: 2346b3bd-174d-41d3-a82a-1730dabb1592
Content-Type: application/json;charset=utf-8
X-Auth-Key-PSP: 96a57c6a-ae4e-4c96-9952-2bf830d42031
X-Auth-Code-PSP: 2KXQl8oSV-m1hUWUhDGmYV8HtTXXTRcyXz3SdZGOQlw=
Host: api.paydirekt.de
Content-Length: 115
X-Date: Mon, 23 Jan 2021 12:06:20 GMT

{
  "grantType" : "api_key",
  "randomNonce" : "KVGQy-bAtKTFhNesYLzFIyUHK_iUA7Qlfw0z7YzFUMqrE3_PB8cOOrlNPScY8S_N"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 401 Unauthorized
Content-Type: application/json;charset=UTF-8
Content-Length: 170

{
  "messages" : [ {
    "severity" : "ERROR",
    "code" : "API_KEY_REQUEST_SIGNATURE_INVALID",
    "logref" : "2346b3bd-174d-41d3-a82a-1730dabb1592:9eLz9fnG9ok"
  } ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resource-access"><a class="link" href="#resource-access">Resource access</a></h3>
<div class="paragraph">
<p>With the valid access token, the API can now be accessed, e.g., to manage a merchant’s base data, to create a new checkout or to retrieve an existing one.
The giropay system identifies the caller using this token.</p>
</div>
<div class="paragraph">
<p>The access token is specified in the <code>Authorization</code> header field with the prefix <code>Bearer</code> (see <a href="#http-header">HTTP header fields</a>).</p>
</div>
<div class="paragraph">
<p>The access token is valid for a limited time (see <code>expires_in</code>) and should be used for all requests within this validity for performance reasons. The time limit is specified in <a href="#access-token-giropsp-description">access token</a>.</p>
</div>
<div class="sect3">
<h4 id="_example_expired_access_token"><a class="link" href="#_example_expired_access_token">Example (Expired access token)</a></h4>
<div class="paragraph">
<p>Shortly before this time has expired, a new access token should be <a href="#Access-Token-GiroPSP">requested</a>.
In case the validity of an access token has expired due to the time limit, the giropay system responds with the HTTP status code <code>401</code> with the message code <code>ACCESS_TOKEN_EXPIRED</code>.
The calling system must obtain a new access token at this point and repeat the request.</p>
</div>
<div class="paragraph">
<p>In addition to the <a href="#Message">message</a> structure, the body of the HTTP response also contains the <code>error</code> and <code>error_description</code> fields, which are defined in [<a href="https://tools.ietf.org/html/rfc6749#section-5.2" target="_blank" rel="noopener">RFC 6749</a>].</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/merchantintegration/v1/some-endpoint HTTP/1.1
Date: Fri Jan 12 07:57:56 UTC 2024
Host: api.paydirekt.de
Authorization: Bearer lO3uuUom...</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 401 Unauthorized
Content-Type: application/hal+json;charset=utf-8
Content-Length: 197

{
  "messages" : [ {
    "severity" : "ERROR",
    "code" : "ACCESS_TOKEN_EXPIRED",
    "logref" : "12RnHUtfNxr"
  } ],
  "error" : "invalid_token",
  "error_description" : "Access token expired"
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="giropay-psp-merchant-base"><a class="link" href="#giropay-psp-merchant-base">Base data</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The merchant’s base data can be administered via these endpoints.</p>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-base-post"><a class="link" href="#giropay-psp-merchant-base-post">Create a merchant</a></h3>
<div class="literalblock">
<div class="content">
<pre>POST /api/psp/merchant/v1/merchants</pre>
</div>
</div>
<div class="paragraph">
<p>A new merchant can be created through this endpoint.</p>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-base-post-request"><a class="link" href="#giropay-psp-merchant-base-post-request">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>formOfOrganisation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Legal form, e.g., GmbH, AG, &#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commercialRegisterType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the commercial register entry (HRA/HRB).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commercialRegisterNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commercial register number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parentCorporationId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the parent corporation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>valueAddedTaxNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value added tax identification number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Use <code>GIROPAY_MERCHANT</code> as type identifier for giropay merchants.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant type. Here always <code>GIROPAY_MERCHANT</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>marketingEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the acquirer has granted paydirekt GmbH the right for merchant marketing (default: <code>true</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>creditorId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory if the merchant has at least one shop with <code>collectingEnabled</code> set to <code>false</code>.<br>
 Must be a valid <code>creditorId</code> (see <a href="https://www.bundesbank.de/en/tasks/payment-systems/services/sepa/creditor-identifier/creditor-identifier-626704" target="_blank" rel="noopener">Creditor Identifier</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creditor identification number.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-base-post-response"><a class="link" href="#giropay-psp-merchant-base-post-response">Response</a></h4>
<div class="paragraph">
<p>In the response, the created merchant base data is returned.
The structure is identical to the endpoint for <a href="#giropay-psp-merchant-base-get">GET</a> calls, in particular the response contains the ID of the created merchant as well as the initial merchant status <code>NOT_ACTIVE</code> and all links relevant for the resource.</p>
</div>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-base-post-links"><a class="link" href="#giropay-psp-merchant-base-post-links">Links</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to this resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shops</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the shops, see also <a href="#giropay-psp-merchant-shops">Shops</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>agreementSets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the agreement set reference, see also <a href="#giropay-psp-merchant-agreement-set">Agreement set references</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>contacts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the contacts, see also <a href="#giropay-psp-merchant-contacts">Contacts</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>postalAddress</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the postal address, see also <a href="#giropay-psp-merchant-postal-address">Postal address</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>downstreamPsps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to list all downstream PSPs, useful for finding PSPs which can be authorized, see also <a href="#giropay-psp-merchant-downstream-psps-get">Read all available downstream PSPs</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>authorizedPsps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to list all currently authorized PSPs, see also <a href="#giropay-psp-merchant-authorized-psps-get">Read all authorized PSPs</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_2"><a class="link" href="#_return_codes_2">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201 (Created)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The merchant was created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_2"><a class="link" href="#_example_2">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/psp/merchant/v1/merchants/ HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "name" : "someName",
  "formOfOrganisation" : "someForm",
  "commercialRegisterType" : "someCommType",
  "commercialRegisterNumber" : "someCommNumber",
  "parentCorporationId" : "someParentCorp",
  "valueAddedTaxNumber" : "someTaxNumber",
  "merchantType" : "GIROPAY_MERCHANT",
  "creditorId" : "DE98ZZZ09999999999"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 201 Created
Content-Type: application/hal+json;charset=utf-8

{
  "merchantId" : "ed8720e1-5688-4d18-8244-19e4a897b4b4",
  "name" : "someName",
  "merchantType" : "GIROPAY_MERCHANT",
  "formOfOrganisation" : "someForm",
  "commercialRegisterType" : "someCommType",
  "commercialRegisterNumber" : "someCommNumber",
  "parentCorporationId" : "someParentCorp",
  "valueAddedTaxNumber" : "someTaxNumber",
  "marketingEnabled" : true,
  "creditorId" : "DE98ZZZ09999999999",
  "checkoutCreationLocked" : false,
  "merchantStatus" : "NOT_ACTIVE",
  "pspId" : "47038c84-d113-4e0a-b07e-b8004d2f2950",
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/ed8720e1-5688-4d18-8244-19e4a897b4b4"
    },
    "shops" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/ed8720e1-5688-4d18-8244-19e4a897b4b4/shops"
    },
    "postalAddress" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/ed8720e1-5688-4d18-8244-19e4a897b4b4/address"
    },
    "agreementSets" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/ed8720e1-5688-4d18-8244-19e4a897b4b4/agreementsets"
    },
    "contacts" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/ed8720e1-5688-4d18-8244-19e4a897b4b4/contacts"
    },
    "downstreamPsps" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/ed8720e1-5688-4d18-8244-19e4a897b4b4/downstreampsps"
    },
    "authorizedPsps" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/ed8720e1-5688-4d18-8244-19e4a897b4b4/authorizedpsps"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-base-get"><a class="link" href="#giropay-psp-merchant-base-get">Read a merchant</a></h3>
<div class="literalblock">
<div class="content">
<pre>GET /api/psp/merchant/v1/merchants/{merchantId}</pre>
</div>
</div>
<div class="paragraph">
<p>The base data of a previously created merchant can be retrieved by using the GET method and providing the merchant ID.
The returned resource contains the merchant’s base data as well as links to additional resources, e.g., shops, contacts, etc.</p>
</div>
<div class="sect3">
<h4 id="_response_2"><a class="link" href="#_response_2">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant type. Here always <code>GIROPAY_MERCHANT</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>formOfOrganisation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Legal form, e.g., GmbH, AG, &#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commercialRegisterType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the commercial register entry (HRA/HRB).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commercialRegisterNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commercial register number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parentCorporationId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the parent corporation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>valueAddedTaxNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value added tax identification number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>marketingEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the acquirer has granted paydirekt GmbH the right for merchant marketing (default: <code>true</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>creditorId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creditor identification number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pspId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the PSP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkoutCreationLocked</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the creation of checkouts is locked for the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Links to the resources and available actions of the merchant.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-base-get-links"><a class="link" href="#giropay-psp-merchant-base-get-links">Links</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to this resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shops</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the shops, see also <a href="#giropay-psp-merchant-shops">Shops</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>agreementSets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the agreement set reference, see also <a href="#giropay-psp-merchant-agreement-set">Agreement set references</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>contacts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the contacts, see also <a href="#giropay-psp-merchant-contacts">Contacts</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>postalAddress</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the postal address, see also <a href="#giropay-psp-merchant-postal-address">Postal address</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>downstreamPsps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to list all downstream PSPs, useful for finding PSPs which can be authorized, see also <a href="#giropay-psp-merchant-downstream-psps-get">Read all available downstream PSPs</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>authorizedPsps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to list all currently authorized PSPs, see also <a href="#giropay-psp-merchant-authorized-psps-get">Read all authorized PSPs</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_3"><a class="link" href="#_return_codes_3">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The response provides a list of all existing merchant data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested merchant does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_3"><a class="link" href="#_example_3">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/psp/merchant/v1/merchants/b46c6422-c9c6-4bdd-a16a-89c5ca870791 HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "merchantId" : "b46c6422-c9c6-4bdd-a16a-89c5ca870791",
  "name" : "ACME Spielwaren-Versand",
  "merchantType" : "GIROPAY_MERCHANT",
  "formOfOrganisation" : "AG",
  "commercialRegisterType" : "HRA",
  "commercialRegisterNumber" : "1234567890",
  "parentCorporationId" : "parentCorporationId",
  "valueAddedTaxNumber" : "SomeValueAddedTaxNumber",
  "marketingEnabled" : true,
  "creditorId" : "DE98ZZZ09999999999",
  "checkoutCreationLocked" : false,
  "merchantStatus" : "NOT_ACTIVE",
  "pspId" : "413b13db-2412-4ab2-8b2e-c31630a80935",
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/b46c6422-c9c6-4bdd-a16a-89c5ca870791"
    },
    "shops" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/b46c6422-c9c6-4bdd-a16a-89c5ca870791/shops"
    },
    "postalAddress" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/b46c6422-c9c6-4bdd-a16a-89c5ca870791/address"
    },
    "agreementSets" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/b46c6422-c9c6-4bdd-a16a-89c5ca870791/agreementsets"
    },
    "contacts" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/b46c6422-c9c6-4bdd-a16a-89c5ca870791/contacts"
    },
    "downstreamPsps" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/b46c6422-c9c6-4bdd-a16a-89c5ca870791/downstreampsps"
    },
    "authorizedPsps" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/b46c6422-c9c6-4bdd-a16a-89c5ca870791/authorizedpsps"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-base-get-all"><a class="link" href="#giropay-psp-merchant-base-get-all">Read all merchants</a></h3>
<div class="literalblock">
<div class="content">
<pre>GET /api/psp/merchant/v1/merchants</pre>
</div>
</div>
<div class="paragraph">
<p>This endpoint provides a list of all merchant data stored in the system for this giropay PSP.<br>
If the request is made by the owning giropay PSP (meaning the PSP that created the merchant via API),
all owning merchants are returned.
If the request is made by the giropay psp owning the agreement set which is currently assigned to a merchant (acquirer,
see <a href="#giropay-psp-merchant-agreement-set">agreement set administration</a>),
all merchants are returned, which have an agreement set reference to the acquirer’s agreement set.</p>
</div>
<div class="paragraph">
<p>Each merchant record listed in the response also contains further administration links for this merchant resource.</p>
</div>
<div class="paragraph">
<p>This endpoint is thus an excellent entry point for the administration of merchant data, since its URL is static, and it only needs to be called with valid authentication.
Most endpoints of the API can be reached via the links in this response.</p>
</div>
<div class="sect3">
<h4 id="_response_3"><a class="link" href="#_response_3">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.merchants</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of merchants managed by the PSP, including links to manage each merchant object separately.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-base-get-all-links"><a class="link" href="#giropay-psp-merchant-base-get-all-links">Links</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to this resource.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_4"><a class="link" href="#_return_codes_4">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The response provides a list of all existing merchant data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_4"><a class="link" href="#_example_4">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/psp/merchant/v1/merchants HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "_embedded" : {
    "merchants" : [ {
      "merchantId" : "9ea89a69-bc51-4d7d-b7ac-9b8ea8f24bb2",
      "name" : "ACME Spielwaren-Versand",
      "merchantType" : "GIROPAY_MERCHANT",
      "formOfOrganisation" : "AG",
      "commercialRegisterType" : "HRA",
      "commercialRegisterNumber" : "1234567890",
      "parentCorporationId" : "parentCorporationId",
      "valueAddedTaxNumber" : "SomeValueAddedTaxNumber",
      "marketingEnabled" : true,
      "checkoutCreationLocked" : false,
      "merchantStatus" : "NOT_ACTIVE",
      "pspId" : "0aeb78bd-1098-4ce2-9e8e-f8f6e9df98f9",
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/9ea89a69-bc51-4d7d-b7ac-9b8ea8f24bb2"
        },
        "shops" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/9ea89a69-bc51-4d7d-b7ac-9b8ea8f24bb2/shops"
        },
        "postalAddress" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/9ea89a69-bc51-4d7d-b7ac-9b8ea8f24bb2/address"
        },
        "agreementSets" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/9ea89a69-bc51-4d7d-b7ac-9b8ea8f24bb2/agreementsets"
        },
        "contacts" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/9ea89a69-bc51-4d7d-b7ac-9b8ea8f24bb2/contacts"
        },
        "downstreamPsps" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/9ea89a69-bc51-4d7d-b7ac-9b8ea8f24bb2/downstreampsps"
        },
        "authorizedPsps" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/9ea89a69-bc51-4d7d-b7ac-9b8ea8f24bb2/authorizedpsps"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-base-patch"><a class="link" href="#giropay-psp-merchant-base-patch">Update a merchant</a></h3>
<div class="literalblock">
<div class="content">
<pre>PATCH /api/psp/merchant/v1/merchants/{merchantId}</pre>
</div>
</div>
<div class="paragraph">
<p>giropay merchants can be edited through this endpoint.
This includes status updates, namely activation or deboarding of the merchant by setting the value of the status field accordingly.
Please note that for activating a merchant certain conditions have to be fulfilled:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the merchant must have at least one <a href="#giropay-psp-merchant-shops">shop</a></p>
</li>
<li>
<p>the merchant must reference an effective <a href="#giropay-psp-merchant-agreement-set">acquirer agreement set</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-base-patch-request"><a class="link" href="#giropay-psp-merchant-base-patch-request">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Either <code>ACTIVE</code> or <code>DEBOARDED</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">New status to which the merchant should be transitioned.<br>
 Caution: Once a merchant has been deboarded, it can not be activated again.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>formOfOrganisation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Legal form, e.g., GmbH, AG, &#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commercialRegisterType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the commercial register entry (HRA/HRB).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commercialRegisterNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commercial register number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parentCorporationId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the parent corporation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>valueAddedTaxNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value added tax identification number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>marketingEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the acquirer has granted paydirekt GmbH the right for merchant marketing (default: <code>true</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>creditorId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory if the merchant has at least one shop with <code>collectingEnabled</code> set to <code>false</code>.<br>
 Must be a valid <code>creditorId</code> (see <a href="https://www.bundesbank.de/en/tasks/payment-systems/services/sepa/creditor-identifier/creditor-identifier-626704" target="_blank" rel="noopener">Creditor Identifier</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creditor identification number.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-base-patch-response"><a class="link" href="#giropay-psp-merchant-base-patch-response">Response</a></h4>
<div class="paragraph">
<p>In the response, the updated merchant base data is returned.
The structure is nearly identical to the endpoint for <a href="#giropay-psp-merchant-base-get">GET</a> calls, in particular the response contains the ID of the created merchant and all links relevant for the resource.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>formOfOrganisation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Legal form, e.g., GmbH, AG, &#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commercialRegisterType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the commercial register entry (HRA/HRB).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commercialRegisterNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commercial register number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parentCorporationId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the parent corporation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>valueAddedTaxNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value added tax identification number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant type. Here always <code>GIROPAY_MERCHANT</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkoutCreationLocked</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the creation of checkouts is locked for the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>marketingEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the acquirer has granted paydirekt GmbH the right for merchant marketing (default: <code>true</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>creditorId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creditor identification number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pspId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the PSP.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-base-patch-links"><a class="link" href="#giropay-psp-merchant-base-patch-links">Links</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to this resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shops</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the shops, see also <a href="#giropay-psp-merchant-shops">Shops</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>agreementSets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the agreement set reference, see also <a href="#giropay-psp-merchant-agreement-set">Agreement set references</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>contacts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the contacts, see also <a href="#giropay-psp-merchant-contacts">Contacts</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>postalAddress</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the postal address, see also <a href="#giropay-psp-merchant-postal-address">Postal address</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>downstreamPsps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to list all downstream PSPs, useful for finding PSPs which can be authorized, see also <a href="#giropay-psp-merchant-downstream-psps-get">Read all available downstream PSPs</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>authorizedPsps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to list all currently authorized PSPs, see also <a href="#giropay-psp-merchant-authorized-psps-get">Read all authorized PSPs</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_5"><a class="link" href="#_return_codes_5">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested change of status of the merchant was successful.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested merchant does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INVALID_STATE_TRANSITION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested state transition is not possible for the merchant’s current status.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NO_SHOP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only when activating: The merchant does not have a shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EFFECTIVE_AGREEMENT_SET_REFERENCE_REQUIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only when activating: The merchant does not have an effective agreement set reference (see <a href="#giropay-psp-merchant-agreement-set">agreement set references</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_5"><a class="link" href="#_example_5">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">PATCH /api/psp/merchant/v1/merchants/ddc2f6ac-76dd-4353-887a-84cd56403a85 HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "merchantStatus" : "ACTIVE",
  "name" : "newName",
  "formOfOrganisation" : "newFormOfOrganisation",
  "commercialRegisterType" : "newCommercialRegisterType",
  "commercialRegisterNumber" : "newCommercialRegisterNumber",
  "parentCorporationId" : "newParentCorporationId",
  "valueAddedTaxNumber" : "newValueAddedTaxNumber",
  "marketingEnabled" : true,
  "creditorId" : "DE98ZZZ09999999999"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "merchantId" : "ddc2f6ac-76dd-4353-887a-84cd56403a85",
  "name" : "newName",
  "merchantType" : "GIROPAY_MERCHANT",
  "formOfOrganisation" : "newFormOfOrganisation",
  "commercialRegisterType" : "newCommercialRegisterType",
  "commercialRegisterNumber" : "newCommercialRegisterNumber",
  "parentCorporationId" : "newParentCorporationId",
  "valueAddedTaxNumber" : "newValueAddedTaxNumber",
  "marketingEnabled" : true,
  "creditorId" : "DE98ZZZ09999999999",
  "checkoutCreationLocked" : false,
  "merchantStatus" : "ACTIVE",
  "pspId" : "82e08673-ec39-4d58-b70e-d6b10adb2222",
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/ddc2f6ac-76dd-4353-887a-84cd56403a85"
    },
    "shops" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/ddc2f6ac-76dd-4353-887a-84cd56403a85/shops"
    },
    "postalAddress" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/ddc2f6ac-76dd-4353-887a-84cd56403a85/address"
    },
    "agreementSets" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/ddc2f6ac-76dd-4353-887a-84cd56403a85/agreementsets"
    },
    "contacts" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/ddc2f6ac-76dd-4353-887a-84cd56403a85/contacts"
    },
    "downstreamPsps" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/ddc2f6ac-76dd-4353-887a-84cd56403a85/downstreampsps"
    },
    "authorizedPsps" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/ddc2f6ac-76dd-4353-887a-84cd56403a85/authorizedpsps"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="giropay-psp-merchant-postal-address"><a class="link" href="#giropay-psp-merchant-postal-address">Postal address</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Endpoint for merchant address administration.</p>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-postal-address-put"><a class="link" href="#giropay-psp-merchant-postal-address-put">Create/Update a merchant’s address</a></h3>
<div class="paragraph">
<p>This endpoint can be used to both create and update a merchant’s address.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>PUT /api/psp/merchant/v1/merchants/{merchantId}/address</pre>
</div>
</div>
<div class="sect3">
<h4 id="_request_2"><a class="link" href="#_request_2">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>company</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Company name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>street</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Maximum 100 characters. Allowed: Letters, numbers, whitespaces and the special characters <code>-./,()&amp;+'</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Street.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streetNr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Maximum 10 characters. Allowed: Letters, numbers, whitespaces and the special characters <code>-./,()&amp;+</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Street number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>additionalAddressInformation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Maximum 100 characters. Allowed: Letters, numbers, whitespaces and the special characters <code>-./,()&amp;!"?+'_:´`</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional address information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zip</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Maximum 10 characters. Allowed: Letters, numbers, whitespaces and the special characters <code>-./,()&amp;</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postal code.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>city</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Maximum 100 characters. Allowed: Letters, numbers, whitespaces and the special characters <code>-./,()&amp;+'</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Town or city.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>country</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Country code following the ISO 3166-1 alpha-2 format.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_response_4"><a class="link" href="#_response_4">Response</a></h4>
<div class="paragraph">
<p>The response contains the created or updated address.
The structure is identical to the data returned in the GET call.</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_6"><a class="link" href="#_return_codes_6">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (OK)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The merchant address data has been updated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201 (Created)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The merchant address data has been created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The specified merchant does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_6"><a class="link" href="#_example_6">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">PUT /api/psp/merchant/v1/merchants/8a27c4db-5b72-41d7-adc0-28cce4ddc43b/address HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "company" : "AnyCompany",
  "street" : "Beethovenstr.",
  "streetNr" : "1",
  "additionalAddressInformation" : "Some additional information",
  "zip" : "12345",
  "city" : "Berlin",
  "country" : "DE"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 201 Created
Content-Type: application/hal+json;charset=utf-8

{
  "company" : "AnyCompany",
  "street" : "Beethovenstr.",
  "streetNr" : "1",
  "additionalAddressInformation" : "Some additional information",
  "zip" : "12345",
  "city" : "Berlin",
  "country" : "DE",
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/8a27c4db-5b72-41d7-adc0-28cce4ddc43b/address"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-postal-address-get"><a class="link" href="#giropay-psp-merchant-postal-address-get">Read a merchant’s postal address</a></h3>
<div class="literalblock">
<div class="content">
<pre>GET /api/psp/merchant/v1/merchants/{merchantId}/address</pre>
</div>
</div>
<div class="sect3">
<h4 id="_response_5"><a class="link" href="#_response_5">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>company</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Company name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>street</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Street.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streetNr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Street number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>additionalAddressInformation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional address information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zip</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postal code.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>city</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Town or city.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>country</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Country code following the ISO 3166-1 alpha-2 format.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_links_2"><a class="link" href="#_links_2">Links</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to this resource.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_7"><a class="link" href="#_return_codes_7">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address data found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested merchant does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_7"><a class="link" href="#_example_7">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/psp/merchant/v1/merchants/9fed430d-44ae-4330-bf75-6d8af7edc292/address HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "company" : "AnyCompany",
  "street" : "Beethovenstr.",
  "streetNr" : "1",
  "additionalAddressInformation" : "Some additional information",
  "zip" : "12345",
  "city" : "Berlin",
  "country" : "DE",
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/9fed430d-44ae-4330-bf75-6d8af7edc292/address"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="giropay-psp-merchant-agreement-set"><a class="link" href="#giropay-psp-merchant-agreement-set">Agreement set references</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each merchant can have multiple acquirer agreement set references, each provided with a different starting date.
The effective agreement set reference is resolved according to this starting date.
A merchant has to provide one effective acquirer agreement set reference to get activated (see <a href="#giropay-psp-merchant-base-patch">Update Merchant</a>).
Please note, that once there is no effective agreement set reference provided, no checkouts can be performed for that merchant.</p>
</div>
<div class="sect2">
<h3 id="giropay-psp-acquirer-agreement-set-get-own"><a class="link" href="#giropay-psp-acquirer-agreement-set-get-own">Read all available agreement sets</a></h3>
<div class="paragraph">
<p>This endpoint can be used to query all agreement sets that are available to create an <a href="#giropay-psp-merchant-agreement-set-post">agreement set reference</a>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /api/psp/merchant/v1/psp/agreementsets</pre>
</div>
</div>
<div class="sect3">
<h4 id="giropay-psp-acquirer-agreement-set-get-own-response"><a class="link" href="#giropay-psp-acquirer-agreement-set-get-own-response">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.agreementSets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if own or assigned agreement sets were found.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The agreement sets available for the giropay psp calling the endpoint.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_links_3"><a class="link" href="#_links_3">Links</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to this resource.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_8"><a class="link" href="#_return_codes_8">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_8"><a class="link" href="#_example_8">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/psp/merchant/v1/psp/agreementsets HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "_embedded" : {
    "agreementSets" : [ {
      "agreementSetId" : "18511562-eaab-4635-9785-792e38226715",
      "agreementSetName" : "Name of the acquirer agreement set"
    }, {
      "agreementSetId" : "b9d67c03-e9ed-4ee6-a06d-4aaaeaec194c",
      "agreementSetName" : "Name of another acquirer agreement set"
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/psp/agreementsets"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-agreement-set-post"><a class="link" href="#giropay-psp-merchant-agreement-set-post">Create an agreement set reference</a></h3>
<div class="paragraph">
<p>This endpoint can be used to assign an agreement set reference to the administrated merchant.
All agreement sets available for this can be read via the <a href="#giropay-psp-acquirer-agreement-set-get-own">get all available agreement sets</a> endpoint as described in the section above.</p>
</div>
<div class="paragraph">
<p>At this point there are additional validations.
The reason is to ensure that the payment will be processed accordingly to the planned setup, e.g. the collecting status.
An explicit requirement is an already existing <a href="#giropay-psp-merchant-postal-address">postal address</a>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>POST /api/psp/merchant/v1/merchants/{merchantId}/agreementsets</pre>
</div>
</div>
<div class="sect3">
<h4 id="_request_3"><a class="link" href="#_request_3">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>agreementSetId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Must be an agreement set id of merchant&#8217;s owning PSP.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the agreement set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Must be unique within all agreement set references of the merchant.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Start date of the agreement set reference.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_response_6"><a class="link" href="#_response_6">Response</a></h4>
<div class="paragraph">
<p>The response contains the created agreement set reference.
The structure is identical to the data returned in the <a href="#giropay-psp-merchant-agreement-set-get-response">GET</a> call.</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_9"><a class="link" href="#_return_codes_9">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The agreement set reference has been updated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The specified merchant does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NOT_AUTHORIZED_FOR_AGREEMENT_SET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The agreement is not accessible for the current authorization.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACQUIRER_AGREEMENT_SET_REFERENCE_WITH_SAME_START_DATE_ALREADY_EXISTS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">There is already an agreement set reference with the same start date
assigned to the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INVALID_COLLECTING_STATUS_SHOP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For a giropay admission agreement the requested <code>collectingEnabled</code> attribute of the shop does not match the
collecting status of the psp master data in the giropay system, see <a href="#giropay-psp-merchant-shops-post-request">Create a shop request</a>.
If the requested value is correct, please contact your giropay administrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BANK_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The BIC of one shop does not exist on an active bank in the giropay system.
If the requested value is correct, please contact your giropay administrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MISSING_CREDITOR_ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The required <code>creditorId</code> in the merchant base data is missing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>POSTAL_ADDRESS_NOT_EXISTING</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The required <code>postalAddress</code> is missing.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_9"><a class="link" href="#_example_9">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/psp/merchant/v1/merchants/c1f55468-8595-4cf6-8ae0-a04d41b7c3b2/agreementsets HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "agreementSetId" : "5588c165-6b3d-4ebc-b4d1-4e146ef74684",
  "startDate" : "2021-01-01"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 201 Created
Content-Type: application/hal+json;charset=utf-8

{
  "referenceId" : "744d0846-022a-42e4-96d4-79ff3cbac8e9",
  "agreementSetId" : "5588c165-6b3d-4ebc-b4d1-4e146ef74684",
  "startDate" : "2021-01-01",
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/c1f55468-8595-4cf6-8ae0-a04d41b7c3b2/agreementsets/744d0846-022a-42e4-96d4-79ff3cbac8e9"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-agreement-set-get"><a class="link" href="#giropay-psp-merchant-agreement-set-get">Read a merchant agreement set reference</a></h3>
<div class="paragraph">
<p>In order to query a single agreement set reference,
the IDs of the merchant and the agreement set reference are required.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /api/psp/merchant/v1/merchants/{merchantId}/agreementsets/{referenceId}</pre>
</div>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-agreement-set-get-response"><a class="link" href="#giropay-psp-merchant-agreement-set-get-response">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>referenceId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the agreement set reference.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>agreementSetId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the agreement set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Start date of the agreement set reference.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_links_4"><a class="link" href="#_links_4">Links</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to this resource.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_10"><a class="link" href="#_return_codes_10">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested merchant does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NOT_AUTHORIZED_FOR_AGREEMENT_SET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The agreement set reference is not accessible for the current authorization</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACQUIRER_AGREEMENT_SET_REFERENCE_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The specified agreement set reference does not exist for this merchant.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_10"><a class="link" href="#_example_10">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/psp/merchant/v1/merchants/be6d4ea7-874d-4770-b4d9-8e1276d10faf/agreementsets/960d08e3-f819-481b-9def-23f5941a2d99 HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "referenceId" : "960d08e3-f819-481b-9def-23f5941a2d99",
  "agreementSetId" : "0d630f6f-ac5e-446f-b75d-a1250106dd7f",
  "startDate" : "2021-01-01",
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/be6d4ea7-874d-4770-b4d9-8e1276d10faf/agreementsets/960d08e3-f819-481b-9def-23f5941a2d99"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-agreement-set-get-all"><a class="link" href="#giropay-psp-merchant-agreement-set-get-all">Read all merchant agreement set references</a></h3>
<div class="paragraph">
<p>Query all agreement set references belonging to a merchant.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /api/psp/merchant/v1/merchants/{merchantId}/agreementsets</pre>
</div>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-agreement-set-get-all-response"><a class="link" href="#giropay-psp-merchant-agreement-set-get-all-response">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.agreementSets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The list of agreement set references assigned to this merchant.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_links_5"><a class="link" href="#_links_5">Links</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the agreement set references of the merchant, see also <a href="#giropay-psp-merchant-agreement-set">Agreement set references</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_11"><a class="link" href="#_return_codes_11">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested merchant does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_11"><a class="link" href="#_example_11">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/psp/merchant/v1/merchants/577d5916-ef5a-44c0-9c91-9cfd65d50f58/agreementsets HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "_embedded" : {
    "agreementSets" : [ {
      "referenceId" : "5fd80068-cf95-4be7-8885-d7372848e0e7",
      "agreementSetId" : "3aabf158-893b-4655-ad80-f26ccacc5efa",
      "startDate" : "2021-01-01",
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/577d5916-ef5a-44c0-9c91-9cfd65d50f58/agreementsets/5fd80068-cf95-4be7-8885-d7372848e0e7"
        }
      }
    }, {
      "referenceId" : "9c566978-c5b4-4734-87fd-4f7c6e1d7f93",
      "agreementSetId" : "3aabf158-893b-4655-ad80-f26ccacc5efa",
      "startDate" : "2025-01-12",
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/577d5916-ef5a-44c0-9c91-9cfd65d50f58/agreementsets/9c566978-c5b4-4734-87fd-4f7c6e1d7f93"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/577d5916-ef5a-44c0-9c91-9cfd65d50f58/agreementsets"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-agreement-set-patch"><a class="link" href="#giropay-psp-merchant-agreement-set-patch">Update an agreement set reference</a></h3>
<div class="paragraph">
<p>This endpoint can be used to update an agreement set reference. An agreement set reference can be patched only if its start date is in the future.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>PATCH /api/psp/merchant/v1/merchants/{merchantId}/agreementsets/{referenceId}</pre>
</div>
</div>
<div class="sect3">
<h4 id="_request_4"><a class="link" href="#_request_4">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>agreementSetId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Must be an agreement set id of merchant&#8217;s owning PSP.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the agreement set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Must be unique within all agreement set references of the merchant.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Start date of the agreement set reference.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_response_7"><a class="link" href="#_response_7">Response</a></h4>
<div class="paragraph">
<p>The response contains the modified agreement set reference.
The structure is identical to the data returned in the <a href="#giropay-psp-merchant-agreement-set-get-response">GET</a> call.</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_12"><a class="link" href="#_return_codes_12">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The agreement set reference has been updated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The specified merchant does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACQUIRER_AGREEMENT_SET_REFERENCE_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The specified agreement set reference does not exist for this merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACQUIRER_AGREEMENT_SET_REFERENCE_WITH_SAME_START_DATE_ALREADY_EXISTS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">There is already an agreement set reference with the same start date
assigned to the merchant</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INVALID_COLLECTING_STATUS_SHOP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested <code>collectingEnabled</code> attribute of the shop does not match the
collecting status of the psp master data in the giropay system, see <a href="#giropay-psp-merchant-shops-post-request">Create a shop request</a>.
If the requested value is correct, please contact your giropay administrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BANK_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The BIC of one shop does not exist on an active bank in the giropay system.
If the requested value is correct, please contact your giropay administrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MISSING_CREDITOR_ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The required <code>creditorId</code> in the merchant base data is missing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>POSTAL_ADDRESS_NOT_EXISTING</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The required <code>postalAddress</code> is missing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ONLY_FUTURE_ACQUIRER_AGREEMENT_SET_REFERENCE_CAN_BE_EDITED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The specified agreement set reference cannot be deleted since its start date is not in the future.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_12"><a class="link" href="#_example_12">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">PATCH /api/psp/merchant/v1/merchants/df122797-8c5b-4125-85d3-e17540222513/agreementsets/5a52e48f-33a3-4ba3-b7d1-03c1aeb6a8f3 HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "agreementSetId" : "f7d5ae17-9126-4c54-84eb-a8828f2296cb",
  "startDate" : "2024-01-13"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "referenceId" : "5a52e48f-33a3-4ba3-b7d1-03c1aeb6a8f3",
  "agreementSetId" : "f7d5ae17-9126-4c54-84eb-a8828f2296cb",
  "startDate" : "2024-01-13",
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/df122797-8c5b-4125-85d3-e17540222513/agreementsets/5a52e48f-33a3-4ba3-b7d1-03c1aeb6a8f3"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-agreement-set-delete"><a class="link" href="#giropay-psp-merchant-agreement-set-delete">Delete an agreement set reference</a></h3>
<div class="paragraph">
<p>This endpoint can be used to delete an agreement set reference. An agreement set reference can be deleted only if its start date is in the future.</p>
</div>
<div class="sect3">
<h4 id="_request_5"><a class="link" href="#_request_5">Request</a></h4>
<div class="literalblock">
<div class="content">
<pre>DELETE /api/psp/merchant/v1/merchants/{merchantId}/agreementsets/{referenceId}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_response_8"><a class="link" href="#_response_8">Response</a></h4>
<div class="paragraph">
<p>The response does not contain a body.</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_13"><a class="link" href="#_return_codes_13">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">204 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The agreement set reference has been deleted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The specified merchant does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACQUIRER_AGREEMENT_SET_REFERENCE_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The specified agreement set reference does not exist for this merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ONLY_FUTURE_ACQUIRER_AGREEMENT_SET_REFERENCE_CAN_BE_EDITED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The specified agreement set reference cannot be deleted since its start date is not in the future.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_13"><a class="link" href="#_example_13">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">DELETE /api/psp/merchant/v1/merchants/fee1074b-9d96-43ae-9b1d-f73c3c7a0145/agreementsets/1e76b3d7-a89f-4797-96dd-27c6e8859fca HTTP/1.1
Content-Type: text/plain;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 204 No Content</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="giropay-psp-merchant-authorized-psps"><a class="link" href="#giropay-psp-merchant-authorized-psps">Authorized PSP</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>An owning giropay PSP (meaning the PSP that created the merchant) and the assigned acquirer can authorize one or multiple downstream PSPs to create checkouts in the name of a merchant.
An authorized PSP then can also read merchant base data - however, he cannot edit it.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Downstream PSP refers to a service provider connected via already existing contractual relationship with an owning PSP.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-downstream-psps-get"><a class="link" href="#giropay-psp-merchant-downstream-psps-get">Read all available downstream PSPs</a></h3>
<div class="paragraph">
<p>This endpoint can be used to read all available downstream PSPs, which can be authorized to create checkouts for the merchant’s shops.
There is no request body, the required information is part of the url and the bearer token.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /api/psp/merchant/v1/merchants/{merchantId}/downstreampsps</pre>
</div>
</div>
<div class="sect3">
<h4 id="_response_9"><a class="link" href="#_response_9">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.downstreamPsps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of downstream PSPs, including links to manage the authorization of each downstream PSP separately.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.downstreamPsps[].pspId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the downstream PSP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.downstreamPsps[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the downstream PSP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.downstreamPsps[]._links.authorization</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to manage the authorization of the downstream PSP, see also <a href="#giropay-psp-merchant-authorized-psps-put">Authorize a PSP</a> and <a href="#giropay-psp-merchant-authorized-psps-delete">Delete authorization of a PSP</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_links_6"><a class="link" href="#_links_6">Links</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to this resource.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_14"><a class="link" href="#_return_codes_14">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The specified merchant does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_14"><a class="link" href="#_example_14">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/psp/merchant/v1/merchants/08a66416-77e6-468f-8ad5-92142b9d0ce5/downstreampsps HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "_embedded" : {
    "downstreamPsps" : [ {
      "pspId" : "91f98a76-f8d4-4c15-91f9-8f0a587f5884",
      "name" : "Downstream PSP 1",
      "_links" : {
        "authorization" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/08a66416-77e6-468f-8ad5-92142b9d0ce5/authorizedpsps/91f98a76-f8d4-4c15-91f9-8f0a587f5884"
        }
      }
    }, {
      "pspId" : "383d1b43-040b-49e5-93f5-b881d1db452a",
      "name" : "Downstream PSP 2",
      "_links" : {
        "authorization" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/08a66416-77e6-468f-8ad5-92142b9d0ce5/authorizedpsps/383d1b43-040b-49e5-93f5-b881d1db452a"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/08a66416-77e6-468f-8ad5-92142b9d0ce5/downstreampsps"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-authorized-psps-put"><a class="link" href="#giropay-psp-merchant-authorized-psps-put">Authorize a PSP</a></h3>
<div class="paragraph">
<p>This endpoint can be used to authorize a downstream PSP to create checkouts for the merchant’s shops.
There is no request body, the required information is part of the url and the bearer token.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>PUT /api/psp/merchant/v1/merchants/{merchantId}/authorizedpsps/{authorizedPspId}</pre>
</div>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-authorized-psps-put-response"><a class="link" href="#giropay-psp-merchant-authorized-psps-put-response">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the merchant for which the PSP is authorized.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>authorizedPspId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the PSP, which is authorized.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the PSP, which is authorized.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_links_7"><a class="link" href="#_links_7">Links</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to this resource.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_15"><a class="link" href="#_return_codes_15">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The PSP has been authorized for the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The specified merchant does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400 (Bad Request)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PSP_NOT_A_DOWNSTREAM_PSP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The PSP to be authorized is not a downstream PSP of the owning PSP.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_15"><a class="link" href="#_example_15">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">PUT /api/psp/merchant/v1/merchants/6e01fc4d-dba7-4ecf-9f39-76afc2938c52/authorizedpsps/853c2a09-2ccc-44c2-8230-1c5bd9128d9f HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "merchantId" : "6e01fc4d-dba7-4ecf-9f39-76afc2938c52",
  "authorizedPspId" : "853c2a09-2ccc-44c2-8230-1c5bd9128d9f",
  "name" : "Authorized PSP",
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6e01fc4d-dba7-4ecf-9f39-76afc2938c52/authorizedpsps/853c2a09-2ccc-44c2-8230-1c5bd9128d9f"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-authorized-psps-get"><a class="link" href="#giropay-psp-merchant-authorized-psps-get">Read all authorized PSPs</a></h3>
<div class="paragraph">
<p>This endpoint can be used to query all PSPs that are given authorization to create checkouts for the merchant’s shops.
There is no request body, the required information is part of the url and the bearer token.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /api/psp/merchant/v1/merchants/{merchantId}/authorizedpsps</pre>
</div>
</div>
<div class="sect3">
<h4 id="_response_10"><a class="link" href="#_response_10">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.authorizedPsps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of authorized PSPs, including links to manage the authorization of each authorized PSP separately.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.authorizedPsps[].merchantId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the merchant of the authorized PSP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.authorizedPsps[].authorizedPspId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the authorized PSP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.authorizedPsps[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the authorized PSP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.authorizedPsps[]._links.self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to manage the authorization of the authorized PSP, see also <a href="#giropay-psp-merchant-authorized-psps-put">Authorize a PSP</a> and <a href="#giropay-psp-merchant-authorized-psps-delete">Delete authorization of a PSP</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_links_8"><a class="link" href="#_links_8">Links</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to this resource.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_16"><a class="link" href="#_return_codes_16">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The PSP has been authorized for the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The specified merchant does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_16"><a class="link" href="#_example_16">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/psp/merchant/v1/merchants/6e01fc4d-dba7-4ecf-9f39-76afc2938c52/authorizedpsps HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "_embedded" : {
    "authorizedPsps" : [ {
      "merchantId" : "6e01fc4d-dba7-4ecf-9f39-76afc2938c52",
      "authorizedPspId" : "2c1b27f7-c2ac-4670-8288-058e5372a5c7",
      "name" : "Authorized Payment Service Provider",
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6e01fc4d-dba7-4ecf-9f39-76afc2938c52/authorizedpsps/2c1b27f7-c2ac-4670-8288-058e5372a5c7"
        }
      }
    }, {
      "merchantId" : "6e01fc4d-dba7-4ecf-9f39-76afc2938c52",
      "authorizedPspId" : "853c2a09-2ccc-44c2-8230-1c5bd9128d9f",
      "name" : "Authorized PSP",
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6e01fc4d-dba7-4ecf-9f39-76afc2938c52/authorizedpsps/853c2a09-2ccc-44c2-8230-1c5bd9128d9f"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6e01fc4d-dba7-4ecf-9f39-76afc2938c52/authorizedpsps"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-authorized-psps-delete"><a class="link" href="#giropay-psp-merchant-authorized-psps-delete">Delete authorization of a PSP</a></h3>
<div class="paragraph">
<p>This endpoint can be used to unauthorize a downstream PSP to act in the name of the merchant.</p>
</div>
<div class="sect3">
<h4 id="_request_6"><a class="link" href="#_request_6">Request</a></h4>
<div class="literalblock">
<div class="content">
<pre>DELETE /api/psp/merchant/v1/merchants/{merchantId}/authorizedpsps/{authorizedPspId}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_response_11"><a class="link" href="#_response_11">Response</a></h4>
<div class="paragraph">
<p>The response does not contain a body.</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_17"><a class="link" href="#_return_codes_17">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">204 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authorization has been deleted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The specified merchant does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_17"><a class="link" href="#_example_17">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">DELETE /api/psp/merchant/v1/merchants/6e01fc4d-dba7-4ecf-9f39-76afc2938c52/authorizedpsps/853c2a09-2ccc-44c2-8230-1c5bd9128d9f HTTP/1.1
Content-Type: text/plain;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 204 No Content</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="giropay-psp-merchant-shops"><a class="link" href="#giropay-psp-merchant-shops">Shops</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each merchant can have multiple shops.
A merchant must have at least one shop before it can be activated.</p>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-shops-post"><a class="link" href="#giropay-psp-merchant-shops-post">Create a shop</a></h3>
<div class="literalblock">
<div class="content">
<pre>POST /api/psp/merchant/v1/merchants/{merchantId}/shops</pre>
</div>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-shops-post-request"><a class="link" href="#giropay-psp-merchant-shops-post-request">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. One of <code>WEB_SHOP</code>, <code>APP_SHOP</code>, or <code>POS_SHOP</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shop type, either a web shop, app shop, or point of sale shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory if the shop is a web shop, otherwise the field must be empty. If present, must follow the https protocol. Letters in host name and domain name must be lowercase.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the shop&#8217;s website.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantCategory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant category code (MCC) following the ISO 18245 format.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fraudEmail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email address of the fraud contact.<br>
 If not specified, the field will be set to the same value as <code>disputeEmail</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>disputeEmail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An email address used for any kind of disputes (exception: fraud). If not specified, the associated acquirer&#8217;s dispute email address is contacted in case of issues.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bankAccountIban</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Must follow the ISO 7064 format.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IBAN of the shop&#8217;s bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bankAccountBic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
 Must be a valid BIC for an existing bank in the giropay system. Capital letters only.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The BIC of the shop&#8217;s account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bankAccountOwnerName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Maximum 27 characters from the SEPA character set.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the owner of the shop&#8217;s bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>refundBankAccountIban</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Must follow the ISO 7064 format and must belong to the same bank as the shop&#8217;s bank account.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IBAN of the shop&#8217;s refund bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectingEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory if the collecting status of the owning giropay PSP is set to <code>MIXED</code>.<br>
 Optional if the owning giropay PSP either never or exclusively collects for merchants. Then <code>collectingEnabled</code> has to match the collecting status of the PSP master data in the giropay system.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the created bank account IBAN of the shop is a bank account of the owning giropay PSP.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_response_12"><a class="link" href="#_response_12">Response</a></h4>
<div class="paragraph">
<p>In the response, the data of the created shop is returned.
The structure is identical to the data returned from the <a href="#giropay-psp-merchant-shops-get-response">GET</a> call.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shopId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shop type, either a web shop, app shop, or point of sale shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if the shop is a web shop, otherwise empty.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the shop&#8217;s website.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantCategory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant category code (MCC) following the ISO 18245 format.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fraudEmail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email address of the fraud contact.<br>
 If not specified, the field will be set to the same value as <code>disputeEmail</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>disputeEmail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An email address used for any kind of disputes (exception: fraud). If not specified, the associated acquirer&#8217;s dispute email address is contacted in case of issues.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantAuthorizationReference</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant authorization reference. The reference must be provided when creating a checkout for the merchant shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bankAccountIban</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IBAN of the shop&#8217;s bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bankAccountBic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The BIC of the shop&#8217;s account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bankAccountOwnerName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the owner of the shop&#8217;s bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>refundBankAccountIban</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if the IBAN was set.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IBAN of the shop&#8217;s refund bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectingEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the created bank account IBAN of the shop is a bank account of the owning giropay PSP.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_18"><a class="link" href="#_return_codes_18">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201 (Created)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The shop was created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INVALID_COLLECTING_STATUS_SHOP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested <code>collectingEnabled</code> attribute of the shop does not match the collecting status of the psp master data in the giropay system. If the requested value is correct, please contact your giropay administrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BANK_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. The BIC of one shop does not exist on an active bank in the giropay system.</p>
<p class="tableblock">2. The requested <code>refundBankAccountIban</code> does not belong to any active bank in the giropay system.</p>
<p class="tableblock">If the requested values are correct, please contact your giropay administrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REFUND_IBAN_DOES_NOT_MATCH_TRANSFER_BANK</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested <code>refundBankAccountIban</code> does not belong to the shop’s bank.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BANK_ACCOUNT_IBAN_AND_BIC_DO_NOT_MATCH</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IBAN and BIC do not belong to the same bank.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_18"><a class="link" href="#_example_18">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/psp/merchant/v1/merchants/f8a3a796-f6aa-4ce6-b188-7a70e5fd02e9/shops HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "name" : "Anyshop",
  "type" : "WEB_SHOP",
  "url" : "http://www.anyshop.example.com",
  "merchantCategory" : "1520",
  "bankAccountIban" : "DE37500105172313797565",
  "bankAccountBic" : "INGDDEFFXXX",
  "bankAccountOwnerName" : "Some BankAccountOwner",
  "fraudEmail" : "fraud@mail.de",
  "disputeEmail" : "dispute@paydirekt.de",
  "collectingEnabled" : true,
  "refundBankAccountIban" : "DE88500105176132978326"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 201 Created
Content-Type: application/hal+json;charset=utf-8

{
  "shopId" : "9b48fc70-d81e-4fa5-857c-d8a8c709680f",
  "name" : "Anyshop",
  "type" : "WEB_SHOP",
  "url" : "http://www.anyshop.example.com",
  "merchantCategory" : "1520",
  "fraudEmail" : "fraud@mail.de",
  "disputeEmail" : "dispute@paydirekt.de",
  "merchantAuthorizationReference" : "A_bk8jKDP5gHL99RDpfioB2PNy7TH3gm_bdPvs0ANUg=",
  "bankAccountIban" : "DE37500105172313797565",
  "bankAccountBic" : "INGDDEFFXXX",
  "bankAccountOwnerName" : "Some BankAccountOwner",
  "refundBankAccountIban" : "DE88500105176132978326",
  "collectingEnabled" : true,
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/f8a3a796-f6aa-4ce6-b188-7a70e5fd02e9/shops/9b48fc70-d81e-4fa5-857c-d8a8c709680f"
    },
    "logo" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/f8a3a796-f6aa-4ce6-b188-7a70e5fd02e9/shops/9b48fc70-d81e-4fa5-857c-d8a8c709680f/logo"
    }
  }
}</code></pre>
</div>
</div>
<div id="giropay-psp-merchant-shops-get" class="paragraph">
<p>There is one endpoint for reading either all shops or a specific shop of a merchant.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_read_a_shop"><a class="link" href="#_read_a_shop">Read a shop</a></h3>
<div class="paragraph">
<p>The query of a specific shop is done by specifying the merchant ID as well as the ID of the shop.</p>
</div>
<div class="sect3">
<h4 id="_request_7"><a class="link" href="#_request_7">Request</a></h4>
<div class="literalblock">
<div class="content">
<pre>GET /api/psp/merchant/v1/merchants/{merchantId}/shops/{shopId}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-shops-get-response"><a class="link" href="#giropay-psp-merchant-shops-get-response">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shopId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shop type, either a web shop, app shop, or point of sale shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if the shop is a web shop, otherwise empty.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the shop&#8217;s website.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantCategory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant category code (MCC) following the ISO 18245 format.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fraudEmail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email address of the fraud contact.<br>
 If not specified, the field will be set to the same value as <code>disputeEmail</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>disputeEmail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An email address used for any kind of disputes (exception: fraud). If not specified, the associated acquirer&#8217;s dispute email address is contacted in case of issues.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantAuthorizationReference</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant authorization reference. The reference must be provided when creating a checkout for the merchant shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bankAccountIban</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IBAN of the shop&#8217;s bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bankAccountBic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The BIC of the shop&#8217;s account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bankAccountOwnerName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the owner of the shop&#8217;s bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>refundBankAccountIban</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if the IBAN was set.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IBAN of the shop&#8217;s refund bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectingEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the created bank account IBAN of the shop is a bank account of the owning giropay PSP.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_links_9"><a class="link" href="#_links_9">Links</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to this resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to logo resources of the shop.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_19"><a class="link" href="#_return_codes_19">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shop found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested merchant does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SHOP_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested shop does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_19"><a class="link" href="#_example_19">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/psp/merchant/v1/merchants/c3ccdf59-1f44-42dc-ae7f-2295ace24a82/shops/d2c06bc2-1218-43a5-8dca-32eafa8c8942 HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "shopId" : "d2c06bc2-1218-43a5-8dca-32eafa8c8942",
  "name" : "Anyshop",
  "type" : "WEB_SHOP",
  "url" : "http://www.anyshop.example.com",
  "merchantCategory" : "1520",
  "fraudEmail" : "fraud@mail.de",
  "disputeEmail" : "dispute@mail.de",
  "merchantAuthorizationReference" : "ZVrSGqgy8JYIMsbg8XgM4_fV76-NfeLbaPOaKJPd-rE=",
  "bankAccountIban" : "DE37500105172313797565",
  "bankAccountBic" : "INGDDEFFXXX",
  "bankAccountOwnerName" : "Some BankAccountOwner",
  "refundBankAccountIban" : "DE88500105176132978326",
  "collectingEnabled" : false,
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/c3ccdf59-1f44-42dc-ae7f-2295ace24a82/shops/d2c06bc2-1218-43a5-8dca-32eafa8c8942"
    },
    "logo" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/c3ccdf59-1f44-42dc-ae7f-2295ace24a82/shops/d2c06bc2-1218-43a5-8dca-32eafa8c8942/logo"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_read_all_shops"><a class="link" href="#_read_all_shops">Read all shops</a></h3>
<div class="literalblock">
<div class="content">
<pre>GET /api/psp/merchant/v1/merchants/{merchantId}/shops</pre>
</div>
</div>
<div class="sect3">
<h4 id="_response_13"><a class="link" href="#_response_13">Response</a></h4>
<div class="paragraph">
<p>The response consists of a list of shops as listed in the <a href="#giropay-psp-merchant-shops-get-response">response</a> of a single call (including the respective links to the shop resource).</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_20"><a class="link" href="#_return_codes_20">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shop found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested merchant does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_20"><a class="link" href="#_example_20">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/psp/merchant/v1/merchants/5591b4f0-1d27-473f-950d-41885fc216fd/shops HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "_embedded" : {
    "shops" : [ {
      "shopId" : "fcc22ecf-c2d3-457d-9879-8c4bfffe5aea",
      "name" : "Anyshop",
      "type" : "WEB_SHOP",
      "url" : "http://www.anyshop.example.com",
      "merchantCategory" : "1520",
      "fraudEmail" : "fraud@mail.de",
      "disputeEmail" : "dispute@mail.de",
      "merchantAuthorizationReference" : "rx6NWqAuhaDaProG49FY5S7OoNEy8q0aR5O81RE_Lrk=",
      "bankAccountIban" : "DE37500105172313797565",
      "bankAccountBic" : "INGDDEFFXXX",
      "bankAccountOwnerName" : "Some BankAccountOwner",
      "refundBankAccountIban" : "DE88500105176132978326",
      "collectingEnabled" : false,
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/5591b4f0-1d27-473f-950d-41885fc216fd/shops/fcc22ecf-c2d3-457d-9879-8c4bfffe5aea"
        },
        "logo" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/5591b4f0-1d27-473f-950d-41885fc216fd/shops/fcc22ecf-c2d3-457d-9879-8c4bfffe5aea/logo"
        }
      }
    }, {
      "shopId" : "d4d7cf4c-5efc-4c99-b30f-c9e5425c2edf",
      "name" : "Anyshop",
      "type" : "WEB_SHOP",
      "url" : "http://www.anyshop.example.com",
      "merchantCategory" : "1520",
      "fraudEmail" : "fraud@mail.de",
      "disputeEmail" : "dispute@mail.de",
      "merchantAuthorizationReference" : "PA0zzG46zmfBaGNcSFgFpXNd-Yw4HvNiyTDN_reG-eM=",
      "bankAccountIban" : "DE37500105172313797565",
      "bankAccountBic" : "INGDDEFFXXX",
      "bankAccountOwnerName" : "Some BankAccountOwner",
      "refundBankAccountIban" : "DE88500105176132978326",
      "collectingEnabled" : false,
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/5591b4f0-1d27-473f-950d-41885fc216fd/shops/d4d7cf4c-5efc-4c99-b30f-c9e5425c2edf"
        },
        "logo" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/5591b4f0-1d27-473f-950d-41885fc216fd/shops/d4d7cf4c-5efc-4c99-b30f-c9e5425c2edf/logo"
        }
      }
    } ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-shops-patch"><a class="link" href="#giropay-psp-merchant-shops-patch">Patch a shop</a></h3>
<div class="paragraph">
<p>The query for a specific shop has to include the merchant ID as well as the ID of the shop.</p>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-shops-patch-request"><a class="link" href="#giropay-psp-merchant-shops-patch-request">Request</a></h4>
<div class="literalblock">
<div class="content">
<pre>PATCH /api/psp/merchant/v1/merchants/{merchantId}/shops/{shopId}</pre>
</div>
</div>
<div class="paragraph">
<p>All properties are optional. Properties that should not be changed have to be absent in the request.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must be a valid Url.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the shop&#8217;s website.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantCategory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant category code (MCC) following the ISO 18245 format.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fraudEmail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email address of the fraud contact.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>disputeEmail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An email address used for any kind of disputes (exception: fraud). If not specified, the associated acquirer&#8217;s dispute email address is contacted in case of issues.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bankAccountIban</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Must follow the ISO 7064 format.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IBAN of the shop&#8217;s bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bankAccountBic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must be a valid BIC for an existing bank in the giropay system. Capital letters only.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The BIC of the shop&#8217;s account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bankAccountOwnerName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the owner of the shop&#8217;s bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>refundBankAccountIban</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Must follow the ISO 7064 format and must belong to the same bank as the shop&#8217;s bank account.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IBAN of the shop&#8217;s refund bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectingEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory if the collecting status of the owning giropay PSP is set to <code>MIXED</code>.<br>
 Optional if the owning giropay PSP either never or exclusively collects for merchants. Then <code>collectingEnabled</code> has to match the collecting status of the PSP master data in the giropay system.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the created bank account IBAN of the shop is a bank account of the owning giropay PSP.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_response_14"><a class="link" href="#_response_14">Response</a></h4>
<div class="paragraph">
<p>In the response, the data of the patched shop is returned.
The structure is identical to the data returned from the <a href="#giropay-psp-merchant-shops-get-response">GET</a> call.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shopId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shop type, either a web shop, app shop, or point of sale shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if the shop is a web shop, otherwise empty.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the shop&#8217;s website.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantCategory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant category code (MCC) following the ISO 18245 format.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fraudEmail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email address of the fraud contact.<br>
 If not specified, the field will be set to the same value as <code>disputeEmail</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>disputeEmail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An email address used for any kind of disputes (exception: fraud). If not specified, the associated acquirer&#8217;s dispute email address is contacted in case of issues.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantAuthorizationReference</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant authorization reference. The reference must be provided when creating a checkout for the merchant shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bankAccountIban</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IBAN of the shop&#8217;s bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bankAccountBic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The BIC of the shop&#8217;s account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bankAccountOwnerName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the owner of the shop&#8217;s bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>refundBankAccountIban</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Present if the IBAN was set.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IBAN of the shop&#8217;s refund bank account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectingEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the created bank account IBAN of the shop is a bank account of the owning giropay PSP.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_21"><a class="link" href="#_return_codes_21">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shop found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested merchant does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SHOP_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested shop does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INVALID_COLLECTING_STATUS_SHOP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested <code>collectingEnabled</code> attribute of the shop does not match the collecting status of the psp master data in the giropay system. If the requested value is correct, please contact your giropay administrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BANK_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. The BIC of one shop does not exist on an active bank in the giropay system.</p>
<p class="tableblock">2. The requested <code>refundBankAccountIban</code> does not belong to any active bank in the giropay system.</p>
<p class="tableblock">If the requested values are correct, please contact your giropay administrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REFUND_IBAN_DOES_NOT_MATCH_TRANSFER_BANK</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested <code>refundBankAccountIban</code> does not belong to the shop’s bank.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BANK_ACCOUNT_IBAN_AND_BIC_DO_NOT_MATCH</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IBAN and BIC do not belong to the same bank.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_21"><a class="link" href="#_example_21">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">PATCH /api/psp/merchant/v1/merchants/b64f6d02-efb8-4e70-83f8-e108da125ed2/shops/09bf458e-735a-4e23-a5a5-d6fe3ac4de5d HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "name" : "shopName",
  "url" : "https://giropay.de",
  "merchantCategory" : "3015",
  "fraudEmail" : "fraud@mail.com",
  "disputeEmail" : "dispute@mail.com",
  "bankAccountIban" : "DE54500105171238439739",
  "bankAccountBic" : "INGDDEFFXXX",
  "bankAccountOwnerName" : "Some BankAccountOwner",
  "collectingEnabled" : true,
  "refundBankAccountIban" : "DE39500105171438272716"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "shopId" : "09bf458e-735a-4e23-a5a5-d6fe3ac4de5d",
  "name" : "shopName",
  "type" : "WEB_SHOP",
  "url" : "https://giropay.de",
  "merchantCategory" : "3015",
  "fraudEmail" : "fraud@mail.com",
  "disputeEmail" : "dispute@mail.com",
  "merchantAuthorizationReference" : "O4twk5iGeo4OyEuCCFc7pGFA0dcLGdwUZnib__QB5H4=",
  "bankAccountIban" : "DE54500105171238439739",
  "bankAccountBic" : "INGDDEFFXXX",
  "bankAccountOwnerName" : "Some BankAccountOwner",
  "refundBankAccountIban" : "DE39500105171438272716",
  "collectingEnabled" : true,
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/b64f6d02-efb8-4e70-83f8-e108da125ed2/shops/09bf458e-735a-4e23-a5a5-d6fe3ac4de5d"
    },
    "logo" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/b64f6d02-efb8-4e70-83f8-e108da125ed2/shops/09bf458e-735a-4e23-a5a5-d6fe3ac4de5d/logo"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-shops-delete"><a class="link" href="#giropay-psp-merchant-shops-delete">Delete a shop</a></h3>
<div class="sect3">
<h4 id="_request_8"><a class="link" href="#_request_8">Request</a></h4>
<div class="literalblock">
<div class="content">
<pre>DELETE /api/psp/merchant/v1/merchants/{merchantId}/shops/{shopId}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_response_15"><a class="link" href="#_response_15">Response</a></h4>
<div class="paragraph">
<p>The response does not contain a body.</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_22"><a class="link" href="#_return_codes_22">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">204 (No Content)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The shop data was deleted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested merchant does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SHOP_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested shop does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ILLEGAL_MERCHANT_STATUS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The status of the merchant linked to the shop is required to be <code>NOT_ACTIVE</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_22"><a class="link" href="#_example_22">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">DELETE /api/psp/merchant/v1/merchants/2e4054c4-8505-4164-9cfb-800f65801ef5/shops/2b1ceb7f-d406-4138-9b84-9739216d8958 HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 204 No Content</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-shops-logo"><a class="link" href="#giropay-psp-merchant-shops-logo">Shop Logos</a></h3>
<div class="paragraph">
<p>The logo of a merchant’s shop can be administrated via the separate endpoint described in this section.</p>
</div>
<h3 id="giropay-psp-merchant-shops-logo-post" class="discrete">Create/Update a shop logo</h3>
<div class="paragraph">
<p>A logo can be assigned to a merchant’s shop via this endpoint.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>POST /api/psp/merchant/v1/merchants/{merchantId}/shops/{shopId}/logo</pre>
</div>
</div>
<div class="paragraph">
<p>The logo image will be transmitted as multipart file in the request body.
The name of the parameter for the file must be <code>logo</code>.
The requirements for the image are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Image type must be either <code>png</code> or <code>jpg</code></p>
</li>
<li>
<p>Resolution at a maximum of 1024 x 1024 (1 MP)</p>
</li>
<li>
<p>File size at a maximum of 512 kB</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the response only a status code will be transmitted.</p>
</div>
<div class="sect3">
<h4 id="_return_codes_23"><a class="link" href="#_return_codes_23">Return Codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status Code</th>
<th class="tableblock halign-left valign-top">Message Code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201 (Created)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Logo has been created/updated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See also <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested merchant does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SHOP_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested shop does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_23"><a class="link" href="#_example_23">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/psp/merchant/v1/merchants/91173e1e-6e6c-4479-9c6a-9b03d2e9d54f/shops/e2a58c48-e5e4-4b0d-9198-666ab08de69d/logo HTTP/1.1
Content-Type: multipart/form-data; boundary=6o2knFse3p53ty9dmcQvWAIx1zInP11uCfbm
Authorization: Bearer &lt;access_token&gt;

--6o2knFse3p53ty9dmcQvWAIx1zInP11uCfbm
Content-Disposition: form-data; name=logo; filename=Retina-Logo.png
Content-Type: image/png</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 201 Created</code></pre>
</div>
</div>
<h3 id="giropay-psp-merchant-shops-logo-get" class="discrete">Read a shop logo</h3>
<div class="paragraph">
<p>A logo of a shop can be retrieved via this endpoint, which can be accessed without authentication.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /api/psp/merchant/v1/merchants/{merchantId}/shops/{shopId}/logo</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_response_16"><a class="link" href="#_response_16">Response</a></h4>
<div class="paragraph">
<p>As a response, the endpoint returns the logo of the merchant.</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_24"><a class="link" href="#_return_codes_24">Return Codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status Code</th>
<th class="tableblock halign-left valign-top">Message Code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The logo has been returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested logo could not be found.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_24"><a class="link" href="#_example_24">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/psp/merchant/v1/merchants/8a2a4bfd-b657-4f2d-bd2d-fd6bf5f108fb/shops/2539c367-d6d6-4efc-8c7e-a21a264d5e51/logo HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: image/png;charset=utf-8</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="giropay-psp-merchant-contacts"><a class="link" href="#giropay-psp-merchant-contacts">Contacts</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each merchant can have multiple contacts with different roles.</p>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-contacts-post"><a class="link" href="#giropay-psp-merchant-contacts-post">Create contacts</a></h3>
<div class="paragraph">
<p>Creates one or more contacts for an existing merchant.
By providing an array of contact roles, multiple contacts can be created at once.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>POST /api/psp/merchant/v1/merchants/{merchantId}/contacts</pre>
</div>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-contacts-post-request"><a class="link" href="#giropay-psp-merchant-contacts-post-request">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>familyName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Maximum 100 characters. Allowed: Letters, numbers, whitespaces and the special characters <code>-./,()&amp;+'</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>givenName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">First name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>email</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>phone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Maximum 20 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Phone number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mobilePhone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Maximum 20 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile phone number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>responsibility</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Maximum 1000 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description of the contact&#8217;s responsibility.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>address</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#PostalAddress">PostalAddress</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#PostalAddress">PostalAddress</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>roles</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. An array which contains one or more of the following values: <code>BUSINESS</code>, <code>TECHNICAL</code>, <code>DISPUTE</code>, <code>FRAUD</code>, <code>FEE_SETTLEMENT</code>, <code>LEGAL_REPRESENTATIVE</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Roles.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_response_17"><a class="link" href="#_response_17">Response</a></h4>
<div class="paragraph">
<p>Returns a list of contacts.
The response is the same as for querying all contacts via <a href="#giropay-psp-merchant-contacts-get-response">GET</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_25"><a class="link" href="#_return_codes_25">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201 (Created)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or more contacts have been created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400 (Bad Request)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VALIDATION_ERROR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request is syntactically invalid.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400 (Bad Request)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CONTACT_ROLES_NOT_VALID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The given array of contact roles contains invalid values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400 (Bad Request)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INVALID_PHONENUMBER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The given phone number is invalid.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_25"><a class="link" href="#_example_25">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/psp/merchant/v1/merchants/97704ab2-ceec-4a80-b233-bdac7da6b830/contacts HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "familyName" : "Schmitt",
  "givenName" : "Patrick",
  "email" : "patrick.schmitt@example.org",
  "phone" : "+49 30 1234567",
  "roles" : [ "BUSINESS", "DISPUTE" ],
  "mobilePhone" : "+49 170 1234567",
  "responsibility" : "some responsbility",
  "address" : {
    "company" : "AnyCompany",
    "street" : "Beethovenstr",
    "streetNr" : "1",
    "additionalAddressInformation" : "Some additional information",
    "zip" : "12345",
    "city" : "Berlin",
    "country" : "DE"
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 201 Created
Content-Type: application/hal+json;charset=utf-8

{
  "_embedded" : {
    "contacts" : [ {
      "contactId" : "56bf2b1d-1119-4b1f-ade7-39c536fc3544",
      "familyName" : "Schmitt",
      "givenName" : "Patrick",
      "email" : "patrick.schmitt@example.org",
      "phone" : "+49 30 1234567",
      "mobilePhone" : "+49 170 1234567",
      "responsibility" : "some responsbility",
      "role" : "BUSINESS",
      "address" : {
        "company" : "AnyCompany",
        "street" : "Beethovenstr",
        "streetNr" : "1",
        "additionalAddressInformation" : "Some additional information",
        "zip" : "12345",
        "city" : "Berlin",
        "country" : "DE"
      },
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/97704ab2-ceec-4a80-b233-bdac7da6b830/contacts/56bf2b1d-1119-4b1f-ade7-39c536fc3544"
        }
      }
    }, {
      "contactId" : "2495fe41-4035-415c-83b4-a8e1df36ead2",
      "familyName" : "Schmitt",
      "givenName" : "Patrick",
      "email" : "patrick.schmitt@example.org",
      "phone" : "+49 30 1234567",
      "mobilePhone" : "+49 170 1234567",
      "responsibility" : "some responsbility",
      "role" : "DISPUTE",
      "address" : {
        "company" : "AnyCompany",
        "street" : "Beethovenstr",
        "streetNr" : "1",
        "additionalAddressInformation" : "Some additional information",
        "zip" : "12345",
        "city" : "Berlin",
        "country" : "DE"
      },
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/97704ab2-ceec-4a80-b233-bdac7da6b830/contacts/2495fe41-4035-415c-83b4-a8e1df36ead2"
        }
      }
    } ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-contacts-get"><a class="link" href="#giropay-psp-merchant-contacts-get">Read a contact</a></h3>
<div class="paragraph">
<p>In order to query a single contact, the IDs of both the merchant and the contact are required.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /api/psp/merchant/v1/merchants/{merchantId}/contacts/{contactId}</pre>
</div>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-contacts-get-response"><a class="link" href="#giropay-psp-merchant-contacts-get-response">Response</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>contactId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the contact.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>familyName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>givenName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">First name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>email</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>phone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Phone number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mobilePhone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile phone number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>responsibility</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description of the contact&#8217;s responsibility.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>address</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#PostalAddress">PostalAddress</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#PostalAddress">PostalAddress</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>role</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Role.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_links_10"><a class="link" href="#_links_10">Links</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to this resource.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_26"><a class="link" href="#_return_codes_26">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contact found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested merchant does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CONTACT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested contact does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_26"><a class="link" href="#_example_26">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/psp/merchant/v1/merchants/5517d0d3-6e1c-4211-8b31-a54cf7c77693/contacts/8205af4c-1885-4e61-9584-6257870ad414 HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "contactId" : "8205af4c-1885-4e61-9584-6257870ad414",
  "familyName" : "Meyer",
  "givenName" : "Lisa",
  "email" : "lisa.meyer@example.org",
  "phone" : "+49 30 12345678",
  "mobilePhone" : "+49 170 12345678",
  "responsibility" : "Some comment regarding this dispute contact.",
  "role" : "DISPUTE",
  "address" : {
    "company" : "AnyCompany",
    "street" : "Beethovenstr.",
    "streetNr" : "1",
    "additionalAddressInformation" : "Some additional information",
    "zip" : "12345",
    "city" : "Berlin",
    "country" : "DE"
  },
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/5517d0d3-6e1c-4211-8b31-a54cf7c77693/contacts/8205af4c-1885-4e61-9584-6257870ad414"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_read_all_contacts"><a class="link" href="#_read_all_contacts">Read all contacts</a></h3>
<div class="paragraph">
<p>Query all contacts belonging to a merchant.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /api/psp/merchant/v1/merchants/{merchantId}/contacts</pre>
</div>
</div>
<div class="sect3">
<h4 id="_response_18"><a class="link" href="#_response_18">Response</a></h4>
<div class="paragraph">
<p>A list of contacts. Each entry in the list is a separate contact object, as described in the <a href="#giropay-psp-merchant-contacts-get-response">response of a single contact</a>.
If no contacts are available, the resulting list will be empty.</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_27"><a class="link" href="#_return_codes_27">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contact(s) found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested merchant does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_27"><a class="link" href="#_example_27">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">GET /api/psp/merchant/v1/merchants/4e43c230-ce89-4e8a-986d-98887057a39d/contacts HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "_embedded" : {
    "contacts" : [ {
      "contactId" : "b7b91fb5-6149-4781-ac15-958c7eb72bb4",
      "familyName" : "Schmitt",
      "givenName" : "Patrick",
      "email" : "patrick.schmitt@example.org",
      "phone" : "+49 30 1234567",
      "mobilePhone" : "+49 170 1234567",
      "role" : "BUSINESS",
      "address" : {
        "company" : "AnyCompany",
        "street" : "Beethovenstr.",
        "streetNr" : "1",
        "additionalAddressInformation" : "Some additional information",
        "zip" : "12345",
        "city" : "Berlin",
        "country" : "DE"
      },
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/4e43c230-ce89-4e8a-986d-98887057a39d/contacts/b7b91fb5-6149-4781-ac15-958c7eb72bb4"
        }
      }
    }, {
      "contactId" : "67006ee1-8ad5-4bc2-98c3-d18fbff422a8",
      "familyName" : "Meyer",
      "givenName" : "Lisa",
      "email" : "lisa.meyer@example.org",
      "phone" : "+49 30 12345678",
      "mobilePhone" : "+49 170 12345678",
      "responsibility" : "Some comment regarding this dispute contact.",
      "role" : "DISPUTE",
      "address" : {
        "company" : "AnyCompany",
        "street" : "Beethovenstr.",
        "streetNr" : "1",
        "additionalAddressInformation" : "Some additional information",
        "zip" : "12345",
        "city" : "Berlin",
        "country" : "DE"
      },
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/4e43c230-ce89-4e8a-986d-98887057a39d/contacts/67006ee1-8ad5-4bc2-98c3-d18fbff422a8"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/4e43c230-ce89-4e8a-986d-98887057a39d/contacts"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-contacts-patch"><a class="link" href="#giropay-psp-merchant-contacts-patch">Patch a contact</a></h3>
<div class="paragraph">
<p>The query for a specific contact has to include the merchant ID as well as the ID of the contact.</p>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-contacts-patch-request"><a class="link" href="#giropay-psp-merchant-contacts-patch-request">Request</a></h4>
<div class="literalblock">
<div class="content">
<pre>PATCH /api/psp/merchant/v1/merchants/{merchantId}/contacts/{contactId}</pre>
</div>
</div>
<div class="paragraph">
<p>All properties are optional. Properties that should not be changed have to be absent in the request.</p>
</div>
<div class="paragraph">
<p>Please note that single properties of the address cannot be patched. The address can only be changed as a whole by providing a valid <a href="#PostalAddress">PostalAddress</a> request with all its properties being present.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>familyName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters. Allowed: Letters, numbers, whitespaces and the special characters <code>-./,()&amp;+'</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>givenName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">First name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>email</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>phone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 20 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Phone number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mobilePhone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 20 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile phone number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>responsibility</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum 1000 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description of the contact&#8217;s responsibility.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>address</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#PostalAddress">PostalAddress</a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#PostalAddress">PostalAddress</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>role</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One of the following values: <code>BUSINESS</code>, <code>TECHNICAL</code>, <code>DISPUTE</code>, <code>FRAUD</code>, <code>FEE_SETTLEMENT</code>, <code>LEGAL_REPRESENTATIVE</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Role.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_response_19"><a class="link" href="#_response_19">Response</a></h4>
<div class="paragraph">
<p>In the response, the data of the patched contact is returned.
The structure is identical to the data returned from the <a href="#giropay-psp-merchant-contacts-get-response">GET</a> call.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>contactId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the contact.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>familyName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>givenName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">First name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>email</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>phone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Phone number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mobilePhone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile phone number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>responsibility</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description of the contact&#8217;s responsibility.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>address</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#PostalAddress">PostalAddress</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#PostalAddress">PostalAddress</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>role</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Role.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_codes_28"><a class="link" href="#_return_codes_28">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 (Ok)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contact found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested merchant does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CONTACT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested contact does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_28"><a class="link" href="#_example_28">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">PATCH /api/psp/merchant/v1/merchants/f619d193-f5e4-4090-bbc6-f251ae69fa4a/contacts/85c5bfc2-3f0c-4142-87e8-4c0b95429373 HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "familyName" : "Fischer",
  "givenName" : "Emma",
  "email" : "emma.fischer@example.org",
  "phone" : "+49 30 1234567",
  "role" : "TECHNICAL",
  "mobilePhone" : "+49 178 1234567",
  "responsibility" : "Some comment",
  "address" : {
    "company" : "AnyBusiness",
    "street" : "Schillerstr",
    "streetNr" : "1",
    "additionalAddressInformation" : "Some additional information",
    "zip" : "56789",
    "city" : "Hamburg",
    "country" : "DE"
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=utf-8

{
  "contactId" : "85c5bfc2-3f0c-4142-87e8-4c0b95429373",
  "familyName" : "Fischer",
  "givenName" : "Emma",
  "email" : "emma.fischer@example.org",
  "phone" : "+49 30 1234567",
  "mobilePhone" : "+49 178 1234567",
  "responsibility" : "Some comment",
  "role" : "TECHNICAL",
  "address" : {
    "company" : "AnyBusiness",
    "street" : "Schillerstr",
    "streetNr" : "1",
    "additionalAddressInformation" : "Some additional information",
    "zip" : "56789",
    "city" : "Hamburg",
    "country" : "DE"
  },
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/f619d193-f5e4-4090-bbc6-f251ae69fa4a/contacts/85c5bfc2-3f0c-4142-87e8-4c0b95429373"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-contacts-delete"><a class="link" href="#giropay-psp-merchant-contacts-delete">Delete a contact</a></h3>
<div class="sect3">
<h4 id="_request_9"><a class="link" href="#_request_9">Request</a></h4>
<div class="literalblock">
<div class="content">
<pre>DELETE /api/psp/merchant/v1/merchants/{merchantId}/contacts/{contactId}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_response_20"><a class="link" href="#_response_20">Response</a></h4>
<div class="paragraph">
<p>The response does not contain a body.</p>
</div>
</div>
<div class="sect3">
<h4 id="_return_codes_29"><a class="link" href="#_return_codes_29">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">204 (No Content)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The contact was deleted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MERCHANT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested merchant does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404 (Not Found)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CONTACT_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested contact does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_29"><a class="link" href="#_example_29">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">DELETE /api/psp/merchant/v1/merchants/491f334d-bca9-4cec-96ad-748c6006192a/contacts/efd4450e-c78b-4ddc-a89b-7ff996b8d5ca HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 204 No Content</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="giropay-psp-merchant-complete"><a class="link" href="#giropay-psp-merchant-complete">Complete merchant</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>All resources described in the previous sections that make up a complete merchant can alternatively be created with just a single request.
To this end, the sub resources for postal address, shops, agreement sets, and contacts can be embedded within the request for creating the merchant’s base data.
Additionally, the merchant status can be set to <code>ACTIVE</code> with that same request.
This results in a completely set-up and activated merchant.
The whole request is processed atomically:
Either the entire merchant resource with all its sub resources is written if it is valid and complete, or it is rejected in its entirety if a single necessary requirement is not met.
This potentially simplifies the overall process for merchant creation.</p>
</div>
<div class="sect2">
<h3 id="giropay-psp-merchant-complete-post"><a class="link" href="#giropay-psp-merchant-complete-post">Create a complete merchant</a></h3>
<div class="literalblock">
<div class="content">
<pre>POST /api/psp/merchant/v1/merchants</pre>
</div>
</div>
<div class="paragraph">
<p>A new complete merchant can be created via this endpoint.
The necessary sub resources for <a href="#giropay-psp-merchant-postal-address">postal address</a>, <a href="#giropay-psp-merchant-agreement-set">agreement set</a>, <a href="#giropay-psp-merchant-shops">shops</a>, and <a href="#giropay-psp-merchant-contacts">contacts</a> can be embedded within this request.</p>
</div>
<div class="paragraph">
<p>Please note that for creating a complete merchant in status <code>ACTIVE</code> the same requirements apply as described in  <a href="#giropay-psp-merchant-base-patch">Update Merchant</a></p>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-complete-post-request"><a class="link" href="#giropay-psp-merchant-complete-post-request">Request</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set this field to <code>ACTIVE</code> if you wish to create an active merchant. Please consider the requirements for merchant activation, see <a href="#giropay-psp-merchant-base-patch">Update Merchant</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>formOfOrganisation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Legal form, e.g., GmbH, AG, &#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commercialRegisterType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the commercial register entry (HRA/HRB).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commercialRegisterNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commercial register number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parentCorporationId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the parent corporation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>valueAddedTaxNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value added tax identification number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merchantType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Use <code>GIROPAY_MERCHANT</code> as type identifier for giropay merchants.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merchant type. Here always <code>GIROPAY_MERCHANT</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>marketingEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the acquirer has granted paydirekt GmbH the right for merchant marketing (default: <code>true</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>creditorId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory if the merchant has at least one shop with <code>collectingEnabled</code> set to <code>false</code>.<br>
 Must be a valid <code>creditorId</code> (see <a href="https://www.bundesbank.de/en/tasks/payment-systems/services/sepa/creditor-identifier/creditor-identifier-626704" target="_blank" rel="noopener">Creditor Identifier</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creditor identification number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.postalAddress</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The postal address of this managed merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.agreementSets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The list of agreement set references assigned to this merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.shops</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The list of shops owned by the managed merchant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.contacts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The list of contacts owned by the managed merchant.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-complete-post-response"><a class="link" href="#giropay-psp-merchant-complete-post-response">Response</a></h4>
<div class="paragraph">
<p>In the response, the created merchant base data is returned.
The structure is identical to the endpoint for <a href="#giropay-psp-merchant-base-get">GET</a> calls, in particular the response contains the ID of the created merchant and all links relevant for the resource.</p>
</div>
</div>
<div class="sect3">
<h4 id="giropay-psp-merchant-complete-post-returncodes"><a class="link" href="#giropay-psp-merchant-complete-post-returncodes">Return codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201 (Created)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The merchant was created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 (Unauthorized)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCESS_TOKEN_EXPIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#resource-access">Resource access</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NO_SHOP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only when activating: The merchant does not have a shop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EFFECTIVE_AGREEMENT_SET_REFERENCE_REQUIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only when activating: The merchant does not have an effective agreement set reference (see <a href="#giropay-psp-merchant-agreement-set">agreement set references</a>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INVALID_COLLECTING_STATUS_SHOP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested <code>collectingEnabled</code> attribute of one of the merchant’s shops does not match the collecting status of the psp master data in the giropay system (see <a href="#giropay-psp-merchant-shops">shops</a>). If the requested value is correct, please contact your giropay administrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BANK_NOT_FOUND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. The BIC of one shop does not exist on an active bank in the giropay system.</p>
<p class="tableblock">2. The requested <code>refundBankAccountIban</code> does not belong to any active bank in the giropay system.</p>
<p class="tableblock">If the requested values are correct, please contact your giropay administrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REFUND_IBAN_DOES_NOT_MATCH_TRANSFER_BANK</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One of the requested <code>refundBankAccountIban</code> does not belong to the corresponding shop’s bank.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MISSING_CREDITOR_ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The required <code>creditorId</code> in the merchant base data is missing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>POSTAL_ADDRESS_NOT_EXISTING</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The required <code>postalAddress</code> is missing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422 (Unprocessable Entity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BANK_ACCOUNT_IBAN_AND_BIC_DO_NOT_MATCH</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One of the IBANs and BICs do not belong to the same bank.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_30"><a class="link" href="#_example_30">Example</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">POST /api/psp/merchant/v1/merchants/ HTTP/1.1
Content-Type: application/json;charset=utf-8
Authorization: Bearer &lt;access_token&gt;

{
  "name" : "someName",
  "merchantStatus" : "ACTIVE",
  "formOfOrganisation" : "someForm",
  "commercialRegisterType" : "someCommType",
  "commercialRegisterNumber" : "someCommNumber",
  "parentCorporationId" : "someParentCorp",
  "valueAddedTaxNumber" : "someTaxNumber",
  "merchantType" : "GIROPAY_MERCHANT",
  "marketingEnabled" : true,
  "creditorId" : "DE98ZZZ09999999999",
  "_embedded" : {
    "postalAddress" : {
      "company" : "Some Company",
      "street" : "Some Street",
      "streetNr" : "42a",
      "additionalAddressInformation" : "Some Additional Information",
      "zip" : "12345",
      "city" : "Some City",
      "country" : "DE"
    },
    "agreementSets" : [ {
      "agreementSetId" : "79ede761-3594-4487-9333-0ee83d89c0a6",
      "startDate" : "2021-01-01"
    } ],
    "shops" : [ {
      "name" : "Some Shop Name",
      "type" : "WEB_SHOP",
      "url" : "https://www.someshop.invalid/",
      "merchantCategory" : "7911",
      "bankAccountIban" : "DE37500105172313797565",
      "bankAccountBic" : "INGDDEFFXXX",
      "bankAccountOwnerName" : "Some Bank Account Owner",
      "fraudEmail" : "fraud@someshop.invalid",
      "disputeEmail" : "dispute@someshop.invalid",
      "collectingEnabled" : false,
      "refundBankAccountIban" : "DE88500105176132978326"
    } ],
    "contacts" : [ {
      "familyName" : "Some Family Name",
      "givenName" : "Some Given Name",
      "email" : "someuser@someshop.invalid",
      "phone" : "+49 1234 56789",
      "roles" : [ "BUSINESS", "TECHNICAL" ],
      "mobilePhone" : "+49 1234 56789",
      "responsibility" : "Some Responsibility",
      "address" : {
        "company" : "Some Company",
        "street" : "Some Street",
        "streetNr" : "42a",
        "additionalAddressInformation" : "Some Additional Information",
        "zip" : "12345",
        "city" : "Some City",
        "country" : "DE"
      }
    } ]
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">HTTP/1.1 201 Created
Content-Type: application/hal+json;charset=utf-8

{
  "merchantId" : "6cd8dd54-b348-459f-881c-09b036cdfd3e",
  "name" : "someName",
  "merchantType" : "GIROPAY_MERCHANT",
  "formOfOrganisation" : "someForm",
  "commercialRegisterType" : "someCommType",
  "commercialRegisterNumber" : "someCommNumber",
  "parentCorporationId" : "someParentCorp",
  "valueAddedTaxNumber" : "someTaxNumber",
  "marketingEnabled" : true,
  "creditorId" : "DE98ZZZ09999999999",
  "checkoutCreationLocked" : false,
  "merchantStatus" : "ACTIVE",
  "pspId" : "4b7fa9d9-44df-47e0-90b9-750b5569d8e4",
  "_links" : {
    "self" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6cd8dd54-b348-459f-881c-09b036cdfd3e"
    },
    "shops" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6cd8dd54-b348-459f-881c-09b036cdfd3e/shops"
    },
    "postalAddress" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6cd8dd54-b348-459f-881c-09b036cdfd3e/address"
    },
    "agreementSets" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6cd8dd54-b348-459f-881c-09b036cdfd3e/agreementsets"
    },
    "contacts" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6cd8dd54-b348-459f-881c-09b036cdfd3e/contacts"
    },
    "downstreamPsps" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6cd8dd54-b348-459f-881c-09b036cdfd3e/downstreampsps"
    },
    "authorizedPsps" : {
      "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6cd8dd54-b348-459f-881c-09b036cdfd3e/authorizedpsps"
    }
  },
  "_embedded" : {
    "postalAddress" : {
      "company" : "Some Company",
      "street" : "Some Street",
      "streetNr" : "42a",
      "additionalAddressInformation" : "Some Additional Information",
      "zip" : "12345",
      "city" : "Some City",
      "country" : "DE",
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6cd8dd54-b348-459f-881c-09b036cdfd3e/address"
        }
      }
    },
    "shops" : [ {
      "shopId" : "bbfaf082-8edf-4d4f-a48a-7be571964a8f",
      "name" : "Some Shop Name",
      "type" : "WEB_SHOP",
      "url" : "https://www.someshop.invalid/",
      "merchantCategory" : "7911",
      "fraudEmail" : "fraud@someshop.invalid",
      "disputeEmail" : "dispute@someshop.invalid",
      "merchantAuthorizationReference" : "vzbowQhVqM3s99Awbwo2uxe2KiyNTSyPB_hBZ-8oEpc=",
      "bankAccountIban" : "DE37500105172313797565",
      "bankAccountBic" : "INGDDEFFXXX",
      "bankAccountOwnerName" : "Some Bank Account Owner",
      "refundBankAccountIban" : "DE88500105176132978326",
      "collectingEnabled" : false,
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6cd8dd54-b348-459f-881c-09b036cdfd3e/shops/bbfaf082-8edf-4d4f-a48a-7be571964a8f"
        },
        "logo" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6cd8dd54-b348-459f-881c-09b036cdfd3e/shops/bbfaf082-8edf-4d4f-a48a-7be571964a8f/logo"
        }
      }
    } ],
    "contacts" : [ {
      "contactId" : "97520984-6466-46da-a324-e6eaa4868b53",
      "familyName" : "Some Family Name",
      "givenName" : "Some Given Name",
      "email" : "someuser@someshop.invalid",
      "phone" : "+49 123456789",
      "mobilePhone" : "+49 123456789",
      "responsibility" : "Some Responsibility",
      "role" : "TECHNICAL",
      "address" : {
        "company" : "Some Company",
        "street" : "Some Street",
        "streetNr" : "42a",
        "additionalAddressInformation" : "Some Additional Information",
        "zip" : "12345",
        "city" : "Some City",
        "country" : "DE"
      },
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6cd8dd54-b348-459f-881c-09b036cdfd3e/contacts/97520984-6466-46da-a324-e6eaa4868b53"
        }
      }
    }, {
      "contactId" : "4ff43972-a24a-44c6-abff-b6cd0e555b60",
      "familyName" : "Some Family Name",
      "givenName" : "Some Given Name",
      "email" : "someuser@someshop.invalid",
      "phone" : "+49 123456789",
      "mobilePhone" : "+49 123456789",
      "responsibility" : "Some Responsibility",
      "role" : "BUSINESS",
      "address" : {
        "company" : "Some Company",
        "street" : "Some Street",
        "streetNr" : "42a",
        "additionalAddressInformation" : "Some Additional Information",
        "zip" : "12345",
        "city" : "Some City",
        "country" : "DE"
      },
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6cd8dd54-b348-459f-881c-09b036cdfd3e/contacts/4ff43972-a24a-44c6-abff-b6cd0e555b60"
        }
      }
    } ],
    "agreementSets" : [ {
      "referenceId" : "6a75a69a-fd83-4695-98b9-212e73276664",
      "agreementSetId" : "79ede761-3594-4487-9333-0ee83d89c0a6",
      "startDate" : "2021-01-01",
      "_links" : {
        "self" : {
          "href" : "https://api.paydirekt.de/api/psp/merchant/v1/merchants/6cd8dd54-b348-459f-881c-09b036cdfd3e/agreementsets/6a75a69a-fd83-4695-98b9-212e73276664"
        }
      }
    } ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_common_data_types"><a class="link" href="#_common_data_types">Common data types</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Besides the standard JSON data types, there are complex data types that are needed for a correct request.</p>
</div>
<div class="sect2">
<h3 id="PostalAddress"><a class="link" href="#PostalAddress">PostalAddress</a></h3>
<div class="paragraph">
<p>Data type for postal addresses.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>company</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Company name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>street</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Maximum 100 characters. Allowed: Letters, numbers, whitespaces and the special characters <code>-./,()&amp;+'</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Street.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streetNr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Maximum 10 characters. Allowed: Letters, numbers, whitespaces and the special characters <code>-./,()&amp;+</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Street number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>additionalAddressInformation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Maximum 100 characters. Allowed: Letters, numbers, whitespaces and the special characters <code>-./,()&amp;!"?+'_:´`</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional address information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zip</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Maximum 10 characters. Allowed: Letters, numbers, whitespaces and the special characters <code>-./,()&amp;</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postal code.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>city</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory. Maximum 100 characters. Allowed: Letters, numbers, whitespaces and the special characters <code>-./,()&amp;+'</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Town or city.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>country</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Country code following the ISO 3166-1 alpha-2 format.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">{
  "company" : "AnyCompany",
  "street" : "Beethovenstr.",
  "streetNr" : "1",
  "additionalAddressInformation" : "Some additional information",
  "zip" : "12345",
  "city" : "Berlin",
  "country" : "DE"
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Message"><a class="link" href="#Message">Message</a></h3>
<div class="paragraph">
<p>Messages and especially error messages.
For details on error handling see <a href="#error-messages">Error messages</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 55%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>code</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.<br>
Maximum 100 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The unique error code for this error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>severity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The error level.
The possible values are: ERROR, WARN and INFO.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 1000 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field for which this error was generated.
This field is filled in case of a <code>VALIDATION_ERROR</code> (response code 400).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reasonCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 1000 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The reason for this error as a unique code if this is not clear from the <code>code</code> field.
The <code>reasonCode</code> is meant mainly for debugging purposes; no logic should be implemented on it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logref</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.<br>
Maximum 1000 characters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A giropay-internal reference number for this error message.
Please always quote this reference number in support requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>content</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The invalid content in case of a <code>CONVERSION_ERROR</code>.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code data-lang="http" class="language-http hljs">{
  "code" : "VALIDATION_ERROR",
  "severity" : "ERROR",
  "path" : "currency",
  "reasonCode" : "INVALID_FORMAT",
  "logref" : "934180ed-ef93-4af1-835a-3071714fdce5:8t1ph9gFha1"
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sepa-characters"><a class="link" href="#sepa-characters">SEPA-compliant characters</a></h3>
<div class="paragraph">
<p>In SEPA payments, only characters of the restricted SWIFT Latin character set are allowed according to <a href="https://www.ebics.de/de/datenformate" target="_blank" rel="noopener">Annex 3 of the DFÜ Agreement</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>a b c d e f g h i j k l m n o p q r s t u v w x y z</code></p>
</li>
<li>
<p><code>A B C D E F G H I J K L M N O P Q R S T U V W X Y Z</code></p>
</li>
<li>
<p><code>0 1 2 3 4 5 6 7 8 9</code></p>
</li>
<li>
<p><code>' : ? , - ( + . ) /</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The restricted character set therefore does not include in particular: Umlauts, the € symbol, certain special characters such as the underscore, the space character or square brackets.</p>
</div>
<div class="paragraph">
<p>In addition, references, identifications and identifiers are not allowed either to start or to end with a slash „/“ or to contain a double slash „//“.</p>
</div>
<div class="paragraph">
<p>To ensure that there are no disruptions in payment transactions, only the approved characters may be used for appropriately marked attributes.</p>
</div>
<div class="paragraph">
<p>In case of use of unauthorized characters or improper use of authorized characters, a payment or even an entire payment container may be rejected.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_changelog"><a class="link" href="#_changelog">Changelog</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following table summarizes all changes to this document.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 15%;">
<col style="width: 50%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Section</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">04.07.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CHANGE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Edit BANK_NOT_FOUND exception. Indicating that bank might be an inactive bank in the giropay system.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Several sections of the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">30.03.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FIX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added usage of correct possessive apostrophe.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Several sections of the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.03.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CHANGE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Acquirer agreement set references can only be edited or deleted if they have a future start date.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#giropay-psp-merchant-agreement-set-patch">Update an agreement set reference</a>, <a href="#giropay-psp-merchant-agreement-set-delete">Delete an agreement set reference</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">03.03.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NEW_INFO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added additional information about initial merchantStatus after create.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#giropay-psp-merchant-base-post-response">Create merchant</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14.02.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CHANGE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added additional information regarding allowed characters for <code>PostalAddress</code> and <code>Contacts</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#PostalAddress">Postal Address</a>, <a href="#giropay-psp-merchant-contacts-post">Create contacts</a>, <a href="#giropay-psp-merchant-contacts-patch">Patch a contact</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">08.02.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CHANGE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Edit response presence of <code>valueAddedTaxNumber</code>, now <code>Optional</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#giropay-psp-merchant-base-get">Read a merchant</a>, <a href="#giropay-psp-merchant-base-patch">Patch a merchant</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">07.02.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FEATURE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. Added two new endpoints in order to enable administration of authorized PSPs.<br>
2. Added <code>name</code> attribute to response.<br>
3. Added HAL links referring the new endpoints in several responses.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. <a href="#giropay-psp-merchant-downstream-psps-get">Read all available downstream PSPs</a>, <a href="#giropay-psp-merchant-authorized-psps-get">Read all authorized PSPs</a>;<br>
2. <a href="#giropay-psp-merchant-authorized-psps-put-response">Authorize a PSP</a>;<br>
3. <a href="#giropay-psp-merchant-base-post-links">Create a merchant</a>, <a href="#giropay-psp-merchant-base-patch-links">Update a merchant</a>, <a href="#giropay-psp-merchant-base-get-links">Read a merchant</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">07.02.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CHANGE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Changed return status code of merchant address update from 204 to 200.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#giropay-psp-merchant-postal-address-put">Create/Update a merchant’s address</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">01.02.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CHANGE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Changed request field constraint of <code>valueAddedTaxNumber</code> from <code>Mandatory</code> to <code>Optional</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#giropay-psp-merchant-complete-post-request">Create a complete merchant</a>, <a href="#giropay-psp-merchant-base-post-request">Create a merchant</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">27.01.2023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CHANGE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added validation to ensure IBAN and BIC of bankAccount belong to the same bank.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#giropay-psp-merchant-shops-post">Create a shop</a>, <a href="#giropay-psp-merchant-shops-patch">Patch a shop</a>, <a href="#giropay-psp-merchant-complete-post">Create a complete merchant</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 2.11.0-SNAPSHOT<br>
Last updated 2024-01-30 09:24:56 UTC
</div>
</div>
<link rel="stylesheet" href="highlight/styles/github.min.css">
<script src="highlight/highlight.min.js"></script>

</body>
</html>